{% load static le_francais_dictionary wagtailcore_tags %}
<div class="row">
    {% if not hide_info %}
        <div class="col-12">
            <div id="flash-cards-info"
                 class="alert alert-success alert-dismissible fade show"
                 role="alert">
                ВАЖНО! Пожалуйста, <a href="{% slugurl 'flash-cards' %}">прочитайте</a>
                какие принципы лежат в основе работы карточек и какой алгоритм
                работы мы предлагаем для получения максимального результата.
                <button type="button" data-toggle="tooltip"
                        title="Больше не показывать"
                        id="hide-flash-cards-info-button" class="close"
                        data-dismiss="alert"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    {% endif %}
    {% if lesson_page.several_word_packets %}
        {% get_packets lesson_page as packets %}
        <div class="col-12" style="margin-bottom: 1rem">
            {% for packet in packets %}
                <button type="button" class="btn btn-secondary btn-lg"
                        onclick="loadFlashCards({{ packet.id }})">{{ packet.name }}</button>
            {% endfor %}
        </div>
        <div class="col-12" id="dictionary-app" style="margin-bottom: 1rem"></div>
    {% else %}
        <div class="col-12" style="margin-bottom: 1rem" id="dictionary-app">
            {% get_packets lesson_page as packet %}
            {% include 'dictionary/dictionary_app.html' with packet_id=packet.id %}
        </div>
    {% endif %}
</div>
<script>
    function loadFlashCards(packet_id) {
        $.ajax(Urls['dictionary:get_app'](packet_id),{
            success: function (data) {
                $('#dictionary-app').html(data)
            }
        })
    }
    $('#hide-flash-cards-info-button').on('click', function () {
        $.cookie('hide_flash_cards_info', 1);
        $('#hide-flash-cards-info-button').tooltip('hide')
    })
</script>
