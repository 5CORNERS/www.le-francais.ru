(function(t){function e(e){for(var r,a,i=e[0],c=e[1],d=e[2],u=0,h=[];u<i.length;u++)a=i[u],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},s={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static/dictionary/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0164":function(t,e,n){t.exports=n.p+"img/learn.ecebc089.svg"},"18d4":function(t,e,n){t.exports=n.p+"img/pause.173288f8.svg"},"21e7":function(t,e,n){t.exports=n.p+"img/previous.c6da65d7.svg"},"35fe":function(t,e,n){t.exports=n.p+"img/next.def9b092.svg"},"53e0":function(t,e,n){t.exports=n.p+"img/play.16146fde.svg"},"5c0b":function(t,e,n){"use strict";var r=n("e332"),s=n.n(r);s.a},"75a3":function(t,e,n){t.exports=n.p+"img/repeat.8f852bf0.svg"},7720:function(t,e,n){t.exports=n.p+"img/heart.cc773a43.svg"},7831:function(t,e,n){t.exports=n.p+"img/dont_remember.455df279.svg"},8462:function(t,e,n){t.exports=n.p+"img/heart-arrow.a7e327ca.svg"},"8a17":function(t,e,n){t.exports=n.p+"img/pause_time.f9c5cfd1.svg"},"9ff2":function(t,e,n){t.exports=n.p+"img/keyhole.da74ef8e.svg"},a306:function(t,e,n){t.exports=n.p+"img/btn-add-words.dad1585f.svg"},b263:function(t,e,n){t.exports=n.p+"img/full_screen.c4ebc905.svg"},bcb3:function(t,e,n){t.exports=n.p+"img/sound_on.baa62bda.svg"},c8fa:function(t,e,n){t.exports=n.p+"img/menu.356e787e.svg"},cd49:function(t,e,n){"use strict";n.r(e);n("8e6e"),n("ac6a"),n("456d");var r=n("bd86"),s=(n("14c6"),n("08c1"),n("4842"),n("d9fc"),n("2b0e")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.packetPk?t._e():n("h1",[t._v("Номер пакета не установлен.")]),t.isDevEnv?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-1"},[n("div",{staticClass:"col-12 col-md-3 col-lg-3"},[t._v(" ")]),n("div",{staticClass:"col-12 col-md-9 col-lg-6 mb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[t._e(),n("router-view")],1)])]),n("div",{staticClass:"col-12 col-lg-3"},[t._v(" ")])])]):n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[t._e(),n("router-view")],1)])])},a=[],i=(n("96cf"),n("3b8d")),c=n("d225"),d=n("b0b4"),l=n("308d"),u=n("6bb5"),h=n("4e2b"),f=n("9ab4"),p=n("60a3"),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.lessonsLoaded?t._e():r("div",{staticClass:"my-4 text-center"},[r("b-spinner",{attrs:{label:"Loading...",width:"24",variant:"dark"}})],1),t.isUserAuthenticated?r("div",{staticClass:"mb-3",attrs:{id:"lessons-list"}},[r("button",{staticClass:"btn-info btn-show-lessons",class:{show:t.showLessonList},on:{click:t.toggleShowLessonList}},[r("span",{staticClass:"mr-2"},[t._v("\n            "+t._s(t.lesson?t.lesson.name:"Выберите урок")+"\n        ")]),t.showLessonList?r("i",{staticClass:"lni-chevron-up"}):r("i",{staticClass:"lni-chevron-down"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showLessonList,expression:"showLessonList"}],staticClass:"lessons-dropdown"},[r("div",t._l(t.lessons,function(e){return r("a",{staticClass:"btn-lesson d-inline-flex d-xl-flex d-lg-inline-flex mb-2",class:{active:e.pk===t.lessonNumber,activated:e.activated||t.isDemoUserAllowed(e),added:e.added||t.isDemoUserAllowed(e),learned:e.wordsLearned&&e.wordsLearned>=e.wordsCount},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.setLesson(e)}}},[r("span",[t._v(t._s(e.name))]),e.wordsLearned&&e.wordsLearned>=e.wordsCount?r("img",{attrs:{src:n("8462"),width:"26"}}):e.added||t.isDemoUserAllowed(e)?r("img",{attrs:{src:n("7720"),width:"22"}}):e.activated||t.isDemoUserAllowed(e)?r("img",{attrs:{src:n("a306"),width:"24"}}):r("img",{attrs:{src:n("f3d2"),width:"22"}})])}),0)])]):t._e()])},m=[],b=n("6fc5"),w=n("2f62"),g=n("bc3a"),y=n.n(g),T={baseURL:"/",withCredentials:!0};var C=y.a.create(T);var k=C;s["default"].use(w["a"]);var W={state:{currentLesson:null,currentLessonNumber:0,slideTimerInterval:1,wordNumber:0,wordsCount:0,wordChangeInterval:1,useFullscreen:!1,isAppInitialized:!1,showWordTranslation:!1,isDevEnv:!1,dictionaryMode:"learn",repeatWordsCount:0},mutations:{SET_CURRENT_LESSON:function(t,e){t.currentLesson=e,t.currentLessonNumber=e?e.pk:0},SET_TIMER_INTERVAL:function(t,e){t.slideTimerInterval=e},SET_WORD_CHANGE_INTERVAL:function(t,e){t.wordChangeInterval=e},SET_WORD_NUMBER:function(t,e){t.wordNumber=e},SET_WORDS_COUNT:function(t,e){t.wordsCount=e},SET_FULLSCREEN_MODE:function(t,e){t.useFullscreen=e},SET_SHOW_WORD_TRANSLATION:function(t,e){t.showWordTranslation=e},SET_IS_APP_INITIALIZED:function(t,e){t.isAppInitialized=e},SET_DICTIONARY_MODE:function(t,e){t.dictionaryMode=e},SET_REPEAT_WORDS_COUNT:function(t,e){t.repeatWordsCount=e}},actions:{setCurrentLesson:function(t,e){var n=t.commit;n("SET_CURRENT_LESSON",e)},setSlideTimerInterval:function(t,e){var n=t.commit;e>5&&(e=1),n("SET_TIMER_INTERVAL",e)},setWordChangeInterval:function(t,e){var n=t.commit;e>5&&(e=1),n("SET_WORD_CHANGE_INTERVAL",e)},setWordNumber:function(t,e){(e>=t.state.wordsCount||e<0)&&(e=0),t.commit("SET_WORD_NUMBER",e)},setWordsCount:function(t,e){var n=t.commit;n("SET_WORDS_COUNT",e)},setFullscreenMode:function(t,e){var n=t.commit;n("SET_FULLSCREEN_MODE",e)},showWordTranslation:function(t,e){var n=t.commit;n("SET_SHOW_WORD_TRANSLATION",e)},setIsAppInitialized:function(t,e){var n=t.commit;n("SET_IS_APP_INITIALIZED",e)},setLessonByPk:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.next=3,k.get("/dictionary/progress/"+n+"/");case 3:return r=t.sent,t.next=6,this.dispatch("setCurrentLesson",r.data);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),setDictionaryMode:function(t,e){var n=t.commit;n("SET_DICTIONARY_MODE",e)},loadRepeatWordsCount:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,k.get("/dictionary/repeat-words/count/");case 3:r=t.sent,n("SET_REPEAT_WORDS_COUNT",r.data.count);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},O=new w["a"].Store(W),L=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.lessons=[],t.isAuthenticated=!1,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"setProgress",value:function(t){this.lessons=t.packets,this.isAuthenticated=t.isAuthenticated}},{key:"loadLessons",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.get("/dictionary/progress");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],L.prototype,"setProgress",null),Object(f["a"])([Object(b["a"])({commit:"setProgress"})],L.prototype,"loadLessons",null),L=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"LessonsModule",store:O,dynamic:!0})],L);var _=Object(b["e"])(L),j=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.lessonsLoaded=!1,t.showLessonList=!1,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"toggleShowLessonList",value:function(){this.showLessonList=!this.showLessonList}},{key:"isDemoUserAllowed",value:function(t){return t.demo&&!_.isAuthenticated}},{key:"setLesson",value:function(t){this.showLessonList=!1,O.dispatch("setCurrentLesson",t)}},{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.loadLessons();case 2:return t.next=4,O.dispatch("setIsAppInitialized",!0);case 4:return t.next=6,this.$nextTick();case 6:this.isUserAuthenticated||(e=/\/lecon-(\d+)\//gm,n=e.exec(window.location.href),null!==n?(r=_.lessons[parseInt(n[1],10)-1],r&&this.setLesson(r)):this.setLesson(_.lessons[0])),this.lessonsLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"lessons",get:function(){return _.lessons}},{key:"isUserAuthenticated",get:function(){return _.isAuthenticated}},{key:"lesson",get:function(){return O.state.currentLesson}},{key:"lessonNumber",get:function(){return O.state.currentLessonNumber}}]),e}(p["c"]);j=Object(f["a"])([Object(p["a"])({})],j);var S=j,E=S,x=n("2877"),D=Object(x["a"])(E,v,m,!1,null,null,null),P=D.exports,I=function(t){function e(){return Object(c["a"])(this,e),Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.packetPk){t.next=2;break}return t.abrupt("return");case 2:return O.dispatch("setDictionaryMode",this.mode||"learn"),t.next=5,O.dispatch("setLessonByPk",parseInt(this.packetPk,10));case 5:O.dispatch("loadRepeatWordsCount"),O.dispatch("setIsAppInitialized",!0);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"isDevEnv",get:function(){return O.state.isDevEnv}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])(String)],I.prototype,"packetPk",void 0),Object(f["a"])([Object(p["b"])(String)],I.prototype,"mode",void 0),I=Object(f["a"])([Object(p["a"])({components:{LessonList:P}})],I);var N=I,A=N,M=(n("5c0b"),Object(x["a"])(A,o,a,!1,null,null,null)),R=M.exports,F=n("8c4f"),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isAppInitialized,expression:"isAppInitialized"}]},[t.error?n("BlankCard",[n("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.isAuthenticated||t.loginWarnAccepted?t.isAuthenticated&&!t.currentLesson?n("BlankCard",[n("h2",{staticClass:"text-center"},[t._v("Выберите урок в меню выше.")])]):t.currentLesson?n("div",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated||t.loginWarnAccepted,expression:"isAuthenticated || loginWarnAccepted"}]},[t.isCurrentLessonAdded?["learn"===t.dictionaryMode?n("LearnWordsDictionary",{ref:"learnDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):"repeat"===t.dictionaryMode?n("RepeatWordsDictionary",{ref:"repeatDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):"self-check"===t.dictionaryMode?n("SelfCheckWordsDictionary",{ref:"selfCheckDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):n("BlankCard",[n("h2",{staticClass:"text-center"},[t._v("Неизвестный режим словарика.")])])]:n("BlankCard",[n("h2",{staticClass:"text-center mb-5"},[t._v("\n        Загрузить слова "+t._s(t.currentLesson.lessonNumber)+" урока в ваш профиль для изучения?\n      ")]),n("div",{staticClass:"text-center fullwidth"},[n("button",{staticClass:"btn btn btn-info btn-nav mx-2 mb-2",attrs:{type:"button"},on:{click:t.loadLessonWords}},[t._v("\n          ОК\n        ")]),n("button",{staticClass:"btn btn-info btn-nav mx-2 mb-2",attrs:{type:"button"},on:{click:t.unselectLesson}},[t._v("Отмена\n        ")])])])],2):t._e():n("BlankCard",[n("p",{staticClass:"text-center"},[t._v("\n      Незарегистрированным пользователям доступна только демо-версия словарика.\n      Войдите на сайт под своим именем, чтобы использовать метод интервального повторения слов.\n    ")]),n("button",{staticClass:"btn-info btn-card-button mt-4",on:{click:function(e){t.loginWarnAccepted=!0}}},[t._v("Понятно")])])],1)},$=[],U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.askForWordBan?r("BlankCard",[r("h2",{staticClass:"text-center"},[t._v("\n      Навсегда убрать «"+t._s(t.currentWordToLearn.word.name)+"» из списка для изучения?\n    ")]),r("div",{staticClass:"text-center mt-4"},[r("button",{staticClass:"btn-info btn-card-button mr-2",attrs:{type:"button"},on:{click:t.banWord}},[t._v("\n        Да, я уже знаю\n        "+t._s("phrase"===t.currentWordToLearn.word.partOfSpeech?"эту фразу":"это слово")+".\n      ")]),r("button",{staticClass:"btn-info btn-card-button ml-2",attrs:{type:"button"},on:{click:t.cancelWordBan}},[t._v("\n        Нет, я передумал!\n      ")])])]):!1===t.lessonComplete?[t.wordsCount?r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",{staticClass:"active"},[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center",class:{filled:t.learntWordsCount===t.wordsCount,learnt:t.isLessonLearnt},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("self-check")}}},[r("radial-progress-bar",{attrs:{"completed-steps":t.learntWordsCount,diameter:66,"total-steps":t.wordsCount,"start-color":"#1972bc","stop-color":"#1972bc"}},[r("div",[r("img",{attrs:{src:n("d9c4")}}),r("img",{attrs:{src:n("d25c")}})])])],1),r("span",[t._v("Проверяем")])])]):t._e(),r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("LearnWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordNumber(t.currentWordNumber-1)},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("21e7")}})]),r("button",{staticClass:"btn btn-info btn-nav btn-narrow mx-4",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.askForBan()}}},[r("img",{attrs:{src:n("7831")}})]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.showWordTranslation()},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("35fe")}})])])])])]:t.lessonComplete?r("BlankCard",[r("h2",[t._v("Поздравляем! Все слова выучены!")])]):t._e()],2)},H=[],z=n("1e5c"),V=function(){function t(e){var r=this;Object(c["a"])(this,t),this.name="",this.translation="",this.gender="m",this.partOfSpeech="",this.plural=!1,this.pk=0,this.banned=!1,e&&(this.name=e.word,this.gender=e.gender,this.partOfSpeech=e.partOfSpeech,this.plural=e.plural,this.pk=e.pk,this.translation=e.translations&&e.translations[0]?e.translations[0].translation:"",this.loadSingleSound(e.pollyUrl?e.pollyUrl:n("efaf")).then(function(t){return r.soundOfWord=t}),this.loadSingleSound(e.translations&&e.translations[0]?e.translations[0].pollyUrl:n("efaf")).then(function(t){return r.soundOfTranslation=t}))}return Object(d["a"])(t,[{key:"loadSingleSound",value:function(t){var e=new z["Howl"]({src:[n("efaf")],loop:!1});return t?new Promise(function(n,r){var s=new z["Howl"]({src:[t],preload:!0,loop:!1,buffer:!0,html5:!0,onload:function(){return n(s)},onloaderror:function(){n(e)}})}):new Promise(function(t){t(e)})}}]),t}(),Y=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.words=[],t.errors=[],t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"setWordsData",value:function(t){this.words=t.words.map(function(t){return new V(t)}),this.errors=t.errors}},{key:"loadWords",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="repeat"===O.state.dictionaryMode?"/dictionary/repeat-words/":"/dictionary/words/"+e+"/",t.next=3,k.get(n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],Y.prototype,"setWordsData",null),Object(f["a"])([Object(b["a"])({commit:"setWordsData"})],Y.prototype,"loadWords",null),Y=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"WordsModule",store:O,dynamic:!0})],Y);var G=Object(b["e"])(Y),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blank-card"},[t._m(0),n("div",{staticClass:"word-card"},[t._t("default")],2)])},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col next-step-block"})])}],Z=function(t){function e(){return Object(c["a"])(this,e),Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(p["c"]),q=Z,K=Object(x["a"])(q,J,Q,!1,null,null,null),X=K.exports,tt=n("03cd"),et=n.n(tt),nt=n("531a"),rt=n.n(nt),st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex justify-content-center text-center"},[r("div",{staticClass:"mode-icon",class:{active:"learn"===t.dictionaryMode},on:{click:function(e){return t.setDictionaryMode("learn")}}},[r("img",{attrs:{src:n("0164"),alt:"Учить слова"}}),r("p",[t._v("Учить")]),r("span")])]),r("div",{staticClass:"col d-flex justify-content-center text-center"},[r("div",{staticClass:"mode-icon",class:{active:"repeat"===t.dictionaryMode},on:{click:function(e){return t.setDictionaryMode("repeat")}}},[r("img",{attrs:{src:n("75a3"),alt:"Повторять слова"}}),r("b",{staticClass:"repeat-words-counter"},[t._v(t._s(t.repeatWordsCount))]),r("p",[t._v("Повторять")]),r("span")])])])},ot=[],at=function(t){function e(){return Object(c["a"])(this,e),Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"setDictionaryMode",value:function(t){O.dispatch("setDictionaryMode",t)}},{key:"dictionaryMode",get:function(){return O.state.dictionaryMode}},{key:"repeatWordsCount",get:function(){return O.state.repeatWordsCount}}]),e}(p["c"]);at=Object(f["a"])([Object(p["a"])({})],at);var it=at,ct=it,dt=Object(x["a"])(ct,st,ot,!1,null,"3b3ac632",null),lt=dt.exports,ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("div",{staticClass:"dummy-row"},[t._v(" ")]),r("span",{staticClass:"word-card-phrase"},[t._v("\n    "+t._s(t.wordLabel)+"\n  ")]),t.translateTimerEnabled?t._e():r("span",{staticClass:"play-button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("53e0")}})]),t.translateTimerEnabled?r("span",{staticClass:"pause-button invis",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("18d4")}})]):t._e(),r("div",{staticClass:"word-card-phrase",class:{invisible:!t.showTranslation}},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("div",{staticClass:"info-row"},[r("SettingsBlock",{attrs:{translateTimerSecondsPassed:t.translateTimerSecondsPassed,"show-timer-settings":!0}})],1)]):t._e()},ht=[],ft=(n("7f7f"),n("66d4")),pt=n.n(ft),vt=n("1157"),mt=n.n(vt),bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-row",attrs:{id:"settings-"+t.id}},[r("div",{staticClass:"timer-block ml-4"},[t.showTimerSettings?r("div",{staticClass:"d-flex align-items-center"},[r("a",{staticClass:"invis mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.changeTranslateTimerInterval(e)}}},[r("img",{attrs:{height:"20",src:n("8a17")}})]),t._l(t.translateTimerInterval,function(e){return r("span",{staticClass:"timer-dot mr-1",class:{passed:e<=t.translateTimerSecondsPassed}})})],2):t._e()]),r("div",{staticClass:"settings-block mr-4"},[r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleSoundEnabled(e)}}},[t.soundEnabled?r("img",{attrs:{height:"20",src:n("bcb3")}}):t._e(),t.soundEnabled?t._e():r("img",{staticClass:"play-sound-off",attrs:{height:"20",src:n("f635")}})]),r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleFullscreen(e)}}},[r("img",{attrs:{height:"20",src:n("b263")}})]),r("a",{staticClass:"invis",class:{visible:t.settingsPopoverOpened},attrs:{href:"#",id:"settings-popover-button"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{height:"20",src:n("c8fa")}}),r("b-popover",{attrs:{container:"settings-"+t.id,"custom-class":"settings-popover",placement:"top",target:"settings-popover-button",triggers:"click blur"},on:{hidden:function(e){t.settingsPopoverOpened=!1},shown:function(e){t.settingsPopoverOpened=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Настройки")]},proxy:!0}])},[r("p",[r("label",{attrs:{for:"select-translation-direction"}},[t._v("Направление перевода:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-translation-direction"},domProps:{value:t.translationDirection},on:{change:t.setTranslationDirection}},[r("option",{attrs:{value:"fr-ru"}},[t._v("Французский → русский")]),r("option",{attrs:{value:"ru-fr"}},[t._v("Русский → французский")])])]),r("p",[r("label",{attrs:{for:"select-timer-interval"}},[t._v("Задержка после показа слова:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-timer-interval"},domProps:{value:t.translateTimerInterval},on:{change:t.setTranslateTimerInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)]),r("p",[r("label",{attrs:{for:"select-change-interval"}},[t._v("Задержка после показа перевода:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-change-interval"},domProps:{value:t.wordChangeInterval},on:{change:t.setWordChangeInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)])])],1)])])},wt=[],gt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.translateTimerInterval=1,t.soundEnabled=!0,t.translationDirection="fr-ru",t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"SET_SOUND_ENABLED",value:function(t){this.soundEnabled=t}},{key:"SET_TRANSLATION_DIRECTION",value:function(t){this.translationDirection=t}},{key:"SET_TRANSLATE_TIMER_INTERVAL",value:function(t){this.translateTimerInterval=t>5?1:t}},{key:"setSoundEnabled",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslateTimerInterval",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslationDirection",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],gt.prototype,"SET_SOUND_ENABLED",null),Object(f["a"])([b["c"]],gt.prototype,"SET_TRANSLATION_DIRECTION",null),Object(f["a"])([b["c"]],gt.prototype,"SET_TRANSLATE_TIMER_INTERVAL",null),Object(f["a"])([Object(b["a"])({commit:"SET_SOUND_ENABLED"})],gt.prototype,"setSoundEnabled",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATE_TIMER_INTERVAL"})],gt.prototype,"setTranslateTimerInterval",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATION_DIRECTION"})],gt.prototype,"setTranslationDirection",null),gt=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"SettingsModule",store:O,dynamic:!0})],gt);var yt=Object(b["e"])(gt),Tt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.settingsPopoverOpened=!1,t.id=Math.floor(1e5*Math.random()),t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"setTranslationDirection",value:function(t){yt.setTranslationDirection(t.target.value)}},{key:"setWordChangeInterval",value:function(t){O.dispatch("setWordChangeInterval",parseInt(t.target.value,10))}},{key:"toggleSoundEnabled",value:function(){yt.setSoundEnabled(!yt.soundEnabled)}},{key:"setTranslateTimerInterval",value:function(t){yt.setTranslateTimerInterval(parseInt(t.target.value,10))}},{key:"changeTranslateTimerInterval",value:function(){this.setTranslateTimerInterval(yt.translateTimerInterval+1)}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"translationDirection",get:function(){return yt.translationDirection}},{key:"translateTimerInterval",get:function(){return yt.translateTimerInterval}},{key:"soundEnabled",get:function(){return yt.soundEnabled}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],Tt.prototype,"translateTimerSecondsPassed",void 0),Object(f["a"])([Object(p["b"])()],Tt.prototype,"showTimerSettings",void 0),Tt=Object(f["a"])([p["a"]],Tt);var Ct=Tt,kt=Ct,Wt=Object(x["a"])(kt,bt,wt,!1,null,null,null),Ot=Wt.exports,Lt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.translateTimerEnabled=!1,t.translateTimerSecondsPassed=0,t.showTranslation=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"wordChanged",value:function(){"learn"===this.dictionaryMode&&this.word&&(this.timer.stop(),this.changeWordTimer.stop(),this.showTranslation=!1,this.translateTimerSecondsPassed=0,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),this.word.soundOfWord&&this.word.soundOfWord.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0),this.translateTimerEnabled&&this.toggleTimer(!0))}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,n){var r=t.word.soundOfWord;yt.soundEnabled&&!t.soundOfWordPlayed?r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){var r=t.word.soundOfTranslation;yt.soundEnabled&&!t.soundOfTranslationPlayed?(t.word.soundOfWord.pause(),r&&(r.once("end",function(){t.soundOfTranslationPlayed=!0,e()}),r.play())):e()})}},{key:"showWordTranslation",value:function(){var t=this;if(this.showTranslation||!this.translateTimerEnabled)return this.word.soundOfWord.stop(),this.word.soundOfTranslation.stop(),void O.dispatch("setWordNumber",O.state.wordNumber+1);this.showTranslation=!0,this.translateTimerSecondsPassed=yt.translateTimerInterval,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.timer.stop(),this.changeWordTimer.stop(),this.soundOfTranslationPlayed=!1,this.playSound(!0).then(function(){t.changeWordTimer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:O.state.wordChangeInterval}}),t.translateTimerEnabled||t.changeWordTimer.pause()})}},{key:"beforeTimerStarted",value:function(){return yt.soundEnabled?this.playSound():new Promise(function(t){return t()})}},{key:"playSound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.word.soundOfWord.stop(),this.word.soundOfTranslation.stop(),"learn"!==this.dictionaryMode?new Promise(function(t){t()}):t?"fr-ru"===yt.translationDirection?this.playSoundOfTranslation():this.playSoundOfWord():"fr-ru"===yt.translationDirection?this.playSoundOfWord():this.playSoundOfTranslation()}},{key:"changeWord",value:function(){this.translateTimerEnabled&&"learn"===this.dictionaryMode&&(this.word.soundOfWord&&this.word.soundOfWord.stop(),this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),O.dispatch("setWordNumber",O.state.wordNumber+1))}},{key:"eventShowWordTranslation",value:function(t){"learn"===this.dictionaryMode&&t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"toggleTimer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.translateTimerEnabled=e||!this.translateTimerEnabled,!this.translateTimerEnabled)return this.timer.isRunning()&&this.timer.pause(),void(this.changeWordTimer.isRunning()&&this.changeWordTimer.pause());this.changeWordTimer.isPaused()?this.changeWordTimer.start():this.timer.isPaused()?this.timer.start():this.beforeTimerStarted().then(function(){t.translateTimerEnabled&&(t.translateTimerSecondsPassed=0,t.timer.start({precision:"seconds",startValues:{seconds:t.translateTimerSecondsPassed},target:{seconds:yt.translateTimerInterval}}))})}},{key:"dictionaryModeChanged",value:function(t){"learn"!==t&&(this.timer.stop(),this.changeWordTimer.stop())}},{key:"beforeDestroy",value:function(){this.timer.stop(),this.changeWordTimer.stop()}},{key:"initWordCard",value:function(){var t=this,e=O.state.currentLesson;this.timer=new pt.a,this.timer.addEventListener("secondsUpdated",function(e){if("learn"!==t.dictionaryMode)return t.timer.stop();t.translateTimerSecondsPassed++}),this.timer.addEventListener("started",function(e){t.translateTimerEnabled=!0}),this.timer.addEventListener("targetAchieved",function(e){t.translateTimerEnabled&&"learn"===t.dictionaryMode&&t.showWordTranslation()}),this.changeWordTimer=new pt.a,this.changeWordTimer.addEventListener("started",function(e){if(!t.showTranslation||"learn"!==t.dictionaryMode)return t.changeWordTimer.stop()}),this.changeWordTimer.addEventListener("targetAchieved",function(n){e===O.state.currentLesson&&"learn"===t.dictionaryMode&&(t.changeWordTimer.stop(),t.changeWord())}),this.lastFadeoutAnimationStarted=Date.now(),mt()(".word-card").off("mousemove"),mt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=mt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),document.body.addEventListener("keydown",function(e){32===e.keyCode&&t.toggleTimer()}),this.$store.subscribe(function(e,n){"SET_DICTIONARY_MODE"===e.type&&"learn"!==e.payload&&(t.timer.stop(),t.changeWordTimer.stop())}),this.wordChanged()}},{key:"mounted",value:function(){this.initWordCard()}},{key:"word",get:function(){return this.dictionaryWord?this.dictionaryWord.word:new V(null)}},{key:"wordSexClass",get:function(){return{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return"ru-fr"===yt.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return"ru-fr"===yt.translationDirection?this.word.name:this.word.translation}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}},{key:"dictionaryMode",get:function(){return O.state.dictionaryMode}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],Lt.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],Lt.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["d"])("word")],Lt.prototype,"wordChanged",null),Object(f["a"])([Object(p["d"])("isShowWordTranslation")],Lt.prototype,"eventShowWordTranslation",null),Object(f["a"])([Object(p["d"])("dictionaryMode")],Lt.prototype,"dictionaryModeChanged",null),Lt=Object(f["a"])([Object(p["a"])({components:{SettingsBlock:Ot}})],Lt);var _t=Lt,jt=_t,St=Object(x["a"])(jt,ut,ht,!1,null,null,null),Et=St.exports;p["c"].use(et.a);var xt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.wordsToLearn=e,this.lessonIsLoading=!0,t.next=4,this.$nextTick();case 4:return this.lessonComplete=!1,t.next=7,O.dispatch("setWordsCount",this.wordsToLearn.length);case 7:this.setWordNumber(0),this.lessonIsLoading=!1,O.state.isDevEnv;case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){(O.state.isDevEnv||t!==O.state.dictionaryMode&&this.learntWordsCount===this.wordsCount)&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"error",get:function(){return G.errors.length?G.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.currentWordNumber}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}}]),e}(p["c"]);Object(f["a"])([Object(p["d"])("lessonComplete")],xt.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["d"])("useFullscreen")],xt.prototype,"useFullscreenToggle",null),xt=Object(f["a"])([Object(p["a"])({components:{LearnWordCard:Et,RadialProgressBar:rt.a,BlankCard:X,DictionaryModeSetter:lt}})],xt);var Dt=xt,Pt=Dt,It=Object(x["a"])(Pt,U,H,!1,null,null,null),Nt=It.exports,At=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.lessonComplete?t.lessonComplete?r("BlankCard",[t.wordsCount?r("h2",[t._v("Поздравляем! Все слова повторены.")]):r("h2",[t._v("На сегодня повторять нечего.")])]):t._e():[r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center filled",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("learn")}}},[r("img",{staticClass:"rotated",attrs:{src:n("d25c")}})]),r("span",{staticClass:"active"},[t._v("Проверяем")])])]),t.currentWordToLearn?r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("SelfCheckWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!0)}}},[r("img",{attrs:{src:n("e587")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Вспомнил":"Помню")+"\n            ")])]),r("button",{staticClass:"btn btn-info btn-nav btn-wide mx-2",attrs:{disabled:t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.currentWordToLearn.revealWord()}}},[r("img",{attrs:{src:n("f4a8")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("Ответ")])]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!1)}}},[r("img",{attrs:{src:n("7831")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Не вспомнил?":"Не помню")+"\n            ")])])])])]):t._e()]],2)},Mt=[],Rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("div",{staticClass:"dummy-row"},[t._v(" ")]),r("span",{staticClass:"word-card-phrase"},["learn"===t.cardMode?[t._v("\n              "+t._s(t.wordLabel)+"\n          ")]:[t._v("\n              "+t._s(t.wordTranslation)+"\n          ")]],2),!1===t.translateTimerEnabled&&"learn"===t.cardMode?r("span",{staticClass:"play-button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("53e0")}})]):t._e(),!0===t.translateTimerEnabled&&"learn"===t.cardMode?r("span",{staticClass:"pause-button invis",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("18d4")}})]):t._e(),"learn"===t.cardMode?r("div",{staticClass:"word-card-phrase",class:{invisible:!t.showTranslation}},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]):t._e(),"learn"!==t.cardMode?r("div",{staticClass:"word-card-phrase"},[t.dictionaryWord.isWordRevealed()?[t._v("\n      "+t._s(t.wordLabel)+"\n    ")]:[t.showCharacterPlaceholders?r("div",{staticClass:"word-characters-block"},t._l(t.wordCharacters,function(e){return r("span",{staticClass:"word-character",class:{shown:e.shown}},[t._v("\n                      "+t._s(e.shown?e.character:"")+"\n                  ")])}),0):t._e()]],2):t._e(),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("a",{staticClass:"show-hint-button",class:{invisible:"learn"===t.cardMode||t.dictionaryWord.isWordRevealed()},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showHint(e)}}},[r("img",{attrs:{src:n("9ff2")}})]),r("div",{staticClass:"info-row"},[r("div",{staticClass:"timer-block ml-4",class:{invisible:"learn"!==t.cardMode}},[r("div",{staticClass:"d-flex align-items-center"},[r("a",{staticClass:"invis mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.changeTranslateTimerInterval(e)}}},[r("img",{attrs:{height:"20",src:n("8a17")}})]),t._l(t.translateTimerInterval,function(e){return r("span",{staticClass:"timer-dot mr-1",class:{passed:e<=t.translateTimerSecondsPassed}})})],2)]),r("div",{staticClass:"settings-block mr-4"},[r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleSoundEnabled(e)}}},[t.soundEnabled?r("img",{attrs:{height:"20",src:n("bcb3")}}):t._e(),t.soundEnabled?t._e():r("img",{staticClass:"play-sound-off",attrs:{height:"20",src:n("f635")}})]),r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleFullscreen(e)}}},[r("img",{attrs:{height:"20",src:n("b263")}})]),r("a",{staticClass:"invis",class:{visible:t.settingsPopoverOpened},attrs:{href:"#",id:"settings-popover-button"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{height:"20",src:n("c8fa")}}),r("b-popover",{attrs:{"custom-class":"settings-popover",placement:"top",target:"settings-popover-button",triggers:"click blur"},on:{hidden:function(e){t.settingsPopoverOpened=!1},shown:function(e){t.settingsPopoverOpened=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Настройки")]},proxy:!0}],null,!1,3100224662)},[r("p",[r("label",{attrs:{for:"select-translation-direction"}},[t._v("Направление перевода:")]),r("br"),r("select",{directives:[{name:"model",rawName:"v-model",value:t.translationDirection,expression:"translationDirection"}],staticClass:"form-control-sm",attrs:{id:"select-translation-direction"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.translationDirection=e.target.multiple?n:n[0]}}},[r("option",{attrs:{value:"fr-ru"}},[t._v("Французский → русский")]),r("option",{attrs:{value:"ru-fr"}},[t._v("Русский → французский")])])]),r("p",[r("label",{attrs:{for:"select-timer-interval"}},[t._v("Задержка после показа слова:")]),r("br"),r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.translateTimerInterval,expression:"translateTimerInterval",modifiers:{number:!0}}],staticClass:"form-control-sm",attrs:{id:"select-timer-interval"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.translateTimerInterval=e.target.multiple?n:n[0]}}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)]),r("p",[r("label",{attrs:{for:"select-change-interval"}},[t._v("Задержка после показа перевода:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-change-interval"},domProps:{value:t.wordChangeInterval},on:{change:t.setWordChangeInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)])])],1)])])]):t._e()},Ft=[],Bt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.translateTimerEnabled=!1,t.translateTimerSecondsPassed=0,t.translateTimerInterval=1,t.showTranslation=!1,t.soundEnabled=!0,t.showCharacterPlaceholders=!1,t.settingsPopoverOpened=!1,t.translationDirection="fr-ru",t.wordSoundsInitialized=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"wordChanged",value:function(){this.showCharacterPlaceholders=!1,this.showTranslation=!1,this.translateTimerSecondsPassed=0,this.wordSoundsInitialized=!1,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.soundOfTranslation&&this.soundOfTranslation.stop(),this.soundOfWord&&this.soundOfWord.stop(),this.timer.stop(),this.changeWordTimer.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0)}},{key:"dictionaryWordChanged",value:function(t){t&&this.soundEnabled&&this.playSound(!1)}},{key:"cardModeChanged",value:function(t){this.translateTimerEnabled=!1,this.wordChanged()}},{key:"toggleSoundEnabled",value:function(){this.soundEnabled=!this.soundEnabled}},{key:"showHint",value:function(){if(void 0!==this.dictionaryWord)if(this.showCharacterPlaceholders){for(var t in this.wordCharacters)if(!this.wordCharacters[t].shown){this.wordCharacters[t].show(!0);break}this.dictionaryWord.revealed=this.dictionaryWord.isWordRevealed()}else this.showCharacterPlaceholders=!0}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,n){var r=t.soundOfWord;t.soundEnabled&&!t.soundOfWordPlayed?r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){var r=t.soundOfTranslation;t.soundEnabled&&!t.soundOfTranslationPlayed?(t.soundOfWord.pause(),r&&(r.once("end",function(){t.soundOfTranslationPlayed=!0,e()}),r.play())):e()})}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"showWordTranslation",value:function(){var t=this;this.showTranslation=!0,this.translateTimerSecondsPassed=this.translateTimerInterval,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.playSound(!0).then(function(){t.changeWordTimer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:t.wordChangeInterval}}),t.translateTimerEnabled||t.changeWordTimer.pause()})}},{key:"setWordChangeInterval",value:function(t){O.dispatch("setWordChangeInterval",parseInt(t.target.value,10))}},{key:"changeTranslateTimerInterval",value:function(){return!(++this.translateTimerInterval>5)||(this.translateTimerInterval=1,!1)}},{key:"beforeTimerStarted",value:function(){return this.wordSoundsInitialized||(this.wordSoundsInitialized=!0,this.soundEnabled),new Promise(function(t){return t()})}},{key:"playSound",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.playSoundOfWord()}},{key:"changeWord",value:function(){this.translateTimerEnabled&&O.dispatch("setWordNumber",O.state.wordNumber+1)}},{key:"toggleTimer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.translateTimerEnabled=e||!this.translateTimerEnabled,!this.translateTimerEnabled)return this.timer.isRunning()&&this.timer.pause(),void(this.changeWordTimer.isRunning()&&this.changeWordTimer.pause());this.changeWordTimer.isPaused()?this.changeWordTimer.start():this.timer.isPaused()?this.timer.start():this.beforeTimerStarted().then(function(){t.translateTimerEnabled&&t.timer.start({precision:"seconds",startValues:{seconds:t.translateTimerSecondsPassed},target:{seconds:t.translateTimerInterval}})})}},{key:"eventShowWordTranslation",value:function(t){t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"beforeDestroy",value:function(){this.timer.stop(),this.changeWordTimer.stop()}},{key:"mounted",value:function(){var t=this;O.state.currentLesson;this.timer=new pt.a,this.timer.addEventListener("secondsUpdated",function(e){t.translateTimerSecondsPassed++}),this.timer.addEventListener("started",function(e){t.translateTimerEnabled=!0}),this.timer.addEventListener("targetAchieved",function(e){t.translateTimerEnabled&&t.showWordTranslation()}),this.changeWordTimer=new pt.a,this.changeWordTimer.addEventListener("targetAchieved",function(t){O.state.currentLesson}),this.lastFadeoutAnimationStarted=Date.now(),mt()(".word-card").off("mousemove"),mt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=mt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),document.body.addEventListener("keydown",function(e){32===e.keyCode&&t.beforeTimerStarted().then(function(){return t.toggleTimer()})}),this.wordChanged()}},{key:"wordId",get:function(){return O.state.currentLesson+"-"+this.wordNumber}},{key:"word",get:function(){if(this.dictionaryWord)return this.dictionaryWord.word}},{key:"wordSexClass",get:function(){return this.word?{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}:{}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return void 0===this.word?"":"ru-fr"===this.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return void 0===this.word?"":"ru-fr"===this.translationDirection?this.word.name:this.word.translation}},{key:"wordCharacters",get:function(){return void 0===this.dictionaryWord?[]:this.dictionaryWord.wordCharacters}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],Bt.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],Bt.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["d"])("word")],Bt.prototype,"wordChanged",null),Object(f["a"])([Object(p["d"])("dictionaryWord.revealed")],Bt.prototype,"dictionaryWordChanged",null),Object(f["a"])([Object(p["d"])("cardMode")],Bt.prototype,"cardModeChanged",null),Object(f["a"])([Object(p["d"])("isShowWordTranslation")],Bt.prototype,"eventShowWordTranslation",null),Bt=Object(f["a"])([Object(p["a"])({})],Bt);var $t=Bt,Ut=$t,Ht=Object(x["a"])(Ut,Rt,Ft,!1,null,null,null),zt=Ht.exports,Vt=(n("a481"),n("28a5"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c["a"])(this,t),this.character=e,this.shown=n,this.shownAsHint=r}return Object(d["a"])(t,[{key:"show",value:function(t){this.shown=!0,this.shownAsHint=t}}]),t}()),Yt=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c["a"])(this,t),this.word=e,this.learnt=r,this.shown=!1,this.remember=null,this.revealed=!1,this.wordCharacters=[],this.word.name.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.wordCharacters.push(new Vt(t," "===t))}),this.translationCharacters=[],this.word.translation.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.translationCharacters.push(new Vt(t," "===t))})}return Object(d["a"])(t,[{key:"translationCharactersShownNumber",value:function(){return this.translationCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"wordCharactersShownNumber",value:function(){return this.wordCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"isWordRevealed",value:function(){return this.wordCharacters.length===this.wordCharactersShownNumber()||this.translationCharacters.length===this.translationCharactersShownNumber()}},{key:"revealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!0}),this.translationCharacters.forEach(function(t){t.shown=!0}),this.revealed=!0}},{key:"unrevealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!1}),this.translationCharacters.forEach(function(t){t.shown=!1}),this.revealed=!1}},{key:"flushWord",value:function(){this.unrevealWord(),this.shown=!1,this.remember=null}},{key:"banWord",value:function(t){if(this.revealed=!0,this.shown=!0,this.remember=!0,this.learnt=!0,this.word.banned=!0,t)return k.post("/dictionary/mark-words/",{words:[this.word.pk]})}},{key:"updateWordState",value:function(t){return this.updateWordQuery(this.word.pk,null===this.remember||this.remember,this.hintsShown(),t)}},{key:"hintsShown",value:function(){var t=this.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"updateWordQuery",value:function(t,e,n,r){return k.post("/dictionary/update-words/",{words:[{pk:t,grade:e,mistakes:n,delay:r}]})}}]),t}(),Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("span",{staticClass:"word-card-phrase"},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]),r("div",{staticClass:"word-card-phrase"},[t.dictionaryWord.isWordRevealed()?[t._v("\n      "+t._s(t.wordLabel)+"\n    ")]:[t.showCharacterPlaceholders?r("div",{staticClass:"word-characters-block"},t._l(t.wordCharacters,function(e){return r("span",{staticClass:"word-character",class:{shown:e.shown}},[t._v("\n                      "+t._s(e.shown?e.character:"")+"\n                  ")])}),0):t._e()]],2),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("a",{staticClass:"show-hint-button",class:{invisible:t.dictionaryWord.isWordRevealed()},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showHint(e)}}},[r("img",{attrs:{src:n("9ff2")}})]),r("SettingsBlock",{attrs:{"show-timer-settings":!1}})],1):t._e()},Jt=[],Qt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.showTranslation=!1,t.showCharacterPlaceholders=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"wordChanged",value:function(){if(this.showCharacterPlaceholders=!1,this.showTranslation=!1,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),this.word.soundOfWord&&this.word.soundOfWord.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0),yt.soundEnabled)return this.playSound(!0)}},{key:"dictionaryWordChanged",value:function(t){t&&yt.soundEnabled&&this.playSound(!1)}},{key:"cardModeChanged",value:function(t){this.wordChanged()}},{key:"toggleSoundEnabled",value:function(){yt.soundEnabled=!yt.soundEnabled}},{key:"showHint",value:function(){if(void 0!==this.dictionaryWord)if(this.showCharacterPlaceholders){for(var t in this.wordCharacters)if(!this.wordCharacters[t].shown){this.wordCharacters[t].show(!0);break}this.dictionaryWord.revealed=this.dictionaryWord.isWordRevealed()}else this.showCharacterPlaceholders=!0}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,n){var r=t.word.soundOfWord;yt.soundEnabled?r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){var r=t.word.soundOfTranslation;yt.soundEnabled&&!t.soundOfTranslationPlayed?(t.word.soundOfWord&&t.word.soundOfWord.pause(),r&&(r.once("end",function(){t.soundOfTranslationPlayed=!0,e()}),r.play())):e()})}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"showWordTranslation",value:function(){this.showTranslation=!0,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.playSound(!0)}},{key:"playSound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.word.soundOfWord&&this.word.soundOfWord.stop(),this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),t?"fr-ru"===yt.translationDirection?this.playSoundOfTranslation():this.playSoundOfWord():"fr-ru"===yt.translationDirection?this.playSoundOfWord():this.playSoundOfTranslation()}},{key:"eventShowWordTranslation",value:function(t){t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"mounted",value:function(){var t=this;O.state.currentLesson;this.lastFadeoutAnimationStarted=Date.now(),mt()(".word-card").off("mousemove"),mt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=mt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),this.wordChanged()}},{key:"wordId",get:function(){return O.state.currentLesson+"-"+this.wordNumber}},{key:"word",get:function(){return this.dictionaryWord?this.dictionaryWord.word:new V(null)}},{key:"wordSexClass",get:function(){return this.word?{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}:{}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return void 0===this.word?"":"ru-fr"===yt.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return void 0===this.word?"":"ru-fr"===yt.translationDirection?this.word.name:this.word.translation}},{key:"wordCharacters",get:function(){return void 0===this.dictionaryWord?[]:"ru-fr"===yt.translationDirection?this.dictionaryWord.translationCharacters:this.dictionaryWord.wordCharacters}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}}]),e}(p["c"]);Object(f["a"])([Object(p["b"])()],Qt.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],Qt.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["d"])("word")],Qt.prototype,"wordChanged",null),Object(f["a"])([Object(p["d"])("dictionaryWord.revealed")],Qt.prototype,"dictionaryWordChanged",null),Object(f["a"])([Object(p["d"])("cardMode")],Qt.prototype,"cardModeChanged",null),Object(f["a"])([Object(p["d"])("isShowWordTranslation")],Qt.prototype,"eventShowWordTranslation",null),Qt=Object(f["a"])([Object(p["a"])({components:{SettingsBlock:Ot}})],Qt);var Zt=Qt,qt=Zt,Kt=Object(x["a"])(qt,Gt,Jt,!1,null,null,null),Xt=Kt.exports;p["c"].use(et.a);var te=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.lessonIsLoading=!0,t.next=3,this.$nextTick();case 3:return this.lessonComplete=!1,t.next=6,G.loadWords(O.state.currentLessonNumber);case 6:return this.wordsToLearn=[],G.words.forEach(function(t){return e.wordsToLearn.push(new Yt(t))}),t.next=10,O.dispatch("setWordsCount",this.wordsToLearn.length);case 10:this.setWordNumber(0),this.lessonIsLoading=!1,O.dispatch("loadRepeatWordsCount");case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){t!==O.state.dictionaryMode&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"setWordMemoryState",value:function(t){if(this.currentWordToLearn)if(this.rememberedWordsCount!==this.wordsCount){this.currentWordToLearn.remember=t,this.currentLesson.isAuthenticated&&this.currentWordToLearn.updateWordState((new Date).getTime()-this.lastWordShownTimestamp).then(function(){O.dispatch("loadRepeatWordsCount")}),t||this.currentWordToLearn.unrevealWord();for(var e=!1,n=this.currentWordNumber+1;n<this.wordsCount;n++)if(!0!==this.wordsToLearn[n].remember){this.setWordNumber(n),e=!0;break}if(!e){for(var r=0;r<this.wordsCount;r++)if(!0!==this.wordsToLearn[r].remember){this.setWordNumber(r),e=!0;break}e||(this.lessonComplete=!0)}}else this.lessonComplete=!0}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"error",get:function(){return G.errors.length?G.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"hintsShown",get:function(){var t=this.currentWordToLearn.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.currentWordToLearn.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.rememberedWordsCount}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}}]),e}(p["c"]);Object(f["a"])([Object(p["d"])("lessonComplete")],te.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["d"])("useFullscreen")],te.prototype,"useFullscreenToggle",null),te=Object(f["a"])([Object(p["a"])({components:{SelfCheckWordCard:Xt,DictionaryModeSetter:lt,WordCard:zt,RadialProgressBar:rt.a,BlankCard:X}})],te);var ee=te,ne=ee,re=Object(x["a"])(ne,At,Mt,!1,null,null,null),se=re.exports,oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.lessonComplete?t.lessonComplete?r("BlankCard",[t.wordsCount?r("h2",[t._v("Поздравляем! Все слова повторены.")]):r("h2",[t._v("На сегодня повторять нечего.")])]):t._e():[r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center filled",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("learn")}}},[r("img",{staticClass:"rotated",attrs:{src:n("d25c")}})]),r("span",{staticClass:"active"},[t._v("Проверяем")])])]),t.currentWordToLearn?r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("SelfCheckWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!0)}}},[r("img",{attrs:{src:n("e587")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Вспомнил":"Помню")+"\n            ")])]),r("button",{staticClass:"btn btn-info btn-nav btn-wide mx-2",attrs:{disabled:t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.currentWordToLearn.revealWord()}}},[r("img",{attrs:{src:n("f4a8")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("Ответ")])]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!1)}}},[r("img",{attrs:{src:n("7831")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Не вспомнил?":"Не помню")+"\n            ")])])])])]):t._e()]],2)},ae=[];p["c"].use(et.a);var ie=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.wordsToLearn=e,this.lessonIsLoading=!0,t.next=4,this.$nextTick();case 4:if(this.learntWordsCount!==this.wordsToLearn.length){t.next=8;break}this.lessonComplete=!0,t.next=17;break;case 8:this.lessonComplete=!1,n=0;case 10:if(!(n<this.wordsToLearn.length)){t.next=16;break}if(this.wordsToLearn[n].remember){t.next=13;break}return t.abrupt("break",16);case 13:n++,t.next=10;break;case 16:this.setWordNumber(n);case 17:return t.next=19,O.dispatch("setWordsCount",this.wordsToLearn.length);case 19:this.lessonIsLoading=!1;case 20:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){t!==O.state.dictionaryMode&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"setWordMemoryState",value:function(t){if(this.currentWordToLearn)if(this.rememberedWordsCount!==this.wordsCount){this.currentWordToLearn.remember=t,this.currentLesson.isAuthenticated&&this.currentWordToLearn.updateWordState((new Date).getTime()-this.lastWordShownTimestamp).then(function(){O.dispatch("loadRepeatWordsCount")}),t||this.currentWordToLearn.unrevealWord();for(var e=!1,n=this.currentWordNumber+1;n<this.wordsCount;n++)if(!0!==this.wordsToLearn[n].remember){this.setWordNumber(n),e=!0;break}if(!e){for(var r=0;r<this.wordsCount;r++)if(!0!==this.wordsToLearn[r].remember){this.setWordNumber(r),e=!0;break}e||(this.lessonComplete=!0)}}else this.lessonComplete=!0}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"error",get:function(){return G.errors.length?G.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"hintsShown",get:function(){var t=this.currentWordToLearn.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.currentWordToLearn.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.rememberedWordsCount}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}}]),e}(p["c"]);Object(f["a"])([Object(p["d"])("lessonComplete")],ie.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["d"])("useFullscreen")],ie.prototype,"useFullscreenToggle",null),ie=Object(f["a"])([Object(p["a"])({components:{SelfCheckWordCard:Xt,DictionaryModeSetter:lt,WordCard:zt,RadialProgressBar:rt.a,BlankCard:X}})],ie);var ce=ie,de=ce,le=Object(x["a"])(de,oe,ae,!1,null,null,null),ue=le.exports,he=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.loginWarnAccepted=!1,t.notEnoughMoney=!1,t.error=null,t.wordsToLearn=[],t}return Object(h["a"])(e,t),Object(d["a"])(e,[{key:"function",value:function(){this.initDictionary()}},{key:"lessonChanged",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$forceUpdate(),this.notEnoughMoney=!1,!this.currentLesson||!this.isCurrentLessonAdded){t.next=12;break}return t.next=5,this.$nextTick();case 5:return this.wordsToLearn=[],t.next=8,G.loadWords(O.state.currentLessonNumber);case 8:return G.words.forEach(function(t){return e.wordsToLearn.push(new Yt(t))}),t.next=11,this.$nextTick();case 11:this.initDictionary();case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"loadLessonWords",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.post("/dictionary/add-packets/",{packets:[O.state.currentLessonNumber],activate:!0});case 2:if(e=t.sent,e.data.errors.length&&this.isAuthenticated){t.next=10;break}return this.currentLesson.added=!0,t.next=7,this.$forceUpdate();case 7:this.initDictionary(),t.next=12;break;case 10:this.error=e.data.errors[0],this.$forceUpdate();case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initDictionary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:return t.next=4,this.$nextTick();case 4:"learn"===this.dictionaryMode?this.$refs.learnDictionary.initDictinonary(this.wordsToLearn):"repeat"===this.dictionaryMode?this.$refs.repeatDictionary.initDictinonary():"self-check"===this.dictionaryMode&&this.$refs.selfCheckDictionary.initDictinonary(this.wordsToLearn);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"unselectLesson",value:function(){O.dispatch("setCurrentLesson",null)}},{key:"isAppInitialized",get:function(){return O.state.isAppInitialized}},{key:"isAuthenticated",get:function(){return!!this.currentLesson&&this.currentLesson.isAuthenticated}},{key:"dictionaryMode",get:function(){return this.$store.state.dictionaryMode}},{key:"isCurrentLessonAdded",get:function(){return this.currentLesson&&(this.currentLesson.added||this.currentLesson.demo&&!_.isAuthenticated)}},{key:"currentLesson",get:function(){return O.state.currentLesson}}]),e}(p["c"]);Object(f["a"])([Object(p["d"])("dictionaryMode")],he.prototype,"function",null),Object(f["a"])([Object(p["d"])("currentLesson")],he.prototype,"lessonChanged",null),he=Object(f["a"])([Object(p["a"])({components:{SelfCheckWordsDictionary:ue,RepeatWordsDictionary:se,LearnWordsDictionary:Nt,BlankCard:X}})],he);var fe=he,pe=fe,ve=Object(x["a"])(pe,B,$,!1,null,null,null),me=ve.exports;s["default"].use(F["a"]);var be=new F["a"]({mode:"history",base:"/static/dictionary/",routes:[{path:"*",name:"main",component:me}]}),we=n("5f5b");function ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ye(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ge(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ge(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}s["default"].use(we["a"]),s["default"].config.productionTip=!1;var Te=document.querySelector("#app");new s["default"]({router:be,store:O,render:function(t){var e={props:ye({},Te.dataset)};return t(R,e)}}).$mount("#app")},d25c:function(t,e,n){t.exports=n.p+"img/next_step_white.2843dc7a.svg"},d9c4:function(t,e,n){t.exports=n.p+"img/next_step.962d8a45.svg"},e332:function(t,e,n){},e587:function(t,e,n){t.exports=n.p+"img/remember.32f75583.svg"},efaf:function(t,e,n){t.exports=n.p+"media/silence.2b5bb705.mp3"},f3d2:function(t,e,n){t.exports=n.p+"img/coffee.0da6ac32.svg"},f4a8:function(t,e,n){t.exports=n.p+"img/key.b0a8bc9f.svg"},f635:function(t,e,n){t.exports=n.p+"img/sound_off.941872bb.svg"}});