var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");var dt,$globalCheckbox,$selectStars,$table=$("#wordsTable"),style=getComputedStyle(document.body),checked_ids=[];
function showDeleted(a){a?dt.api().column(2).search("^True|False$",!0,!1).draw():dt.api().column(2).search("^False$",!0,!1).draw()}function emptyTable(a){$table.find("tbody").empty().html('<tr><td colspan="5" style="text-align:center">'+a+"</td></tr>")}
function errorLoading(){emptyTable('<div class="row"><div class="col-12"><h5 style="margin:1rem">\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u043e\u0432 :(</h5></div> </div>')}
function tableReloading(){$table.find("tbody").empty().html('<tr><td colspan="5" style="text-align:center"><div class="row"><div class="col-12"><h5 style="margin:1rem">\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0441\u043b\u043e\u0432\u0430...</h5></div><div class="col-12"><img src="/static/images/loading_icon.gif"></div></div></td></tr>')}
function updateTable(){var a=$("#filterWordsForm"),b=Urls["dictionary:my_words"]();$.ajax(b,{type:"POST",dataType:"json",data:a.serialize(),success:function(a){$table.html(a.table);void 0!==dt&&(dt.api().destroy(),$selectStars.remove());$table.DataTable({dom:"<'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-12'i><'col-sm-12 col-md-5'l><'col-sm-12 col-md-7'p>>",columnDefs:[{targets:0,render:function(a,b,c,g){"display"===b&&(a='<div class="checkbox"><input type="checkbox" class="dt-checkboxes"><label></label></div>');
return a},checkboxes:{selectRow:!0,selectAllRender:'<div class="checkbox"><input type="checkbox" class="dt-checkboxes"><label></label></div>'}}],select:"multi+shift",searching:!0,ordering:!1,paging:!0,pageLength:50,lengthMenu:[[50,100,250,500,-1],[50,100,250,500,"\u0412\u0441\u0435"]],language:{processing:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...",search:"\u041f\u043e\u0438\u0441\u043a:",lengthMenu:"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c: _MENU_",info:"\u0421\u043b\u043e\u0432\u0430 \u0441 _START_ \u0434\u043e _END_ \u0438\u0437 _TOTAL_",
infoEmpty:"\u0421\u043b\u043e\u0432\u0430 \u0441 0 \u0434\u043e 0 \u0438\u0437 0",infoFiltered:"(\u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u043d\u043e \u0438\u0437 _MAX_ \u0437\u0430\u043f\u0438\u0441\u0435\u0439)",infoPostFix:"",loadingRecords:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043b\u043e\u0432...",zeroRecords:"\u0421\u043b\u043e\u0432\u0430 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442.",emptyTable:"\u0412 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0434\u0430\u043d\u043d\u044b\u0435",
paginate:{first:"\u041f\u0435\u0440\u0432\u0430\u044f",previous:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",next:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f",last:"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f"},aria:{sortAscending:": \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",
sortDescending:": \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0441\u0442\u043e\u043b\u0431\u0446\u0430 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e"},select:{rows:{_:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0441\u043b\u043e\u0432: %d",0:"\u041a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u043f\u043e \u0441\u043b\u043e\u0432\u0443 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430",
1:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0441\u043b\u043e\u0432\u043e"}}},initComplete:function(){dt=this;this.api().columns(-1).every(function(){$(this.header()).empty();$(starFilterHtml).appendTo($(this.header())).selectpicker({noneSelectedText:"\u041e\u0446\u0435\u043d\u043a\u0430",header:"\u041e\u0446\u0435\u043d\u043a\u0430",selectedTextFormat:"count > 1"}).on("change",function(){var a=$(this).find(":selected").map(function(){return $(this).text()}).get().join("|");
""===a?dt.api().column(-1).search(a,!1,!0).draw():(a="^"+a+"$",dt.api().column(-1).search(a,!0,!1).draw())});$selectStars=$("#starFilter")});showDeleted($("#showDeleted")[0].checked);$("#showDeleted").on("change",function(a){a.preventDefault();showDeleted(this.checked)})}})},error:errorLoading,beforeSend:tableReloading});$(".undertable").show();$(".uppertable").show()}function get_selected(a){a=a.api().column(0).checkboxes.selected();var b=[];$.each(a,function(a,d){b.push(d)});return b}
$(document).ready(function(){$("#filterWordsForm").submit(function(a){a.preventDefault();updateTable()});$("#startApp").on("click",function(){$.ajax(Urls["dictionary:app"](),{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({words:get_selected(dt),csrfmiddlewaretoken:csrf}),error:errorLoading,success:function(a){window.location.href=Urls["dictionary:app"]()},beforeSend:emptyTable("")})});$("#markWords").on("click",function(){dt.api().column(0).checkboxes.selected();$.ajax(Urls["dictionary:mark_words"](),
{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({words:get_selected(dt),csrfmiddlewaretoken:csrf}),success:function(a){updateTable()},error:errorLoading,beforeSend:tableReloading})});$("#unmarkWords").on("click",function(){dt.api().column(0).checkboxes.selected();$.ajax(Urls["dictionary:unmark_words"](),{type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({words:get_selected(dt),csrfmiddlewaretoken:csrf}),success:function(a){updateTable()},
error:errorLoading,beforeSend:tableReloading})});$("#main-frm").on("submit",function(a){var b=this,c=dt.api().column(0).checkboxes.selected();$.each(c,function(a,c){$(b).append($("<input>").attr("type","hidden").attr("name","id[]").val(c))});a.preventDefault()})});
