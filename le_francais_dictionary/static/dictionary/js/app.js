(function(t){function e(e){for(var r,a,i=e[0],c=e[1],l=e[2],d=0,h=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},s={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static/dictionary/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"0164":function(t,e,n){t.exports=n.p+"img/learn.svg"},"18d4":function(t,e,n){t.exports=n.p+"img/pause.svg"},"21e7":function(t,e,n){t.exports=n.p+"img/previous.svg"},"35fe":function(t,e,n){t.exports=n.p+"img/next.svg"},"53e0":function(t,e,n){t.exports=n.p+"img/play.svg"},"5c0b":function(t,e,n){"use strict";var r=n("e332"),s=n.n(r);s.a},"75a3":function(t,e,n){t.exports=n.p+"img/repeat.svg"},7720:function(t,e,n){t.exports=n.p+"img/heart.svg"},7831:function(t,e,n){t.exports=n.p+"img/dont_remember.svg"},8462:function(t,e,n){t.exports=n.p+"img/heart-arrow.svg"},"8a17":function(t,e,n){t.exports=n.p+"img/pause_time.svg"},"9ff2":function(t,e,n){t.exports=n.p+"img/keyhole.svg"},a306:function(t,e,n){t.exports=n.p+"img/btn-add-words.svg"},b263:function(t,e,n){t.exports=n.p+"img/full_screen.svg"},bcb3:function(t,e,n){t.exports=n.p+"img/sound_on.svg"},c8fa:function(t,e,n){t.exports=n.p+"img/menu.svg"},cd49:function(t,e,n){"use strict";n.r(e);n("8e6e"),n("ac6a"),n("456d");var r=n("bd86"),s=(n("14c6"),n("08c1"),n("4842"),n("d9fc"),n("2b0e")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"dict-app"}},[t.packetPk?t._e():n("h1",[t._v("Номер пакета не установлен.")]),t.isDevEnv?n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row mt-1"},[n("div",{staticClass:"col-12 col-md-3 col-lg-3"},[t._v(" ")]),n("div",{staticClass:"col-12 col-md-9 col-lg-6 mb-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[t._e(),n("router-view")],1)])]),n("div",{staticClass:"col-12 col-lg-3"},[t._v(" ")])])]):n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[t._e(),n("router-view")],1)])])},a=[],i=(n("96cf"),n("3b8d")),c=n("d225"),l=n("b0b4"),u=n("308d"),d=n("6bb5"),h=n("4e2b"),f=n("9ab4"),p=n("60a3"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.lessonsLoaded?t._e():r("div",{staticClass:"my-4 text-center"},[r("b-spinner",{attrs:{label:"Loading...",width:"24",variant:"dark"}})],1),t.isUserAuthenticated?r("div",{staticClass:"mb-3",attrs:{id:"lessons-list"}},[r("button",{staticClass:"btn-info btn-show-lessons",class:{show:t.showLessonList},on:{click:t.toggleShowLessonList}},[r("span",{staticClass:"mr-2"},[t._v("\n            "+t._s(t.lesson?t.lesson.name:"Выберите урок")+"\n        ")]),t.showLessonList?r("i",{staticClass:"lni-chevron-up"}):r("i",{staticClass:"lni-chevron-down"})]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showLessonList,expression:"showLessonList"}],staticClass:"lessons-dropdown"},[r("div",t._l(t.lessons,function(e){return r("a",{staticClass:"btn-lesson d-inline-flex d-xl-flex d-lg-inline-flex mb-2",class:{active:e.pk===t.lessonNumber,activated:e.activated||t.isDemoUserAllowed(e),added:e.added||t.isDemoUserAllowed(e),learned:e.wordsLearned&&e.wordsLearned>=e.wordsCount},attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.setLesson(e)}}},[r("span",[t._v(t._s(e.name))]),e.wordsLearned&&e.wordsLearned>=e.wordsCount?r("img",{attrs:{src:n("8462"),width:"26"}}):e.added||t.isDemoUserAllowed(e)?r("img",{attrs:{src:n("7720"),width:"22"}}):e.activated||t.isDemoUserAllowed(e)?r("img",{attrs:{src:n("a306"),width:"24"}}):r("img",{attrs:{src:n("f3d2"),width:"22"}})])}),0)])]):t._e()])},v=[],b=n("6fc5"),g=n("2f62"),y=n("bc3a"),w=n.n(y),C={baseURL:"/",withCredentials:!0};var T=w.a.create(C);var k=T;s["default"].use(g["a"]);var W={state:{currentLesson:null,currentLessonNumber:0,slideTimerInterval:1,wordNumber:0,wordsCount:0,wordChangeInterval:1,useFullscreen:!1,isAppInitialized:!1,showWordTranslation:!1,isDevEnv:!1,dictionaryMode:"learn",repeatWordsCount:0},mutations:{SET_CURRENT_LESSON:function(t,e){t.currentLesson=e,t.currentLessonNumber=e?e.pk:0},SET_TIMER_INTERVAL:function(t,e){t.slideTimerInterval=e},SET_WORD_CHANGE_INTERVAL:function(t,e){t.wordChangeInterval=e},SET_WORD_NUMBER:function(t,e){t.wordNumber=e},SET_WORDS_COUNT:function(t,e){t.wordsCount=e},SET_FULLSCREEN_MODE:function(t,e){t.useFullscreen=e},SET_SHOW_WORD_TRANSLATION:function(t,e){t.showWordTranslation=e},SET_IS_APP_INITIALIZED:function(t,e){t.isAppInitialized=e},SET_DICTIONARY_MODE:function(t,e){t.dictionaryMode=e},SET_REPEAT_WORDS_COUNT:function(t,e){t.repeatWordsCount=e}},actions:{setCurrentLesson:function(t,e){var n=t.commit;n("SET_CURRENT_LESSON",e)},setSlideTimerInterval:function(t,e){var n=t.commit;e>5&&(e=1),n("SET_TIMER_INTERVAL",e)},setWordChangeInterval:function(t,e){var n=t.commit;e>5&&(e=1),n("SET_WORD_CHANGE_INTERVAL",e)},setWordNumber:function(t,e){(e>=t.state.wordsCount||e<0)&&(e=0),t.commit("SET_WORD_NUMBER",e)},setWordsCount:function(t,e){var n=t.commit;n("SET_WORDS_COUNT",e)},setFullscreenMode:function(t,e){var n=t.commit;n("SET_FULLSCREEN_MODE",e)},showWordTranslation:function(t,e){var n=t.commit;n("SET_SHOW_WORD_TRANSLATION",e)},setIsAppInitialized:function(t,e){var n=t.commit;n("SET_IS_APP_INITIALIZED",e)},setLessonByPk:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,t.next=3,k.get("/dictionary/progress/"+n+"/");case 3:return r=t.sent,t.next=6,this.dispatch("setCurrentLesson",r.data);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),setDictionaryMode:function(t,e){var n=t.commit;n("SET_DICTIONARY_MODE",e)},loadRepeatWordsCount:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,k.get("/dictionary/repeat-words/count/");case 3:r=t.sent,n("SET_REPEAT_WORDS_COUNT",r.data.count);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}},O=new g["a"].Store(W),L=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.lessons=[],t.isAuthenticated=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setProgress",value:function(t){this.lessons=t.packets,this.isAuthenticated=t.isAuthenticated}},{key:"loadLessons",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.get("/dictionary/progress");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],L.prototype,"setProgress",null),Object(f["a"])([Object(b["a"])({commit:"setProgress"})],L.prototype,"loadLessons",null),L=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"LessonsModule",store:O,dynamic:!0})],L);var _=Object(b["e"])(L),S=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.lessonsLoaded=!1,t.showLessonList=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"toggleShowLessonList",value:function(){this.showLessonList=!this.showLessonList}},{key:"isDemoUserAllowed",value:function(t){return t.demo&&!_.isAuthenticated}},{key:"setLesson",value:function(t){this.showLessonList=!1,O.dispatch("setCurrentLesson",t)}},{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_.loadLessons();case 2:return t.next=4,O.dispatch("setIsAppInitialized",!0);case 4:return t.next=6,this.$nextTick();case 6:this.isUserAuthenticated||(e=/\/lecon-(\d+)\//gm,n=e.exec(window.location.href),null!==n?(r=_.lessons[parseInt(n[1],10)-1],r&&this.setLesson(r)):this.setLesson(_.lessons[0])),this.lessonsLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"lessons",get:function(){return _.lessons}},{key:"isUserAuthenticated",get:function(){return _.isAuthenticated}},{key:"lesson",get:function(){return O.state.currentLesson}},{key:"lessonNumber",get:function(){return O.state.currentLessonNumber}}]),e}(p["d"]);S=Object(f["a"])([Object(p["a"])({})],S);var j=S,x=j,E=n("2877"),P=Object(E["a"])(x,m,v,!1,null,null,null),D=P.exports,R=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"mounted",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.packetPk){t.next=2;break}return t.abrupt("return");case 2:return O.dispatch("setDictionaryMode",this.mode||"learn"),t.next=5,O.dispatch("setLessonByPk",parseInt(this.packetPk,10));case 5:O.dispatch("loadRepeatWordsCount"),O.dispatch("setIsAppInitialized",!0);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"isDevEnv",get:function(){return O.state.isDevEnv}}]),e}(p["d"]);Object(f["a"])([Object(p["b"])(String)],R.prototype,"packetPk",void 0),Object(f["a"])([Object(p["b"])(String)],R.prototype,"mode",void 0),R=Object(f["a"])([Object(p["a"])({components:{LessonList:D}})],R);var A=R,I=A,N=(n("5c0b"),Object(E["a"])(I,o,a,!1,null,null,null)),M=N.exports,B=n("8c4f"),F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isAppInitialized,expression:"isAppInitialized"}]},[t.error?n("BlankCard",[n("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.wordsAreLoading?n("BlankCard",[n("h2",[t._v("Загружаем слова...")]),n("div",{staticClass:"text-center page-loading mt-4"},[n("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.isAuthenticated||t.loginWarnAccepted?t.isAuthenticated&&!t.currentLesson?n("BlankCard",[n("h2",{staticClass:"text-center"},[t._v("Выберите урок в меню выше.")])]):t.currentLesson?n("div",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated||t.loginWarnAccepted,expression:"isAuthenticated || loginWarnAccepted"}]},[t.isCurrentLessonAdded?["learn"===t.dictionaryMode?n("LearnWordsDictionary",{ref:"learnDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):"repeat"===t.dictionaryMode?n("RepeatWordsDictionary",{ref:"repeatDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):"self-check"===t.dictionaryMode?n("SelfCheckWordsDictionary",{ref:"selfCheckDictionary",attrs:{"words-to-learn":t.wordsToLearn}}):"verbs"===t.dictionaryMode?n("VerbsDictionary",{ref:"verbsDictionary"}):n("BlankCard",[n("h2",{staticClass:"text-center"},[t._v("Неизвестный режим словарика.")])])]:n("BlankCard",[n("h2",{staticClass:"text-center mb-5"},[t._v("\n        Загрузить слова "+t._s(t.currentLesson.lessonNumber)+" урока в ваш профиль для изучения?\n      ")]),n("div",{staticClass:"text-center fullwidth"},[n("button",{staticClass:"btn btn btn-info btn-nav mx-2 mb-2",attrs:{type:"button"},on:{click:t.addLessonPack}},[t._v("\n          ОК\n        ")]),n("button",{staticClass:"btn btn-info btn-nav mx-2 mb-2",attrs:{type:"button"},on:{click:t.unselectLesson}},[t._v("Отмена\n        ")])])])],2):t._e():n("BlankCard",[n("p",{staticClass:"text-center"},[t._v("\n      Незарегистрированным пользователям доступна только демо-версия словарика.\n      Войдите на сайт под своим именем, чтобы использовать метод интервального повторения слов.\n    ")]),n("button",{staticClass:"btn-info btn-card-button mt-4",on:{click:function(e){t.loginWarnAccepted=!0,t.initDictionary()}}},[t._v("Понятно")])])],1)},U=[],G=(n("7514"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.askForWordBan?r("BlankCard",[r("h2",{staticClass:"text-center"},[t._v("\n      Навсегда убрать «"+t._s(t.currentWordToLearn.word.name)+"» из списка для изучения?\n    ")]),r("div",{staticClass:"text-center mt-4"},[r("button",{staticClass:"btn-info btn-card-button mr-2",attrs:{type:"button"},on:{click:t.banWord}},[t._v("\n        Да, я уже знаю\n        "+t._s("phrase"===t.currentWordToLearn.word.partOfSpeech?"эту фразу":"это слово")+".\n      ")]),r("button",{staticClass:"btn-info btn-card-button ml-2",attrs:{type:"button"},on:{click:t.cancelWordBan}},[t._v("\n        Нет, я передумал!\n      ")])])]):t.tooEarlySelfCheckMessage?r("fullscreen",[r("BlankCard",[r("div",{staticClass:"px-3 py-2 px-sm-3 py-sm-5"},[r("p",{staticClass:"mb-5"},[t._v("Вы пытаетесь проверить знание слов, которые перед этим не прослушали.\n        Низкие оценки при проверке приведут к более частым повторениям и бóльшему их числу.")]),r("div",{staticClass:"d-flex flex-column flex-sm-row justify-content-between w-100"},[r("button",{staticClass:"btn btn-info mb-2 mb-sm-0 mr-sm-auto",on:{click:function(e){return t.tooEarlySelfCheckContinue(!1)}}},[t._v("Ой, верните, как было!\n          ")]),r("button",{staticClass:"btn btn-info",on:{click:function(e){return t.tooEarlySelfCheckContinue(!0)}}},[t._v("Хочу продолжить\n          ")])])])])],1):!1===t.lessonComplete?[t.wordsCount?r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",{staticClass:"active"},[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center",class:{filled:t.learntWordsCount===t.wordsCount,learnt:t.isLessonLearnt},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("self-check")}}},[r("radial-progress-bar",{attrs:{"completed-steps":t.learntWordsCount,diameter:66,"total-steps":t.wordsCount,"start-color":"#1972bc","stop-color":"#1972bc"}},[r("div",[r("img",{attrs:{src:n("d9c4")}}),r("img",{attrs:{src:n("d25c")}})])])],1),r("span",[t._v("Проверяем")])])]):t._e(),r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("LearnWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center mb-2"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordNumber(t.currentWordNumber-1)},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("21e7")}})]),r("button",{staticClass:"btn btn-info btn-nav btn-narrow mx-4",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.askForBan()}}},[r("img",{attrs:{src:n("7831")}})]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.showWordTranslation()},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("35fe")}})])])]),r("div",{staticClass:"row",attrs:{id:"my-words-link-row"}},[r("div",{staticClass:"col text-center text-sm-left"},[r("div",{staticClass:"d-inline-block",attrs:{id:"my-words-popover-wrapper"}},[r("b-button",{staticClass:"my-words-button px-0 py-0",attrs:{variant:"link",id:"my-words-link",disabled:0===t.currentLesson.wordsChecked||!t.currentLesson.isAuthenticated,href:"/dictionary/my-words/?lesson_pk="+t.currentLesson.pk}},[t._v("Открыть эти карточки в «Моих словах»")])],1),t.currentLesson.isAuthenticated?t._e():r("div",{staticClass:"d-inline-block mr-sm-auto"},[r("span",{staticClass:"mr-4"},[r("span",{staticClass:"d-none d-sm-inline"},[t._v(" ← доступно после "),r("b-link",{attrs:{href:"/accounts/login/?next="+this.$router.currentRoute.path+"#flash-cards"}},[t._v("регистрации")])],1),r("span",{staticClass:"d-inline d-sm-none"},[t._v("(доступно после "),r("b-link",{attrs:{href:"/accounts/login/?next="+this.$router.currentRoute.path+"#flash-cards"}},[t._v("регистрации")]),t._v(")")],1)])]),r("b-popover",{attrs:{target:"my-words-popover-wrapper",disabled:t.currentLesson.wordsChecked>0||!t.currentLesson.isAuthenticated,triggers:"hover focus",html:"true",content:t.myWordsLinkPopoverContent,container:"#my-words-link-row",placement:"top"}})],1)])])]:t.lessonComplete?r("BlankCard",[r("h2",[t._v("Поздравляем! Все слова выучены!")])]):t._e()],2)}),$=[],V=n("1e5c"),H=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.translateTimerInterval=1,t.soundEnabled=!0,t.translationDirection="fr-ru",t.translationType="original",t.translationDisabled=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"SET_SOUND_ENABLED",value:function(t){this.soundEnabled=t}},{key:"SET_TRANSLATION_DIRECTION",value:function(t){this.translationDirection=t}},{key:"SET_TRANSLATE_TIMER_INTERVAL",value:function(t){this.translateTimerInterval=t>5?1:t}},{key:"SET_TRANSLATION_TYPE",value:function(t){this.translationType=t}},{key:"SET_TRANSLATION_DISABLED",value:function(t){this.translationDisabled=t}},{key:"setSoundEnabled",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslateTimerInterval",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslationDirection",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslationType",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setTranslationDisabled",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],H.prototype,"SET_SOUND_ENABLED",null),Object(f["a"])([b["c"]],H.prototype,"SET_TRANSLATION_DIRECTION",null),Object(f["a"])([b["c"]],H.prototype,"SET_TRANSLATE_TIMER_INTERVAL",null),Object(f["a"])([b["c"]],H.prototype,"SET_TRANSLATION_TYPE",null),Object(f["a"])([b["c"]],H.prototype,"SET_TRANSLATION_DISABLED",null),Object(f["a"])([Object(b["a"])({commit:"SET_SOUND_ENABLED"})],H.prototype,"setSoundEnabled",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATE_TIMER_INTERVAL"})],H.prototype,"setTranslateTimerInterval",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATION_DIRECTION"})],H.prototype,"setTranslationDirection",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATION_TYPE"})],H.prototype,"setTranslationType",null),Object(f["a"])([Object(b["a"])({commit:"SET_TRANSLATION_DISABLED"})],H.prototype,"setTranslationDisabled",null),H=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"SettingsModule",store:O,dynamic:!0})],H);var z=Object(b["e"])(H),Y=function(){function t(e){var r=this;Object(c["a"])(this,t),this.originalWord="",this.originalTranslation="",this.gender="m",this.partOfSpeech="",this.plural=!1,this.pk=0,this.banned=!1,this.unifiedWord="",this.unifiedTranslation="",this.unifiedWordPollyUrl="",this.unifiedTranslationPollyUrl="",e&&(this.originalWord=e.word,this.gender=e.gender,this.partOfSpeech=e.partOfSpeech,this.plural=e.plural,this.pk=e.pk,this.originalTranslation=e.translations&&e.translations[0]?e.translations[0].translation:"",this.unifiedWord=e.unifiedWord,this.unifiedTranslation=e.unifiedTranslation,this.unifiedWordPollyUrl=e.unifiedWordPollyUrl,this.unifiedTranslationPollyUrl=e.unifiedTranslationPollyUrl,this.loadSingleSound(e.unifiedWordPollyUrl?e.unifiedWordPollyUrl:n("efaf")).then(function(t){return r.soundOfUnifiedWord=t}),this.loadSingleSound(e.unifiedTranslationPollyUrl?e.unifiedTranslationPollyUrl:n("efaf")).then(function(t){return r.soundOfUnifiedTranslation=t}),this.loadSingleSound(e.pollyUrl?e.pollyUrl:n("efaf")).then(function(t){return r.soundOfOriginalWord=t}),this.loadSingleSound(e.translations&&e.translations[0]?e.translations[0].pollyUrl:n("efaf")).then(function(t){r.soundOfOriginalTranslation=t}))}return Object(l["a"])(t,[{key:"loadSingleSound",value:function(t){var e=new V["Howl"]({src:[n("efaf")],loop:!1});return t?new Promise(function(n,r){var s=new V["Howl"]({src:[t],preload:!0,loop:!1,buffer:!0,html5:!1,onload:function(){return n(s)},onloaderror:function(){n(e)}})}):new Promise(function(t){t(e)})}},{key:"isReady",get:function(){return"undefined"!==typeof this.soundOfWord&&"loaded"===this.soundOfWord.state()&&"undefined"!==typeof this.soundOfTranslation&&"loaded"===this.soundOfTranslation.state()}},{key:"name",get:function(){return"original"!==z.translationType&&this.unifiedWord?this.unifiedWord:this.originalWord}},{key:"translation",get:function(){return"original"!==z.translationType&&this.unifiedTranslation?this.unifiedTranslation:this.originalTranslation}},{key:"soundOfWord",get:function(){return"original"!==z.translationType&&this.unifiedWord?this.soundOfUnifiedWord:this.soundOfOriginalWord}},{key:"soundOfTranslation",get:function(){return z.translationDisabled?new V["Howl"]({src:[n("efaf")],loop:!1}):"original"!==z.translationType&&this.unifiedTranslation?this.soundOfUnifiedTranslation:this.soundOfOriginalTranslation}}]),t}(),Q=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.words=[],t.errors=[],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"SET_WORDS_DATA",value:function(t){this.words=t.words.map(function(t){return new Y(t)}),this.errors=t.errors}},{key:"SET_ERRORS",value:function(t){this.errors=t}},{key:"loadWords",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="repeat"===O.state.dictionaryMode?"/dictionary/repeat-words/":"/dictionary/words/"+e+"/",t.next=3,k.get(n);case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setErrors",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],Q.prototype,"SET_WORDS_DATA",null),Object(f["a"])([b["c"]],Q.prototype,"SET_ERRORS",null),Object(f["a"])([Object(b["a"])({commit:"SET_WORDS_DATA"})],Q.prototype,"loadWords",null),Object(f["a"])([Object(b["a"])({commit:"SET_ERRORS"})],Q.prototype,"setErrors",null),Q=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"WordsModule",store:O,dynamic:!0})],Q);var q=Object(b["e"])(Q),J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blank-card"},[t._m(0),n("div",{staticClass:"word-card"},[t._t("default")],2)])},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col next-step-block"})])}],Z=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),e}(p["d"]),X=Z,tt=Object(E["a"])(X,J,K,!1,null,null,null),et=tt.exports,nt=n("03cd"),rt=n.n(nt),st=n("531a"),ot=n.n(st),at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex justify-content-center text-center"},[r("div",{staticClass:"mode-icon",class:{active:"learn"===t.dictionaryMode||"self-check"===t.dictionaryMode},on:{click:function(e){return t.setDictionaryMode("learn")}}},[r("img",{attrs:{src:n("0164"),alt:"Учить слова"}}),r("p",[t._v("Учить")]),r("span")])]),r("div",{staticClass:"col d-flex justify-content-center text-center"},[r("div",{staticClass:"mode-icon",class:{active:"repeat"===t.dictionaryMode},on:{click:function(e){return t.setDictionaryMode("repeat")}}},[r("img",{attrs:{src:n("75a3"),alt:"Повторять слова"}}),t.repeatWordsCount?r("b",{staticClass:"repeat-words-counter"},[t._v(t._s(t.repeatWordsCount))]):t._e(),r("p",[t._v("Повторять")]),r("span")])])])},it=[],ct=function(t){function e(){return Object(c["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setDictionaryMode",value:function(t){O.dispatch("setDictionaryMode",t)}},{key:"dictionaryMode",get:function(){return O.state.dictionaryMode}},{key:"repeatWordsCount",get:function(){return O.state.repeatWordsCount}}]),e}(p["d"]);ct=Object(f["a"])([Object(p["a"])({})],ct);var lt=ct,ut=lt,dt=Object(E["a"])(ut,at,it,!1,null,"f56ca38e",null),ht=dt.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("div",{staticClass:"dummy-row"},[t._v(" ")]),r("span",{staticClass:"word-card-phrase"},[t._v("\n    "+t._s(t.wordLabel)+"\n  ")]),t.translateTimerEnabled?t._e():r("span",{staticClass:"play-button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("53e0")}})]),t.translateTimerEnabled?r("span",{staticClass:"pause-button invis",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("18d4")}})]):t._e(),r("div",{staticClass:"word-card-phrase",class:{invisible:!t.showTranslation}},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("div",{staticClass:"info-row"},[r("SettingsBlock",{attrs:{translateTimerSecondsPassed:t.translateTimerSecondsPassed,"show-timer-settings":!0}})],1)]):t._e()},pt=[],mt=(n("7f7f"),n("66d4")),vt=n.n(mt),bt=n("1157"),gt=n.n(bt),yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-row",attrs:{id:"settings-"+t.id}},[r("div",{staticClass:"timer-block ml-4"},[r("div",{staticClass:"d-flex align-items-center"},[t.showTimerSettings?r("a",{staticClass:"invis mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.changeTranslateTimerInterval(e)}}},[r("img",{attrs:{height:"20",src:n("8a17")}})]):t._e(),t._l(t.dotsCount,function(e){return r("span",{staticClass:"timer-dot mr-1",class:t.dotClass(e)})})],2)]),r("div",{staticClass:"settings-block mr-4"},[r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleSoundEnabled(e)}}},[t.soundEnabled?r("img",{attrs:{height:"20",src:n("bcb3")}}):t._e(),t.soundEnabled?t._e():r("img",{staticClass:"play-sound-off",attrs:{height:"20",src:n("f635")}})]),r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleFullscreen(e)}}},[r("img",{attrs:{height:"20",src:n("b263")}})]),r("a",{staticClass:"invis",class:{visible:t.settingsPopoverOpened},attrs:{href:"#",id:"settings-popover-button"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{height:"20",src:n("c8fa")}}),r("b-popover",{attrs:{container:"settings-"+t.id,"custom-class":"settings-popover",placement:"top",target:"settings-popover-button",triggers:"click blur"},on:{hidden:function(e){return t.settingsPopoverToggle(!1)},shown:function(e){return t.settingsPopoverToggle(!0)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Настройки")]},proxy:!0}])},[r("p",[r("label",{attrs:{for:"select-translation-direction"}},[t._v("Направление перевода:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-translation-direction"},domProps:{value:t.translationDirection},on:{change:t.setTranslationDirection}},[r("option",{attrs:{value:"fr-ru"}},[t._v("Французский → русский")]),r("option",{attrs:{value:"ru-fr"}},[t._v("Русский → французский")])])]),r("p",[r("label",{attrs:{for:"select-timer-interval"}},[t._v("Задержка после показа слова (с):")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-timer-interval"},domProps:{value:t.translateTimerInterval},on:{change:t.setTranslateTimerInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)]),r("p",[r("label",{attrs:{for:"select-change-interval"}},[t._v("Задержка после показа перевода (с):")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-change-interval"},domProps:{value:t.wordChangeInterval},on:{change:t.setWordChangeInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)]),r("span",[t._v("Варианты перевода "),r("span",{attrs:{id:"unifiedInfo"}},[t._v("ℹ")]),t._v(":")]),r("br"),r("b-popover",{attrs:{target:"unifiedInfo",container:"settings-"+t.id,content:"Многие слова попадали в конспекты повторно, иногда в каком-то частном значении. Для таких слов в карточках хранится два варианта перевода — как оно давалось на уроке, и его обобщенные значения, взятые из словаря.",title:"",triggers:"hover focus"}}),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{id:"translate-type-radio-original",type:"radio",name:"radio-translation-type",value:"original"},domProps:{checked:"original"===t.translationType},on:{change:t.setTranslationType}}),r("label",{staticClass:"custom-control-label",attrs:{for:"translate-type-radio-original"}},[t._v(" Как на уроке")])]),r("div",{staticClass:"custom-control custom-radio mb-2"},[r("input",{staticClass:"custom-control-input",attrs:{id:"translate-type-radio-unified",type:"radio",name:"radio-translation-type",value:"unified"},domProps:{checked:"unified"===t.translationType},on:{change:t.setTranslationType}}),r("label",{staticClass:"custom-control-label",attrs:{for:"translate-type-radio-unified"}},[t._v(" Обобщённый")])]),r("p",[r("input",{attrs:{id:"checkbox-disable-transaltion",name:"disable-translation",type:"checkbox"},domProps:{checked:t.translationDisabled},on:{change:t.setDisableTranslation}}),r("label",{attrs:{for:"checkbox-disable-transaltion"}},[t._v(" Не озвучивать перевод")])])],1)],1)])])},wt=[],Ct=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.settingsPopoverOpened=!1,t.id=Math.floor(1e5*Math.random()),t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setDisableTranslation",value:function(){z.setTranslationDisabled(!z.translationDisabled)}},{key:"setTranslationDirection",value:function(t){z.setTranslationDirection(t.target.value)}},{key:"setWordChangeInterval",value:function(t){O.dispatch("setWordChangeInterval",parseInt(t.target.value,10))}},{key:"toggleSoundEnabled",value:function(){z.setSoundEnabled(!z.soundEnabled)}},{key:"setTranslateTimerInterval",value:function(t){z.setTranslateTimerInterval(parseInt(t.target.value,10))}},{key:"changeTranslateTimerInterval",value:function(){z.setTranslateTimerInterval(z.translateTimerInterval+1)}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"setTranslationType",value:function(t){z.setTranslationType(t.target.value)}},{key:"dotClass",value:function(t){var e="";return(t<=this.translateTimerSecondsPassed||this.isPassedAllDots)&&(e+="passed"),t<=5?e+=" green":t<=10?e+=" yellow":t<=20&&(e+=" red"),e}},{key:"settingsPopoverToggle",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.settingsPopoverOpened=t}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"translationDirection",get:function(){return z.translationDirection}},{key:"translateTimerInterval",get:function(){return z.translateTimerInterval}},{key:"soundEnabled",get:function(){return z.soundEnabled}},{key:"translationDisabled",get:function(){return z.translationDisabled}},{key:"translationType",get:function(){return z.translationType}},{key:"dotsCount",get:function(){return this.coloredDotsEnabled?20:this.translateTimerInterval}}]),e}(p["d"]);Object(f["a"])([Object(p["b"])()],Ct.prototype,"translateTimerSecondsPassed",void 0),Object(f["a"])([Object(p["b"])()],Ct.prototype,"showTimerSettings",void 0),Object(f["a"])([Object(p["c"])("passedAllDots",{type:Boolean,default:!1})],Ct.prototype,"isPassedAllDots",void 0),Object(f["a"])([Object(p["c"])("coloredDots",{type:Boolean,default:!1})],Ct.prototype,"coloredDotsEnabled",void 0),Ct=Object(f["a"])([p["a"]],Ct);var Tt=Ct,kt=Tt,Wt=Object(E["a"])(kt,yt,wt,!1,null,null,null),Ot=Wt.exports,Lt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.translateTimerEnabled=!1,t.translateTimerSecondsPassed=0,t.showTranslation=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"wordChanged",value:function(){"learn"===this.dictionaryMode&&this.word&&(this.timer.stop(),this.changeWordTimer.stop(),this.showTranslation=!1,this.translateTimerSecondsPassed=0,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),this.word.soundOfWord&&this.word.soundOfWord.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0),this.translateTimerEnabled&&this.toggleTimer(!0))}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,n){if(z.soundEnabled&&!t.soundOfWordPlayed){var r=t.word.soundOfWord;r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play())}else e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){if(z.soundEnabled&&!t.soundOfTranslationPlayed){var r=t.word.soundOfTranslation;t.word.soundOfWord.pause(),r&&(r.once("end",function(){t.soundOfTranslationPlayed=!0,e()}),r.play())}else e()})}},{key:"showWordTranslation",value:function(){var t=this;if(this.showTranslation||!this.translateTimerEnabled)return this.word.soundOfWord.stop(),this.word.soundOfTranslation.stop(),void O.dispatch("setWordNumber",O.state.wordNumber+1);this.showTranslation=!0,this.translateTimerSecondsPassed=z.translateTimerInterval,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.timer.stop(),this.changeWordTimer.stop(),this.soundOfTranslationPlayed=!1,this.playSound(!0).then(function(){t.changeWordTimer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:O.state.wordChangeInterval}}),t.translateTimerEnabled||t.changeWordTimer.pause()})}},{key:"beforeTimerStarted",value:function(){return z.soundEnabled?this.playSound():new Promise(function(t){return t()})}},{key:"playSound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.word.soundOfWord.stop(),this.word.soundOfTranslation.stop(),"learn"!==this.dictionaryMode?new Promise(function(t){t()}):t?"fr-ru"===z.translationDirection?this.playSoundOfTranslation():this.playSoundOfWord():"fr-ru"===z.translationDirection?this.playSoundOfWord():this.playSoundOfTranslation()}},{key:"changeWord",value:function(){this.translateTimerEnabled&&"learn"===this.dictionaryMode&&(this.word.soundOfWord&&this.word.soundOfWord.stop(),this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),O.dispatch("setWordNumber",O.state.wordNumber+1))}},{key:"eventShowWordTranslation",value:function(t){"learn"===this.dictionaryMode&&t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"toggleTimer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.translateTimerEnabled=e||!this.translateTimerEnabled,!this.translateTimerEnabled)return this.timer.isRunning()&&this.timer.pause(),void(this.changeWordTimer.isRunning()&&this.changeWordTimer.pause());this.changeWordTimer.isPaused()?this.changeWordTimer.start():this.timer.isPaused()?this.timer.start():this.beforeTimerStarted().then(function(){t.translateTimerEnabled&&(t.translateTimerSecondsPassed=0,t.timer.start({precision:"seconds",startValues:{seconds:t.translateTimerSecondsPassed},target:{seconds:z.translateTimerInterval}}))})}},{key:"dictionaryModeChanged",value:function(t){"learn"!==t&&(this.timer.stop(),this.changeWordTimer.stop())}},{key:"beforeDestroy",value:function(){this.timer.stop(),this.changeWordTimer.stop()}},{key:"initWordCard",value:function(){var t=this,e=O.state.currentLesson;this.timer=new vt.a,this.timer.addEventListener("secondsUpdated",function(e){if("learn"!==t.dictionaryMode)return t.timer.stop();t.translateTimerSecondsPassed++}),this.timer.addEventListener("started",function(e){t.translateTimerEnabled=!0}),this.timer.addEventListener("targetAchieved",function(e){t.translateTimerEnabled&&"learn"===t.dictionaryMode&&t.showWordTranslation()}),this.changeWordTimer=new vt.a,this.changeWordTimer.addEventListener("started",function(e){if(!t.showTranslation||"learn"!==t.dictionaryMode)return t.changeWordTimer.stop()}),this.changeWordTimer.addEventListener("targetAchieved",function(n){e===O.state.currentLesson&&"learn"===t.dictionaryMode&&(t.changeWordTimer.stop(),t.changeWord())}),this.lastFadeoutAnimationStarted=Date.now(),gt()(".word-card").off("mousemove"),gt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=gt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),document.body.addEventListener("keydown",function(e){32===e.keyCode&&t.toggleTimer()}),this.$store.subscribe(function(e,n){"SET_DICTIONARY_MODE"===e.type&&"learn"!==e.payload&&(t.timer.stop(),t.changeWordTimer.stop())}),this.wordChanged()}},{key:"mounted",value:function(){this.initWordCard()}},{key:"word",get:function(){return this.dictionaryWord?this.dictionaryWord.word:new Y(null)}},{key:"wordSexClass",get:function(){return{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return"ru-fr"===z.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return"ru-fr"===z.translationDirection?this.word.name:this.word.translation}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}},{key:"dictionaryMode",get:function(){return O.state.dictionaryMode}}]),e}(p["d"]);Object(f["a"])([Object(p["b"])()],Lt.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],Lt.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["e"])("word")],Lt.prototype,"wordChanged",null),Object(f["a"])([Object(p["e"])("isShowWordTranslation")],Lt.prototype,"eventShowWordTranslation",null),Object(f["a"])([Object(p["e"])("dictionaryMode")],Lt.prototype,"dictionaryModeChanged",null),Lt=Object(f["a"])([Object(p["a"])({components:{SettingsBlock:Ot}})],Lt);var _t=Lt,St=_t,jt=Object(E["a"])(St,ft,pt,!1,null,null,null),xt=jt.exports;p["d"].use(rt.a);var Et=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!0,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t.tooEarlySelfCheckMessage=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.wordsToLearn=e,this.lessonIsLoading=!0,t.next=4,this.$nextTick();case 4:return this.lessonComplete=!1,t.next=7,O.dispatch("setWordsCount",this.wordsToLearn.length);case 7:this.setWordNumber(0),this.lessonIsLoading=!1,O.state.isDevEnv;case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t!==O.state.dictionaryMode&&(e&&this.learntWordsCount!==this.wordsCount?this.tooEarlySelfCheckMessage=!0:O.dispatch("setDictionaryMode",t))}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"tooEarlySelfCheckContinue",value:function(t){console.log("Continue: ".concat(t)),t&&this.setDictionaryMode("self-check",!1),this.tooEarlySelfCheckMessage=!1}},{key:"error",get:function(){return q.errors.length?q.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.currentWordNumber}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}},{key:"myWordsLinkPopoverContent",get:function(){return this.currentLesson.isAuthenticated?0===this.currentLesson.wordsLearned?"Будет доступно после ПРОВЕРКИ слов":void 0:"Необходимо залогиниться"}}]),e}(p["d"]);Object(f["a"])([Object(p["e"])("lessonComplete")],Et.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["e"])("useFullscreen")],Et.prototype,"useFullscreenToggle",null),Et=Object(f["a"])([Object(p["a"])({components:{LearnWordCard:xt,RadialProgressBar:ot.a,BlankCard:et,DictionaryModeSetter:ht}})],Et);var Pt=Et,Dt=Pt,Rt=Object(E["a"])(Dt,G,$,!1,null,null,null),At=Rt.exports,It=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.isStarted?t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.isVeryLongDelay?r("fullscreen",{ref:"fullscreen"},[r("BlankCard",[r("div",{staticClass:"align-self-start px-3 px-sm-5 py-5"},[r("h4",[t._v("Вы думали над ответом больше 20 секунд.")]),r("p",[t._v("Мы не решаемся оценить, как хорошо Вы\n      запомнили это слово. Пожалуйста, выберите наиболее подходящий вариант и нажмите OK.")]),r("p",[t._v("Итак, "+t._s(t.currentWordToLearn.word.name)+":")]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-5",value:"5"},domProps:{checked:5===t.customGrade},on:{change:function(e){return t.setCustomGrade(5)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-5"}},[t._v("отскакивает от зубов")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-4",value:"4"},domProps:{checked:4===t.customGrade},on:{change:function(e){return t.setCustomGrade(4)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-4"}},[t._v("вспоминаю, если чуть подумаю")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-3",value:"3"},domProps:{checked:3===t.customGrade},on:{change:function(e){return t.setCustomGrade(3)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-3"}},[t._v("могу припомнить, но нужно время")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-2",value:"2"},domProps:{checked:2===t.customGrade},on:{change:function(e){return t.setCustomGrade(2)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-2"}},[t._v("ответ не угадал(а), но он крутился на языке")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-1",value:"1"},domProps:{checked:1===t.customGrade},on:{change:function(e){return t.setCustomGrade(1)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-1"}},[t._v("слово знакомое, но без подсказки не вспомнить")])]),r("div",{staticClass:"custom-control custom-radio mb-3"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-0",value:"0"},domProps:{checked:0===t.customGrade},on:{change:function(e){return t.setCustomGrade(0)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-0"}},[t._v("первый раз вижу")])]),r("p",[t._v("Выбирайте честно! Правильная оценка поможет точнее подобрать\n        "),r("a",{attrs:{target:"_blank",href:"/lecons/bibliotheque/flash-cards/"}},[t._v("интервалы "),r("i",{staticClass:"fa fa-external-link",attrs:{"aria-hidden":"true"}})]),t._v(", через которые это слово нужно будет повторять.")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.sendCustomGrade}},[t._v("Вот так!")])])])])])],1):t.lessonComplete?t.lessonComplete?r("BlankCard",[t.wordsCount?r("h2",[t._v("Поздравляем! Все слова повторены.")]):r("h2",[t._v("На сегодня повторять нечего.")])]):t._e():[r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"})]),t.currentWordToLearn?r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("SelfCheckWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount},on:{"second-passed":function(e){t.timerSecondsPassed+=1},"reset-timer":function(e){t.timerSecondsPassed=0}}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!0)}}},[r("img",{attrs:{src:n("e587")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Вспомнил":"Помню")+"\n            ")])]),r("button",{staticClass:"btn btn-info btn-nav btn-wide mx-2",attrs:{disabled:t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.currentWordToLearn.revealWord()}}},[r("img",{attrs:{src:n("f4a8")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("Ответ")])]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!1)}}},[r("img",{attrs:{src:n("7831")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Не вспомнил?":"Не помню")+"\n            ")])])])])]):t._e()]:r("BlankCard",[r("button",{staticClass:"btn btn-info",on:{click:function(e){t.isStarted=!0}}},[t._v("Готовы? Поехали!")])])],2)},Nt=[],Mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("div",{staticClass:"dummy-row"},[t._v(" ")]),r("span",{staticClass:"word-card-phrase"},["learn"===t.cardMode?[t._v("\n              "+t._s(t.wordLabel)+"\n          ")]:[t._v("\n              "+t._s(t.wordTranslation)+"\n          ")]],2),!1===t.translateTimerEnabled&&"learn"===t.cardMode?r("span",{staticClass:"play-button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("53e0")}})]):t._e(),!0===t.translateTimerEnabled&&"learn"===t.cardMode?r("span",{staticClass:"pause-button invis",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[r("img",{attrs:{src:n("18d4")}})]):t._e(),"learn"===t.cardMode?r("div",{staticClass:"word-card-phrase",class:{invisible:!t.showTranslation}},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]):t._e(),"learn"!==t.cardMode?r("div",{staticClass:"word-card-phrase"},[t.dictionaryWord.isWordRevealed()?[t._v("\n      "+t._s(t.wordLabel)+"\n    ")]:[t.showCharacterPlaceholders?r("div",{staticClass:"word-characters-block"},t._l(t.wordCharacters,function(e){return r("span",{staticClass:"word-character",class:{shown:e.shown}},[t._v("\n                      "+t._s(e.shown?e.character:"")+"\n                  ")])}),0):t._e()]],2):t._e(),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("a",{staticClass:"show-hint-button",class:{invisible:"learn"===t.cardMode||t.dictionaryWord.isWordRevealed()},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showHint(e)}}},[r("img",{attrs:{src:n("9ff2")}})]),r("div",{staticClass:"info-row"},[r("div",{staticClass:"timer-block ml-4",class:{invisible:"learn"!==t.cardMode}},[r("div",{staticClass:"d-flex align-items-center"},[r("a",{staticClass:"invis mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.changeTranslateTimerInterval(e)}}},[r("img",{attrs:{height:"20",src:n("8a17")}})]),t._l(t.translateTimerInterval,function(e){return r("span",{staticClass:"timer-dot mr-1",class:{passed:e<=t.translateTimerSecondsPassed}})})],2)]),r("div",{staticClass:"settings-block mr-4"},[r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleSoundEnabled(e)}}},[t.soundEnabled?r("img",{attrs:{height:"20",src:n("bcb3")}}):t._e(),t.soundEnabled?t._e():r("img",{staticClass:"play-sound-off",attrs:{height:"20",src:n("f635")}})]),r("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleFullscreen(e)}}},[r("img",{attrs:{height:"20",src:n("b263")}})]),r("a",{staticClass:"invis",class:{visible:t.settingsPopoverOpened},attrs:{href:"#",id:"settings-popover-button"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{height:"20",src:n("c8fa")}}),r("b-popover",{attrs:{"custom-class":"settings-popover",placement:"top",target:"settings-popover-button",triggers:"click blur"},on:{hidden:function(e){t.settingsPopoverOpened=!1},shown:function(e){t.settingsPopoverOpened=!0}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Настройки")]},proxy:!0}],null,!1,3100224662)},[r("p",[r("label",{attrs:{for:"select-translation-direction"}},[t._v("Направление перевода:")]),r("br"),r("select",{directives:[{name:"model",rawName:"v-model",value:t.translationDirection,expression:"translationDirection"}],staticClass:"form-control-sm",attrs:{id:"select-translation-direction"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.translationDirection=e.target.multiple?n:n[0]}}},[r("option",{attrs:{value:"fr-ru"}},[t._v("Французский → русский")]),r("option",{attrs:{value:"ru-fr"}},[t._v("Русский → французский")])])]),r("p",[r("label",{attrs:{for:"select-timer-interval"}},[t._v("Задержка после показа слова:")]),r("br"),r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.translateTimerInterval,expression:"translateTimerInterval",modifiers:{number:!0}}],staticClass:"form-control-sm",attrs:{id:"select-timer-interval"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var n="_value"in e?e._value:e.value;return t._n(n)});t.translateTimerInterval=e.target.multiple?n:n[0]}}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)]),r("p",[r("label",{attrs:{for:"select-change-interval"}},[t._v("Задержка после показа перевода:")]),r("br"),r("select",{staticClass:"form-control-sm",attrs:{id:"select-change-interval"},domProps:{value:t.wordChangeInterval},on:{change:t.setWordChangeInterval}},t._l(5,function(e){return r("option",[t._v(t._s(e))])}),0)])])],1)])])]):t._e()},Bt=[],Ft=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.translateTimerEnabled=!1,t.translateTimerSecondsPassed=0,t.translateTimerInterval=1,t.showTranslation=!1,t.soundEnabled=!0,t.showCharacterPlaceholders=!1,t.settingsPopoverOpened=!1,t.translationDirection="fr-ru",t.wordSoundsInitialized=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"wordChanged",value:function(){this.showCharacterPlaceholders=!1,this.showTranslation=!1,this.translateTimerSecondsPassed=0,this.wordSoundsInitialized=!1,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.soundOfTranslation&&this.soundOfTranslation.stop(),this.soundOfWord&&this.soundOfWord.stop(),this.timer.stop(),this.changeWordTimer.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0)}},{key:"dictionaryWordChanged",value:function(t){t&&this.soundEnabled&&this.playSound(!1)}},{key:"cardModeChanged",value:function(t){this.translateTimerEnabled=!1,this.wordChanged()}},{key:"toggleSoundEnabled",value:function(){this.soundEnabled=!this.soundEnabled}},{key:"showHint",value:function(){if(void 0!==this.dictionaryWord)if(this.showCharacterPlaceholders){for(var t in this.wordCharacters)if(!this.wordCharacters[t].shown){this.wordCharacters[t].show(!0);break}this.dictionaryWord.revealed=this.dictionaryWord.isWordRevealed()}else this.showCharacterPlaceholders=!0}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,n){var r=t.soundOfWord;t.soundEnabled&&!t.soundOfWordPlayed?r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){var r=t.soundOfTranslation;t.soundEnabled&&!t.soundOfTranslationPlayed?(t.soundOfWord.pause(),r&&(r.once("end",function(){t.soundOfTranslationPlayed=!0,e()}),r.play())):e()})}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"showWordTranslation",value:function(){var t=this;this.showTranslation=!0,this.translateTimerSecondsPassed=this.translateTimerInterval,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.playSound(!0).then(function(){t.changeWordTimer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:t.wordChangeInterval}}),t.translateTimerEnabled||t.changeWordTimer.pause()})}},{key:"setWordChangeInterval",value:function(t){O.dispatch("setWordChangeInterval",parseInt(t.target.value,10))}},{key:"changeTranslateTimerInterval",value:function(){return!(++this.translateTimerInterval>5)||(this.translateTimerInterval=1,!1)}},{key:"beforeTimerStarted",value:function(){return this.wordSoundsInitialized||(this.wordSoundsInitialized=!0,this.soundEnabled),new Promise(function(t){return t()})}},{key:"playSound",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.playSoundOfWord()}},{key:"changeWord",value:function(){this.translateTimerEnabled&&O.dispatch("setWordNumber",O.state.wordNumber+1)}},{key:"toggleTimer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.translateTimerEnabled=e||!this.translateTimerEnabled,!this.translateTimerEnabled)return this.timer.isRunning()&&this.timer.pause(),void(this.changeWordTimer.isRunning()&&this.changeWordTimer.pause());this.changeWordTimer.isPaused()?this.changeWordTimer.start():this.timer.isPaused()?this.timer.start():this.beforeTimerStarted().then(function(){t.translateTimerEnabled&&t.timer.start({precision:"seconds",startValues:{seconds:t.translateTimerSecondsPassed},target:{seconds:t.translateTimerInterval}})})}},{key:"eventShowWordTranslation",value:function(t){t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"beforeDestroy",value:function(){this.timer.stop(),this.changeWordTimer.stop()}},{key:"mounted",value:function(){var t=this;O.state.currentLesson;this.timer=new vt.a,this.timer.addEventListener("secondsUpdated",function(e){t.translateTimerSecondsPassed++}),this.timer.addEventListener("started",function(e){t.translateTimerEnabled=!0}),this.timer.addEventListener("targetAchieved",function(e){t.translateTimerEnabled&&t.showWordTranslation()}),this.changeWordTimer=new vt.a,this.changeWordTimer.addEventListener("targetAchieved",function(t){O.state.currentLesson}),this.lastFadeoutAnimationStarted=Date.now(),gt()(".word-card").off("mousemove"),gt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=gt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),document.body.addEventListener("keydown",function(e){32===e.keyCode&&t.beforeTimerStarted().then(function(){return t.toggleTimer()})}),this.wordChanged()}},{key:"wordId",get:function(){return O.state.currentLesson+"-"+this.wordNumber}},{key:"word",get:function(){if(this.dictionaryWord)return this.dictionaryWord.word}},{key:"wordSexClass",get:function(){return this.word?{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}:{}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return void 0===this.word?"":"ru-fr"===this.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return void 0===this.word?"":"ru-fr"===this.translationDirection?this.word.name:this.word.translation}},{key:"wordCharacters",get:function(){return void 0===this.dictionaryWord?[]:this.dictionaryWord.wordCharacters}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}}]),e}(p["d"]);Object(f["a"])([Object(p["b"])()],Ft.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],Ft.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["e"])("word")],Ft.prototype,"wordChanged",null),Object(f["a"])([Object(p["e"])("dictionaryWord.revealed")],Ft.prototype,"dictionaryWordChanged",null),Object(f["a"])([Object(p["e"])("cardMode")],Ft.prototype,"cardModeChanged",null),Object(f["a"])([Object(p["e"])("isShowWordTranslation")],Ft.prototype,"eventShowWordTranslation",null),Ft=Object(f["a"])([Object(p["a"])({})],Ft);var Ut=Ft,Gt=Ut,$t=Object(E["a"])(Gt,Mt,Bt,!1,null,null,null),Vt=$t.exports,Ht=(n("a481"),n("28a5"),function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c["a"])(this,t),this.character=e,this.shown=n,this.shownAsHint=r}return Object(l["a"])(t,[{key:"show",value:function(t){this.shown=!0,this.shownAsHint=t}}]),t}()),zt=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c["a"])(this,t),this.word=e,this.learnt=r,this.shown=!1,this.remember=null,this.revealed=!1,this.wordCharacters=[],this.word.name.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.wordCharacters.push(new Ht(t," "===t))}),this.wordShownTimestamp=null,this.translationCharacters=[],this.word.translation.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.translationCharacters.push(new Ht(t," "===t))})}return Object(l["a"])(t,[{key:"translationCharactersShownNumber",value:function(){return this.translationCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"wordCharactersShownNumber",value:function(){return this.wordCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"isWordRevealed",value:function(){return this.wordCharacters.length===this.wordCharactersShownNumber()||this.translationCharacters.length===this.translationCharactersShownNumber()}},{key:"revealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!0}),this.translationCharacters.forEach(function(t){t.shown=!0}),this.revealed=!0,this.wordShownTimestamp=(new Date).getTime()}},{key:"unrevealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!1}),this.translationCharacters.forEach(function(t){t.shown=!1}),this.revealed=!1}},{key:"flushWord",value:function(){this.unrevealWord(),this.shown=!1,this.remember=null}},{key:"banWord",value:function(t){if(this.revealed=!0,this.shown=!0,this.remember=!0,this.learnt=!0,this.word.banned=!0,t)return k.post("/dictionary/mark-words/",{words:[this.word.pk]})}},{key:"updateWordState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.updateWordQuery(this.word.pk,null===this.remember||this.remember,this.hintsShown(),t,e)}},{key:"hintsShown",value:function(){var t=this.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"updateWordQuery",value:function(t,e,n,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return k.post("/dictionary/update-words/",{words:[{pk:t,grade:e,mistakes:n,delay:r,customGrade:s}]})}}]),t}(),Yt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.word?r("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[r("span",{staticClass:"word-card-phrase"},[t._v("\n    "+t._s(t.wordTranslation)+"\n  ")]),r("div",{staticClass:"word-card-phrase"},[t.dictionaryWord.isWordRevealed()?[t._v("\n      "+t._s(t.wordLabel)+"\n    ")]:[t.showCharacterPlaceholders?r("div",{staticClass:"word-characters-block"},t._l(t.wordCharacters,function(e){return r("span",{staticClass:"word-character",class:{shown:e.shown}},[t._v("\n                      "+t._s(e.shown?e.character:"")+"\n                  ")])}),0):t._e()]],2),r("div",{staticClass:"dummy-row2"},[t._v(" ")]),r("a",{staticClass:"show-hint-button",class:{invisible:t.dictionaryWord.isWordRevealed()},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showHint(e)}}},[r("img",{attrs:{src:n("9ff2")}})]),r("SettingsBlock",{attrs:{"show-timer-settings":!1,"translate-timer-seconds-passed":t.timerSecondsPassed,"colored-dots":!0,"passed-all-dots":t.isHintShown}})],1):t._e()},Qt=[],qt=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.showTranslation=!1,t.showCharacterPlaceholders=!1,t.soundOfWordPlayed=!1,t.soundOfTranslationPlayed=!1,t.timerSecondsPassed=0,t.isHintShown=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"wordChanged",value:function(){if(this.showCharacterPlaceholders=!1,this.showTranslation=!1,this.soundOfWordPlayed=!1,this.soundOfTranslationPlayed=!1,this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),this.word.soundOfWord&&this.word.soundOfWord.stop(),this.dictionaryWord&&(this.dictionaryWord.shown=!0),z.soundEnabled)return this.playSound(!0)}},{key:"dictionaryWordChanged",value:function(t){console.log("dictionaryWordChanged"),t?z.soundEnabled&&this.playSound(!1):(this.timerSecondsPassed=0,this.isHintShown=!1)}},{key:"cardModeChanged",value:function(t){console.log("Card Mode Changed"),this.wordChanged()}},{key:"toggleSoundEnabled",value:function(){z.soundEnabled=!z.soundEnabled}},{key:"showHint",value:function(){if(void 0!==this.dictionaryWord)if(this.showCharacterPlaceholders){for(var t in this.wordCharacters)if(!this.wordCharacters[t].shown){this.wordCharacters[t].show(!0);break}this.dictionaryWord.revealed=this.dictionaryWord.isWordRevealed()}else{this.showCharacterPlaceholders=!0;var e=/^(la |le |les |des |l'|un |une )/gm,n=e.exec("fr-ru"===z.translationDirection?this.word.name:this.word.translation);if(null!==n)for(var r=0;r<n[0].length;r++)this.wordCharacters[r].show(!0);this.isHintShown=!0}}},{key:"startTimer",value:function(){console.log("Stopping Timer"),this.timer.stop(),this.$emit("reset-timer"),this.timerSecondsPassed=0,console.log("Starting Timer"),this.timer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:999}})}},{key:"pauseTimer",value:function(){console.log("Pausing Timer"),this.$emit("pause-timer"),this.timer.pause()}},{key:"playSoundOfWord",value:function(){var t=this;return this.pauseTimer(),new Promise(function(e,n){var r=t.word.soundOfWord;z.soundEnabled?r&&(r.once("end",function(){t.soundOfWordPlayed=!0,e()}),r.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,n){var r=t.word.soundOfTranslation;if(console.log(r),!z.soundEnabled||t.soundOfTranslationPlayed)return t.startTimer(),void e();t.word.soundOfWord&&(t.word.soundOfWord.pause(),t.startTimer()),r?(r.once("end",function(){t.startTimer(),t.soundOfTranslationPlayed=!0,e()}),r.once("playerror",function(){t.startTimer()}),r.play()):t.startTimer()})}},{key:"toggleFullscreen",value:function(){O.dispatch("setFullscreenMode",!O.state.useFullscreen)}},{key:"showWordTranslation",value:function(){this.showTranslation=!0,this.dictionaryWord&&(this.dictionaryWord.learnt=!0),this.playSound(!0)}},{key:"playSound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.word.soundOfWord&&this.word.soundOfWord.stop(),this.word.soundOfTranslation&&this.word.soundOfTranslation.stop(),t?(console.log("Translation Direction ".concat(z.translationDirection)),"fr-ru"===z.translationDirection?this.playSoundOfTranslation():this.playSoundOfWord()):"fr-ru"===z.translationDirection?this.playSoundOfWord():this.playSoundOfTranslation()}},{key:"eventShowWordTranslation",value:function(t){t&&(this.showWordTranslation(),O.dispatch("showWordTranslation",!1))}},{key:"mounted",value:function(){var t=this;O.state.currentLesson;console.log("Initializing repeat mode timer"),this.timer=new mt["Timer"],this.timer.addEventListener("secondsUpdated",function(e){if("repeat"!==t.dictionaryMode&&"self-check"!==t.dictionaryMode)return console.log("Stopping timer: DictionaryMode: ".concat(t.dictionaryMode)),t.timer.stop();t.$emit("second-passed"),t.timerSecondsPassed++}),this.lastFadeoutAnimationStarted=Date.now(),gt()(".word-card").off("mousemove"),gt()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=gt()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0]&&e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),this.wordChanged()}},{key:"beforeDestroy",value:function(){this.timer.stop()}},{key:"dictionaryMode",get:function(){return O.state.dictionaryMode}},{key:"wordId",get:function(){return O.state.currentLesson+"-"+this.wordNumber}},{key:"word",get:function(){return this.dictionaryWord?this.dictionaryWord.word:new Y(null)}},{key:"wordSexClass",get:function(){return this.word?{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}:{}}},{key:"wordNumber",get:function(){return O.state.wordNumber}},{key:"wordsCount",get:function(){return O.state.wordsCount}},{key:"wordLabel",get:function(){return void 0===this.word?"":"ru-fr"===z.translationDirection?this.word.translation:this.word.name}},{key:"wordTranslation",get:function(){return void 0===this.word?"":"ru-fr"===z.translationDirection?this.word.name:this.word.translation}},{key:"wordCharacters",get:function(){return void 0===this.dictionaryWord?[]:"ru-fr"===z.translationDirection?this.dictionaryWord.translationCharacters:this.dictionaryWord.wordCharacters}},{key:"wordChangeInterval",get:function(){return O.state.wordChangeInterval}},{key:"isShowWordTranslation",get:function(){return O.state.showWordTranslation}}]),e}(p["d"]);Object(f["a"])([Object(p["b"])()],qt.prototype,"dictionaryWord",void 0),Object(f["a"])([Object(p["b"])()],qt.prototype,"learntWordsCount",void 0),Object(f["a"])([Object(p["e"])("word")],qt.prototype,"wordChanged",null),Object(f["a"])([Object(p["e"])("dictionaryWord.revealed")],qt.prototype,"dictionaryWordChanged",null),Object(f["a"])([Object(p["e"])("cardMode")],qt.prototype,"cardModeChanged",null),Object(f["a"])([Object(p["e"])("isShowWordTranslation")],qt.prototype,"eventShowWordTranslation",null),qt=Object(f["a"])([Object(p["a"])({components:{SettingsBlock:Ot}})],qt);var Jt=qt,Kt=Jt,Zt=Object(E["a"])(Kt,Yt,Qt,!1,null,null,null),Xt=Zt.exports;p["d"].use(rt.a);var te=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t.isVeryLongDelay=!1,t.customGradeValue=null,t.timerSecondsPassed=0,t.isStarted=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setCustomGrade",value:function(t){this.customGradeValue=t}},{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.lessonIsLoading=!0,t.next=3,this.$nextTick();case 3:return this.lessonComplete=!1,t.next=6,q.loadWords(O.state.currentLessonNumber);case 6:return this.wordsToLearn=[],q.words.forEach(function(t){return e.wordsToLearn.push(new zt(t))}),t.next=10,O.dispatch("setWordsCount",this.wordsToLearn.length);case 10:return this.setWordNumber(0),t.next=13,this.waitWhileWordsReady();case 13:this.lessonIsLoading=!1,O.dispatch("loadRepeatWordsCount");case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"sleep",value:function(t){return new Promise(function(e){return setTimeout(e,t)})}},{key:"waitWhileWordsReady",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.wordsToLearn.slice(0,3),n=0;case 2:if(!(n<e.length)){t.next=11;break}case 3:if(this.wordsToLearn[n].word.isReady){t.next=8;break}return t.next=6,this.sleep(1e3);case 6:t.next=3;break;case 8:n++,t.next=2;break;case 11:return t.abrupt("return");case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){t!==O.state.dictionaryMode&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"sendCustomGrade",value:function(){var t=this.customGrade;null!==t&&t>=0&&t<=5&&(this.setWordMemoryState(t>0,t),this.isVeryLongDelay=!1)}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"setWordMemoryState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.currentWordToLearn)if(this.rememberedWordsCount!==this.wordsCount){this.currentWordToLearn.remember=t;var n=1e3*this.timerSecondsPassed;if(n>2e4&&t&&!this.isVeryLongDelay&&!this.hintsShown)return this.isVeryLongDelay=!0,void this.setCustomGrade(0);this.currentLesson.isAuthenticated&&this.currentWordToLearn.updateWordState(n,e).then(function(){O.dispatch("loadRepeatWordsCount")}),t||this.currentWordToLearn.unrevealWord();for(var r=!1,s=this.currentWordNumber+1;s<this.wordsCount;s++)if(!0!==this.wordsToLearn[s].remember){this.setWordNumber(s),r=!0;break}if(!r){for(var o=0;o<this.wordsCount;o++)if(!0!==this.wordsToLearn[o].remember){this.setWordNumber(o),r=!0;break}r||(this.lessonComplete=!0)}}else this.lessonComplete=!0}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"customGrade",get:function(){return this.customGradeValue}},{key:"error",get:function(){return q.errors.length?q.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"hintsShown",get:function(){var t=this.currentWordToLearn.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.currentWordToLearn.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.rememberedWordsCount}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}}]),e}(p["d"]);Object(f["a"])([Object(p["e"])("lessonComplete")],te.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["e"])("useFullscreen")],te.prototype,"useFullscreenToggle",null),te=Object(f["a"])([Object(p["a"])({components:{SelfCheckWordCard:Xt,DictionaryModeSetter:ht,WordCard:Vt,RadialProgressBar:ot.a,BlankCard:et}})],te);var ee=te,ne=ee,re=Object(E["a"])(ne,It,Nt,!1,null,null,null),se=re.exports,oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.isStarted?t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.isVeryLongDelay?r("fullscreen",{ref:"fullscreen"},[r("BlankCard",[r("div",{staticClass:"align-self-start px-3 px-sm-5 py-5"},[r("h4",[t._v("Вы думали над ответом больше 20 секунд.")]),r("p",[t._v("Мы не решаемся оценить, как хорошо Вы\n      запомнили это слово. Пожалуйста, выберите наиболее подходящий вариант и нажмите OK.")]),r("p",[t._v("Итак, "),r("span",{staticClass:"text-danger"},[t._v(t._s(t.currentWordToLearn.word.name))]),t._v(":")]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-5",value:"5"},domProps:{checked:5===t.customGrade},on:{change:function(e){return t.setCustomGrade(5)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-5"}},[t._v("отскакивает от зубов")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-4",value:"4"},domProps:{checked:4===t.customGrade},on:{change:function(e){return t.setCustomGrade(4)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-4"}},[t._v("вспоминаю, если чуть подумаю")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-3",value:"3"},domProps:{checked:3===t.customGrade},on:{change:function(e){return t.setCustomGrade(3)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-3"}},[t._v("могу припомнить, но нужно время")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-2",value:"2"},domProps:{checked:2===t.customGrade},on:{change:function(e){return t.setCustomGrade(2)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-2"}},[t._v("ответ не угадал(а), но он крутился на языке")])]),r("div",{staticClass:"custom-control custom-radio"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-1",value:"1"},domProps:{checked:1===t.customGrade},on:{change:function(e){return t.setCustomGrade(1)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-1"}},[t._v("слово знакомое, но без подсказки не вспомнить")])]),r("div",{staticClass:"custom-control custom-radio mb-3"},[r("input",{staticClass:"custom-control-input",attrs:{type:"radio",id:"custom-grade-0",value:"0"},domProps:{checked:0===t.customGrade},on:{change:function(e){return t.setCustomGrade(0)}}}),r("label",{staticClass:"custom-control-label",attrs:{for:"custom-grade-0"}},[t._v("первый раз вижу")])]),r("p",[t._v("Выбирайте честно! Правильная оценка поможет точнее подобрать\n        "),r("a",{attrs:{target:"_blank",href:"/lecons/bibliotheque/flash-cards/"}},[t._v("интервалы "),r("i",{staticClass:"fa fa-external-link",attrs:{"aria-hidden":"true"}})]),t._v(", через которые это слово нужно будет повторять.")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.sendCustomGrade}},[t._v("Вот так!")])])])])])],1):t.lessonComplete?t.lessonComplete?r("BlankCard",[r("h2",[t._v("Поздравляем! Все слова проверены.")])]):t._e():[r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center filled",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("learn")}}},[r("img",{staticClass:"rotated",attrs:{src:n("d25c")}})]),r("span",{staticClass:"active"},[t._v("Проверяем")])])]),t.currentWordToLearn?r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("SelfCheckWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount},on:{"second-passed":function(e){t.timerSecondsPassed+=1},"reset-timer":function(e){t.timerSecondsPassed=0}}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center mb-2"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!0)}}},[r("img",{attrs:{src:n("e587")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Вспомнил":"Помню")+"\n            ")])]),r("button",{staticClass:"btn btn-info btn-nav btn-wide mx-2",attrs:{disabled:t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.currentWordToLearn.revealWord()}}},[r("img",{attrs:{src:n("f4a8")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("Ответ")])]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{disabled:!t.currentWordToLearn.revealed,type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!1)}}},[r("img",{attrs:{src:n("7831")}}),r("span",{staticClass:"d-none d-md-inline"},[t._v("\n                "+t._s(t.hintsShown?"Не вспомнил?":"Не помню")+"\n            ")])])])]),r("div",{staticClass:"row",attrs:{id:"my-words-link-row"}},[r("div",{staticClass:"col text-center text-sm-left"},[r("div",{staticClass:"d-inline-block",attrs:{id:"my-words-popover-wrapper"}},[r("b-button",{staticClass:"my-words-button px-0 py-0",attrs:{variant:"link",id:"my-words-link",disabled:!(t.checkedWordsCount||t.currentLesson.wordsChecked)||!t.currentLesson.isAuthenticated,href:"/dictionary/my-words/?lesson_pk="+t.currentLesson.pk}},[t._v("Открыть эти карточки в «Моих словах»")])],1),t.currentLesson.isAuthenticated?t._e():r("div",{staticClass:"d-inline-block mr-sm-auto"},[r("span",{staticClass:"mr-4"},[r("span",{staticClass:"d-none d-sm-inline"},[t._v(" ← доступно после "),r("b-link",{attrs:{href:"/accounts/login/?next="+this.$router.currentRoute.path+"#flash-cards"}},[t._v("регистрации")])],1),r("span",{staticClass:"d-inline d-sm-none"},[t._v("(доступно после "),r("b-link",{attrs:{href:"/accounts/login/?next="+this.$router.currentRoute.path+"#flash-cards"}},[t._v("регистрации")]),t._v(")")],1)])]),r("b-popover",{attrs:{target:"my-words-popover-wrapper",disabled:t.checkedWordsCount>0||t.currentLesson.wordsChecked||!t.currentLesson.isAuthenticated,triggers:"hover focus",html:"true",content:t.myWordsLinkPopoverContent,container:"#my-words-link-row",placement:"top"}})],1)])]):t._e()]:r("BlankCard",[r("button",{staticClass:"btn btn-info",on:{click:function(e){t.isStarted=!0}}},[t._v("Начать")])])],2)},ae=[];p["d"].use(rt.a);var ie=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t.isVeryLongDelay=!1,t.customGradeValue=null,t.timerSecondsPassed=0,t.isStarted=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"setCustomGrade",value:function(t){this.customGradeValue=t}},{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.wordsToLearn=e,this.lessonIsLoading=!0,t.next=4,this.$nextTick();case 4:if(this.learntWordsCount!==this.wordsToLearn.length){t.next=8;break}this.lessonComplete=!0,t.next=17;break;case 8:this.lessonComplete=!1,n=0;case 10:if(!(n<this.wordsToLearn.length)){t.next=16;break}if(this.wordsToLearn[n].remember){t.next=13;break}return t.abrupt("break",16);case 13:n++,t.next=10;break;case 16:this.setWordNumber(n);case 17:return t.next=19,O.dispatch("setWordsCount",this.wordsToLearn.length);case 19:return t.next=21,this.waitWhileWordsReady();case 21:this.lessonIsLoading=!1;case 22:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"sleep",value:function(t){return new Promise(function(e){return setTimeout(e,t)})}},{key:"waitWhileWordsReady",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.wordsToLearn.slice(0,3),n=0;case 2:if(!(n<e.length)){t.next=11;break}case 3:if(this.wordsToLearn[n].word.isReady){t.next=8;break}return t.next=6,this.sleep(1e3);case 6:t.next=3;break;case 8:n++,t.next=2;break;case 11:return t.abrupt("return");case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){t!==O.state.dictionaryMode&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.wordsToLearn.length),O.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"sendCustomGrade",value:function(){var t=this.customGrade;null!==t&&t>=0&&t<=5&&(this.setWordMemoryState(t>0,t),this.isVeryLongDelay=!1)}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"setWordMemoryState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.currentWordToLearn)if(this.rememberedWordsCount!==this.wordsCount){this.currentWordToLearn.remember=t;var n=1e3*this.timerSecondsPassed;if(n>2e4&&t&&!this.isVeryLongDelay&&!this.hintsShown)return this.isVeryLongDelay=!0,void this.setCustomGrade(0);this.currentLesson.isAuthenticated&&this.currentWordToLearn.updateWordState(n,e).then(function(){O.dispatch("loadRepeatWordsCount")}),t||this.currentWordToLearn.unrevealWord();for(var r=!1,s=this.currentWordNumber+1;s<this.wordsCount;s++)if(!0!==this.wordsToLearn[s].remember){this.setWordNumber(s),r=!0;break}if(!r){for(var o=0;o<this.wordsCount;o++)if(!0!==this.wordsToLearn[o].remember){this.setWordNumber(o),r=!0;break}r||(this.lessonComplete=!0)}}else this.lessonComplete=!0}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"customGrade",get:function(){return this.customGradeValue}},{key:"error",get:function(){return q.errors.length?q.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length:0}},{key:"checkedWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.remember;return null!==e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"hintsShown",get:function(){var t=this.currentWordToLearn.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.currentWordToLearn.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.rememberedWordsCount}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}},{key:"myWordsLinkPopoverContent",get:function(){return this.currentLesson.isAuthenticated?0===this.currentLesson.wordsLearned||0===this.learntWordsCount?"Будет доступно после ПРОВЕРКИ слов":void 0:"Необходимо залогиниться"}}]),e}(p["d"]);Object(f["a"])([Object(p["e"])("lessonComplete")],ie.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["e"])("useFullscreen")],ie.prototype,"useFullscreenToggle",null),ie=Object(f["a"])([Object(p["a"])({components:{SelfCheckWordCard:Xt,DictionaryModeSetter:ht,WordCard:Vt,RadialProgressBar:ot.a,BlankCard:et}})],ie);var ce=ie,le=ce,ue=Object(E["a"])(le,oe,ae,!1,null,null,null),de=ue.exports,he=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("DictionaryModeSetter",{class:{invisible:t.lessonIsLoading}}),t.error?r("BlankCard",[r("h2",{staticClass:"text-center",domProps:{innerHTML:t._s(t.error.message)}})]):t.lessonIsLoading?r("BlankCard",[r("h2",[t._v("Загружаем слова...")]),r("div",{staticClass:"text-center page-loading mt-4"},[r("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):t.askForWordBan?r("BlankCard",[r("h2",{staticClass:"text-center"},[t._v("\n      Навсегда убрать «"+t._s(t.currentWordToLearn.word.name)+"» из списка для изучения?\n    ")]),r("div",{staticClass:"text-center mt-4"},[r("button",{staticClass:"btn-info btn-card-button mr-2",attrs:{type:"button"},on:{click:t.banWord}},[t._v("\n        Да, я уже знаю\n        "+t._s("phrase"===t.currentWordToLearn.word.partOfSpeech?"эту фразу":"это слово")+".\n      ")]),r("button",{staticClass:"btn-info btn-card-button ml-2",attrs:{type:"button"},on:{click:t.cancelWordBan}},[t._v("\n        Нет, я передумал!\n      ")])])]):!1===t.lessonComplete?[t.wordsCount?r("div",{staticClass:"row"},[r("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[r("span",{staticClass:"active"},[t._v("Запоминаем")]),r("a",{staticClass:"d-flex justify-content-center flex-column align-items-center",class:{filled:t.learntWordsCount===t.wordsCount,learnt:t.isLessonLearnt},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setDictionaryMode("self-check")}}},[r("radial-progress-bar",{attrs:{"completed-steps":t.learntWordsCount,diameter:66,"total-steps":t.wordsCount,"start-color":"#1972bc","stop-color":"#1972bc"}},[r("div",[r("img",{attrs:{src:n("d9c4")}}),r("img",{attrs:{src:n("d25c")}})])])],1),r("span",[t._v("Проверяем")])])]):t._e(),r("fullscreen",{ref:"fullscreen"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col text-center"},[r("LearnWordCard",{attrs:{"dictionary-word":t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),r("div",{staticClass:"row d-flex align-items-center"},[r("div",{staticClass:"col d-flex justify-content-between"},[r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordNumber(t.currentWordNumber-1)},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("21e7")}})]),r("button",{staticClass:"btn btn-info btn-nav btn-narrow mx-4",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.askForBan()}}},[r("img",{attrs:{src:n("7831")}})]),r("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.showWordTranslation()},keyup:function(t){t.preventDefault(),t.stopPropagation()}}},[r("img",{attrs:{src:n("35fe")}})])])])])]:t.lessonComplete?r("BlankCard",[r("h2",[t._v("Поздравляем! Все глаголы выучены!")])]):t._e()],2)},fe=[],pe=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(c["a"])(this,t),this.verb=e,this.learnt=r,this.shown=!1,this.remember=null,this.revealed=!1,this.wordCharacters=[],this.verb.verb.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.wordCharacters.push(new Ht(t," "===t))}),this.translationCharacters=[],this.verb.translation.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){n.translationCharacters.push(new Ht(t," "===t))})}return Object(l["a"])(t,[{key:"translationCharactersShownNumber",value:function(){return this.translationCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"wordCharactersShownNumber",value:function(){return this.wordCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"isWordRevealed",value:function(){return this.wordCharacters.length===this.wordCharactersShownNumber()||this.translationCharacters.length===this.translationCharactersShownNumber()}},{key:"revealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!0}),this.translationCharacters.forEach(function(t){t.shown=!0}),this.revealed=!0}},{key:"unrevealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!1}),this.translationCharacters.forEach(function(t){t.shown=!1}),this.revealed=!1}},{key:"flushWord",value:function(){this.unrevealWord(),this.shown=!1,this.remember=null}},{key:"banWord",value:function(t){if(this.revealed=!0,this.shown=!0,this.remember=!0,this.learnt=!0,this.verb.banned=!0,t)return k.post("/dictionary/mark-words/",{words:[this.verb.packet]})}},{key:"updateWordState",value:function(t){return this.updateWordQuery(this.verb.packet,null===this.remember||this.remember,this.hintsShown(),t)}},{key:"hintsShown",value:function(){var t=this.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"updateWordQuery",value:function(t,e,n,r){return k.post("/dictionary/update-words/",{words:[{pk:t,grade:e,mistakes:n,delay:r}]})}}]),t}(),me=function t(e){Object(c["a"])(this,t),this.verb="",this.isTranslation=!1,this.packet=0,this.pollyUrl="",this.trPollyUrl="",this.translation="",this.banned=!1,this.verb=e.verb,this.forms=e.forms,this.isTranslation=e.isTranslation,this.packet=e.packet,this.pollyUrl=e.pollyUrl,this.trPollyUrl=e.trPollyUrl,this.translation=e.translation},ve=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.verbs=[],t.errors=[],t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"SET_VERBS_DATA",value:function(t){this.verbs=t.verbs.map(function(t){return new me(t)}),this.errors=t.errors}},{key:"SET_ERRORS",value:function(t){this.errors=t}},{key:"loadVerbs",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.get("/dictionary/verbs/".concat(e,"/"));case 2:return n=t.sent,t.abrupt("return",n.data.verbs);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"setErrors",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(b["d"]);Object(f["a"])([b["c"]],ve.prototype,"SET_VERBS_DATA",null),Object(f["a"])([b["c"]],ve.prototype,"SET_ERRORS",null),Object(f["a"])([Object(b["a"])({commit:"SET_VERBS_DATA"})],ve.prototype,"loadVerbs",null),Object(f["a"])([Object(b["a"])({commit:"SET_ERRORS"})],ve.prototype,"setErrors",null),ve=Object(f["a"])([Object(b["b"])({namespaced:!0,name:"VerbsModule",store:O,dynamic:!0})],ve);var be=Object(b["e"])(ve);p["d"].use(rt.a);var ge=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.verbsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!0,t.askForWordBan=!1,t.lastWordShownTimestamp=0,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"initDictinonary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.lessonIsLoading=!0,t.next=3,this.$nextTick();case 3:return this.lessonComplete=!1,t.next=6,be.loadVerbs(O.state.currentLessonNumber);case 6:return be.verbs.forEach(function(t){return e.verbsToLearn.push(new pe(t))}),t.next=9,O.dispatch("setWordsCount",this.verbsToLearn.length);case 9:this.setWordNumber(0),this.lessonIsLoading=!1,O.state.isDevEnv;case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setDictionaryMode",value:function(t){(O.state.isDevEnv||t!==O.state.dictionaryMode&&this.learntWordsCount===this.wordsCount)&&O.dispatch("setDictionaryMode",t)}},{key:"eventLessonComplete",value:function(){_.loadLessons()}},{key:"askForBan",value:function(){this.askForWordBan=!0}},{key:"cancelWordBan",value:function(){this.askForWordBan=!1}},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(this.currentLesson.isAuthenticated),this.verbsToLearn=this.verbsToLearn.filter(function(e){return e!==t.currentWordToLearn}),O.dispatch("setWordsCount",this.verbsToLearn.length),O.state.wordNumber>=this.verbsToLearn.length&&this.setWordNumber(0),this.askForWordBan=!1}},{key:"setWordNumber",value:function(t){O.dispatch("setWordNumber",t)}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){O.dispatch("showWordTranslation",!0)}},{key:"error",get:function(){return q.errors.length?q.errors[0]:null}},{key:"learntWordsCount",get:function(){return this.verbsToLearn&&this.verbsToLearn.length?this.verbsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.verbsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"currentLesson",get:function(){return O.state.currentLesson}},{key:"isLessonLearnt",get:function(){return this.currentLesson.wordsLearned>=this.currentLesson.wordsCount}},{key:"currentWordToLearn",get:function(){return this.verbsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.verbsToLearn&&this.verbsToLearn.length?this.verbsToLearn.length:0}},{key:"lessonProgress",get:function(){return 100/(this.wordsCount-1)*this.currentWordNumber}},{key:"currentWordNumber",get:function(){return this.lastWordShownTimestamp=(new Date).getTime(),O.state.wordNumber}},{key:"useFullscreen",get:function(){return O.state.useFullscreen}}]),e}(p["d"]);Object(f["a"])([Object(p["e"])("lessonComplete")],ge.prototype,"eventLessonComplete",null),Object(f["a"])([Object(p["e"])("useFullscreen")],ge.prototype,"useFullscreenToggle",null),ge=Object(f["a"])([Object(p["a"])({components:{LearnWordCard:xt,RadialProgressBar:ot.a,BlankCard:et,DictionaryModeSetter:ht}})],ge);var ye=ge,we=ye,Ce=Object(E["a"])(we,he,fe,!1,null,null,null),Te=Ce.exports,ke=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.notEnoughMoney=!1,t.error=null,t.wordsToLearn=[],t.wordsAreLoading=!1,t.loginWarnAccepted=!1,t}return Object(h["a"])(e,t),Object(l["a"])(e,[{key:"function",value:function(){this.initDictionary()}},{key:"lessonChanged",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$forceUpdate(),this.notEnoughMoney=!1,!this.currentLesson||!this.isCurrentLessonAdded){t.next=6;break}return t.next=5,this.$nextTick();case 5:this.initDictionary();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"loadLessonWords",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$nextTick();case 2:return this.wordsToLearn=[],t.next=5,q.loadWords(O.state.currentLessonNumber);case 5:return console.log(q.words),q.words.forEach(function(t){return e.wordsToLearn.push(new zt(t))}),t.next=9,this.$nextTick();case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"addLessonPack",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.post("/dictionary/add-packets/",{packets:[O.state.currentLessonNumber],activate:!0});case 2:if(e=t.sent,e.data.errors.length&&this.isAuthenticated){t.next=10;break}return this.currentLesson.added=!0,t.next=7,this.$forceUpdate();case 7:this.initDictionary(),t.next=12;break;case 10:this.error=e.data.errors[0],this.$forceUpdate();case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"initDictionary",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isAuthenticated||this.loginWarnAccepted){t.next=2;break}return t.abrupt("return");case 2:return console.log("Init dictionary"),q.setErrors([]),t.next=6,this.$nextTick();case 6:return t.next=8,this.$nextTick();case 8:if(!["learn","repeat","verbs"].find(function(t){return t===e.dictionaryMode})){t.next=11;break}return t.next=11,this.loadLessonWords();case 11:if("learn"!==this.dictionaryMode){t.next=16;break}return t.next=14,this.$refs.learnDictionary.initDictinonary(this.wordsToLearn);case 14:t.next=29;break;case 16:if("repeat"!==this.dictionaryMode){t.next=21;break}return t.next=19,this.$refs.repeatDictionary.initDictinonary();case 19:t.next=29;break;case 21:if("self-check"!==this.dictionaryMode){t.next=26;break}return t.next=24,this.$refs.selfCheckDictionary.initDictinonary(this.wordsToLearn);case 24:t.next=29;break;case 26:if("verbs"!==this.dictionaryMode){t.next=29;break}return t.next=29,this.$refs.verbsDictionary.initDictinonary();case 29:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"unselectLesson",value:function(){O.dispatch("setCurrentLesson",null)}},{key:"isAppInitialized",get:function(){return O.state.isAppInitialized}},{key:"isAuthenticated",get:function(){return!!this.currentLesson&&this.currentLesson.isAuthenticated}},{key:"dictionaryMode",get:function(){return this.$store.state.dictionaryMode}},{key:"isCurrentLessonAdded",get:function(){return this.currentLesson&&(this.currentLesson.added||this.currentLesson.demo&&!_.isAuthenticated)}},{key:"currentLesson",get:function(){return O.state.currentLesson}}]),e}(p["d"]);Object(f["a"])([Object(p["e"])("dictionaryMode")],ke.prototype,"function",null),Object(f["a"])([Object(p["e"])("currentLesson")],ke.prototype,"lessonChanged",null),ke=Object(f["a"])([Object(p["a"])({components:{VerbsDictionary:Te,SelfCheckWordsDictionary:de,RepeatWordsDictionary:se,LearnWordsDictionary:At,BlankCard:et}})],ke);var We=ke,Oe=We,Le=Object(E["a"])(Oe,F,U,!1,null,null,null),_e=Le.exports;s["default"].use(B["a"]);var Se=new B["a"]({mode:"history",base:"/static/dictionary/",routes:[{path:"*",name:"main",component:_e}]}),je=n("5f5b");function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(n,!0).forEach(function(e){Object(r["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}s["default"].use(je["a"]),s["default"].config.productionTip=!1;var Pe=document.querySelector("#dict-app");new s["default"]({router:Se,store:O,render:function(t){var e={props:Ee({},Pe.dataset)};return t(M,e)}}).$mount("#dict-app")},d25c:function(t,e,n){t.exports=n.p+"img/next_step_white.svg"},d9c4:function(t,e,n){t.exports=n.p+"img/next_step.svg"},e332:function(t,e,n){},e587:function(t,e,n){t.exports=n.p+"img/remember.svg"},efaf:function(t,e,n){t.exports=n.p+"media/silence.mp3"},f3d2:function(t,e,n){t.exports=n.p+"img/coffee.svg"},f4a8:function(t,e,n){t.exports=n.p+"img/key.svg"},f635:function(t,e,n){t.exports=n.p+"img/sound_off.svg"}});