(function(t){function e(e){for(var n,o,i=e[0],c=e[1],d=e[2],u=0,h=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},s={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/static/dictionary/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var d=0;d<i.length;d++)e(i[d]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"0164":function(t,e,r){t.exports=r.p+"img/learn.ecebc089.svg"},"0818":function(t,e,r){t.exports=r.p+"img/add_words.09bd7b1d.svg"},"18d4":function(t,e,r){t.exports=r.p+"img/pause.173288f8.svg"},"21e7":function(t,e,r){t.exports=r.p+"img/previous.c6da65d7.svg"},"35fe":function(t,e,r){t.exports=r.p+"img/next.def9b092.svg"},"53e0":function(t,e,r){t.exports=r.p+"img/play.16146fde.svg"},"5c0b":function(t,e,r){"use strict";var n=r("e332"),s=r.n(n);s.a},"75a3":function(t,e,r){t.exports=r.p+"img/repeat.8f852bf0.svg"},7720:function(t,e,r){t.exports=r.p+"img/heart.cc773a43.svg"},7831:function(t,e,r){t.exports=r.p+"img/dont_remember.455df279.svg"},8462:function(t,e,r){t.exports=r.p+"img/heart-arrow.a7e327ca.svg"},"8a17":function(t,e,r){t.exports=r.p+"img/pause_time.f9c5cfd1.svg"},"9ff2":function(t,e,r){t.exports=r.p+"img/keyhole.da74ef8e.svg"},a306:function(t,e,r){t.exports=r.p+"img/btn-add-words.dad1585f.svg"},b263:function(t,e,r){t.exports=r.p+"img/full_screen.c4ebc905.svg"},bcb3:function(t,e,r){t.exports=r.p+"img/sound_on.baa62bda.svg"},c8fa:function(t,e,r){t.exports=r.p+"img/menu.356e787e.svg"},cd49:function(t,e,r){"use strict";r.r(e);r("14c6"),r("08c1"),r("4842"),r("d9fc");var n=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xl-3 text-left col-lg-12 mb-3"},[r("LessonList")],1),r("div",{staticClass:"col"},[r("router-view")],1)])])},a=[],o=r("d225"),i=r("308d"),c=r("6bb5"),d=r("4e2b"),l=r("60a3"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"lessons-list"}},[n("h4",{staticClass:"mb-3"},[t._v("Уроки:")]),t.lessonsLoaded?t._e():n("div",{staticClass:"pl-4 my-4"},[n("b-spinner",{attrs:{label:"Loading...",width:"24",variant:"dark"}})],1),t._l(t.lessons,function(e){return n("a",{staticClass:"btn-lesson d-inline-flex d-xl-flex d-lg-inline-flex mb-2 mr-2",class:{active:e.pk===t.lessonNumber,activated:e.activated,added:e.added,learned:e.wordsLearned},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.setLesson(e)}}},[n("span",[t._v(t._s(e.name))]),e.learned?n("img",{attrs:{src:r("8462"),width:"22"}}):e.added?n("img",{attrs:{src:r("7720"),width:"22"}}):e.activated?n("img",{attrs:{src:r("a306"),height:"16"}}):n("img",{attrs:{src:r("f3d2"),width:"22"}})])})],2)},h=[],f=(r("96cf"),r("3b8d")),p=r("b0b4"),v=r("9ab4"),m=r("6fc5"),b=r("2f62"),w=r("bc3a"),g=r.n(w),T={baseURL:"/",withCredentials:!0};var C=g.a.create(T);var y=C;n["default"].use(b["a"]);var O={state:{currentLesson:0,slideTimerInterval:2,wordNumber:0,wordsCount:0,wordChangeInterval:2,useFullscreen:!1,corsProxyUrl:"https://cors-anywhere.herokuapp.com/",cardMode:"learn",showWordTranslation:!1},mutations:{SET_CURRENT_LESSON:function(t,e){t.currentLesson=e},SET_TIMER_INTERVAL:function(t,e){t.slideTimerInterval=e},SET_WORD_CHANGE_INTERVAL:function(t,e){t.wordChangeInterval=e},SET_WORD_NUMBER:function(t,e){t.wordNumber=e},SET_WORDS_COUNT:function(t,e){t.wordsCount=e},SET_FULLSCREEN_MODE:function(t,e){t.useFullscreen=e},SET_CARD_MODE:function(t,e){t.cardMode=e},SET_SHOW_WORD_TRANSLATION:function(t,e){t.showWordTranslation=e}},actions:{setCurrentLesson:function(t,e){var r=t.commit;return r("SET_CURRENT_LESSON",e),y.post("/dictionary/add-packets/",{packets:[e]})},setSlideTimerInterval:function(t,e){var r=t.commit;e>5&&(e=1),r("SET_TIMER_INTERVAL",e)},setWordChangeInterval:function(t,e){var r=t.commit;e>5&&(e=1),r("SET_WORD_CHANGE_INTERVAL",e)},setWordNumber:function(t,e){(e>=t.state.wordsCount||e<0)&&(e=0),t.commit("SET_WORD_NUMBER",e)},setWordsCount:function(t,e){var r=t.commit;r("SET_WORDS_COUNT",e)},setFullscreenMode:function(t,e){var r=t.commit;r("SET_FULLSCREEN_MODE",e)},setCardMode:function(t,e){var r=t.commit;r("SET_CARD_MODE",e)},showWordTranslation:function(t,e){var r=t.commit;r("SET_SHOW_WORD_TRANSLATION",e)}}},_=new b["a"].Store(O),W=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.lessons=[],t}return Object(d["a"])(e,t),Object(p["a"])(e,[{key:"setLessons",value:function(t){this.lessons=t}},{key:"loadLessons",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.get("/dictionary/progress");case 2:return e=t.sent,t.abrupt("return",e.data.packets);case 4:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()}]),e}(m["d"]);Object(v["a"])([m["c"]],W.prototype,"setLessons",null),Object(v["a"])([Object(m["a"])({commit:"setLessons"})],W.prototype,"loadLessons",null),W=Object(v["a"])([Object(m["b"])({namespaced:!0,name:"LessonsModule",store:_,dynamic:!0})],W);var k=Object(m["e"])(W),L=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.lessonsLoaded=!1,t}return Object(d["a"])(e,t),Object(p["a"])(e,[{key:"setLesson",value:function(t){t.added=!0,_.dispatch("setCurrentLesson",t.pk)}},{key:"mounted",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.loadLessons();case 2:this.lessonsLoaded=!0;case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"lessons",get:function(){return k.lessons}},{key:"lessonNumber",get:function(){return _.state.currentLesson}}]),e}(l["c"]);L=Object(v["a"])([Object(l["a"])({})],L);var j,x,S=L,E=S,N=r("2877"),M=Object(N["a"])(E,u,h,!1,null,"05d83a3f",null),P=M.exports,R=(j=Object(l["a"])({components:{LessonList:P}}),j(x=function(t){function e(){return Object(o["a"])(this,e),Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),e}(l["c"]))||x),I=R,D=(r("5c0b"),Object(N["a"])(I,s,a,!1,null,null,null)),A=D.exports,F=r("8c4f"),H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[t._e(),t.lessonIsLoading?n("div",[n("div",{staticClass:"text-center page-loading"},[n("h3",[t._v("Загрузка...")]),n("b-spinner",{attrs:{label:"Загрузка...",variant:"dark"}})],1)]):[!1===t.lessonComplete?[t._e(),t.wordsCount>0?n("div",{staticClass:"row"},[n("div",{staticClass:"col d-flex align-items-center justify-content-center next-step-block"},[n("span",{class:{active:"learn"===t.cardMode}},[t._v("Запоминаем")]),"learn"===t.cardMode?n("a",{staticClass:"d-flex justify-content-center flex-column align-items-center",class:{filled:t.learntWordsCount===t.wordsCount},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setCardMode("self-check")}}},[n("radial-progress-bar",{attrs:{diameter:66,"completed-steps":t.learntWordsCount,"start-color":"#1972bc","stop-color":"#1972bc","total-steps":t.wordsCount}},[n("div",[n("img",{attrs:{src:r("d9c4")}}),n("img",{attrs:{src:r("d25c")}})])])],1):t._e(),"learn"!==t.cardMode?n("a",{staticClass:"d-flex justify-content-center flex-column align-items-center filled",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.setCardMode("learn")}}},[n("img",{staticClass:"rotated",attrs:{src:r("d25c")}})]):t._e(),n("span",{class:{active:"learn"!==t.cardMode}},[t._v("Проверяем")])])]):t._e(),n("fullscreen",{ref:"fullscreen"},[t.wordsCount>0?n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col text-center"},[n("WordCard",{attrs:{wordToLearn:t.currentWordToLearn,learntWordsCount:t.learntWordsCount}})],1)]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-progress",{attrs:{value:t.lessonProgress,height:"8px",id:"learn-progress-bar"}})],1)]),"learn"===t.cardMode?n("div",{staticClass:"row d-flex align-items-center"},[n("div",{staticClass:"col d-flex justify-content-between"},[n("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.setWordNumber(t.currentWordNumber-1)}}},[n("img",{attrs:{src:r("21e7")}})]),n("button",{staticClass:"btn btn-info btn-nav btn-narrow",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.banWord()}}},[n("img",{attrs:{src:r("7831")}})]),n("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.showWordTranslation()}}},[n("img",{attrs:{src:r("35fe")}})])])]):"self-check"===t.cardMode?n("div",{staticClass:"row d-flex align-items-center"},[n("div",{staticClass:"col d-flex justify-content-between"},[n("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button",disabled:!t.currentWordToLearn.revealed},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!0)}}},[n("img",{attrs:{src:r("e587")}}),n("span",{staticClass:"d-none d-md-inline"},[t._v("Помню")])]),n("button",{staticClass:"btn btn-info btn-nav btn-wide mx-2",attrs:{type:"button",disabled:t.currentWordToLearn.revealed},on:{click:function(e){return e.stopPropagation(),t.currentWordToLearn.revealWord()}}},[n("img",{attrs:{src:r("f4a8")}}),n("span",{staticClass:"d-none d-md-inline"},[t._v("Ответ")])]),n("button",{staticClass:"btn btn-info btn-nav",attrs:{type:"button",disabled:!t.currentWordToLearn.revealed},on:{click:function(e){return e.stopPropagation(),t.setWordMemoryState(!1)}}},[n("img",{attrs:{src:r("7831")}}),n("span",{staticClass:"d-none d-md-inline"},[t._v("Не помню")])])])]):t._e()]):t._e()])]:t.lessonComplete?[t._m(3)]:t._e()]],2)},U=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col d-flex align-items-center mb-4"},[n("button",{staticClass:"btn btn-info mr-2",attrs:{type:"button",disabled:"disabled"}},[n("img",{attrs:{src:r("0818"),width:"12"}})]),t._v("\n            Добавить слова N-ого урока\n        ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col text-center"},[n("div",{staticClass:"mode-icon active"},[n("img",{attrs:{src:r("0164"),alt:"Учить слова"}}),n("p",[t._v("Учить")]),n("span")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col text-center"},[n("div",{staticClass:"mode-icon"},[n("img",{attrs:{src:r("75a3"),alt:"Повторять слова"}}),n("p",[t._v("Повторять")]),n("span")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("h1",{staticClass:"lesson-complete"},[t._v("Все слова выучены!")])])])}],$=(r("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.word?n("div",{ref:"wordcard",staticClass:"word-card",class:t.wordSexClass},[n("div",{staticClass:"dummy-row"},[t._v(" ")]),n("span",{staticClass:"word-card-phrase"},["learn"===t.cardMode?[t._v("\n            "+t._s(t.wordLabel)+"\n        ")]:[t._v("\n            "+t._s(t.wordTranslation)+"\n        ")]],2),!1===t.translateTimerEnabled&&"learn"===t.cardMode?n("span",{staticClass:"play-button",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[n("img",{attrs:{src:r("53e0")}})]):t._e(),!0===t.translateTimerEnabled&&"learn"===t.cardMode?n("span",{staticClass:"pause-button invis",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleTimer()}}},[n("img",{attrs:{src:r("18d4")}})]):t._e(),"learn"===t.cardMode?n("div",{staticClass:"word-card-phrase",class:{invisible:!t.showTranslation}},[t._v("\n        "+t._s(t.wordTranslation)+"\n    ")]):t._e(),"learn"!==t.cardMode?n("div",{staticClass:"word-card-phrase"},[t.wordToLearn.isWordRevealed()?[t._v("\n            "+t._s(t.wordLabel)+"\n        ")]:[t.showCharacterPlaceholders?n("div",{staticClass:"word-characters-block"},t._l(t.wordCharacters,function(e){return n("span",{staticClass:"word-character",class:{shown:e.shown}},[t._v("\n                    "+t._s(e.shown?e.character:"")+"\n                ")])}),0):t._e()]],2):t._e(),n("div",{staticClass:"dummy-row2"},[t._v(" ")]),n("a",{staticClass:"show-hint-button",class:{invisible:"learn"===t.cardMode||t.wordToLearn.isWordRevealed()},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.showHint(e)}}},[n("img",{attrs:{src:r("9ff2")}})]),n("div",{staticClass:"info-row"},[n("div",{staticClass:"timer-block ml-4",class:{invisible:"learn"!==t.cardMode}},[n("div",{staticClass:"d-flex align-items-center"},[n("a",{staticClass:"invis mr-2",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.changeTranslateTimerInterval(e)}}},[n("img",{attrs:{src:r("8a17"),height:"20"}})]),t._l(t.translateTimerInterval,function(e){return n("span",{staticClass:"timer-dot mr-1",class:{passed:e<=t.translateTimerSecondsPassed}})})],2)]),n("div",{staticClass:"settings-block mr-4"},[n("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleSoundEnabled(e)}}},[t.soundEnabled?n("img",{attrs:{src:r("bcb3"),height:"20"}}):t._e(),t.soundEnabled?t._e():n("img",{staticClass:"play-sound-off",attrs:{src:r("f635"),height:"20"}})]),n("a",{staticClass:"mr-2 invis",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.toggleFullscreen(e)}}},[n("img",{attrs:{src:r("b263"),height:"20"}})]),n("a",{staticClass:"invis",class:{visible:t.settingsPopoverOpened},attrs:{href:"#",id:"settings-popover-button"},on:{click:function(t){t.preventDefault(),t.stopPropagation()}}},[n("img",{attrs:{src:r("c8fa"),height:"20"}}),n("b-popover",{attrs:{target:"settings-popover-button","custom-class":"settings-popover",triggers:"click blur",placement:"top"},on:{shown:function(e){t.settingsPopoverOpened=!0},hidden:function(e){t.settingsPopoverOpened=!1}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Настройки")]},proxy:!0}],null,!1,3100224662)},[n("p",[n("label",{attrs:{for:"select-translation-direction"}},[t._v("Направление перевода:")]),n("br"),n("select",{directives:[{name:"model",rawName:"v-model",value:t.translationDirection,expression:"translationDirection"}],staticClass:"form-control-sm",attrs:{id:"select-translation-direction"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.translationDirection=e.target.multiple?r:r[0]}}},[n("option",{attrs:{value:"fr-ru"}},[t._v("Французский → русский")]),n("option",{attrs:{value:"ru-fr"}},[t._v("Русский → французский")])])]),n("p",[n("label",{attrs:{for:"select-timer-interval"}},[t._v("Задержка после показа слова:")]),n("br"),n("select",{directives:[{name:"model",rawName:"v-model.number",value:t.translateTimerInterval,expression:"translateTimerInterval",modifiers:{number:!0}}],staticClass:"form-control-sm",attrs:{id:"select-timer-interval"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var r="_value"in e?e._value:e.value;return t._n(r)});t.translateTimerInterval=e.target.multiple?r:r[0]}}},t._l(5,function(e){return n("option",[t._v(t._s(e))])}),0)]),n("p",[n("label",{attrs:{for:"select-change-interval"}},[t._v("Задержка после показа перевода:")]),n("br"),n("select",{staticClass:"form-control-sm",attrs:{id:"select-change-interval"},domProps:{value:t.wordChangeInterval},on:{change:t.setWordChangeInterval}},t._l(5,function(e){return n("option",[t._v(t._s(e))])}),0)])])],1)])])]):t._e()}),V=[],B=r("1e5c"),Q=r("66d4"),G=r.n(Q),J=r("1157"),q=r.n(J),z=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.translateTimerEnabled=!1,t.translateTimerSecondsPassed=0,t.translateTimerInterval=2,t.showTranslation=!1,t.soundEnabled=!0,t.showCharacterPlaceholders=!1,t.settingsPopoverOpened=!1,t.translationDirection="fr-ru",t}return Object(d["a"])(e,t),Object(p["a"])(e,[{key:"wordChanged",value:function(){this.showCharacterPlaceholders=!1,this.showTranslation=!1,this.translateTimerSecondsPassed=0,this.soundOfTranslation&&this.soundOfTranslation.stop(),this.soundOfWord&&this.soundOfWord.stop(),this.timer.stop(),this.changeWordTimer.stop(),"self-check"===this.cardMode&&this.beforeTimerStarted(),this.translateTimerEnabled&&this.toggleTimer(!0),this.wordToLearn&&(this.wordToLearn.shown=!0)}},{key:"wordToLearnChanged",value:function(t){t&&this.soundEnabled&&this.playSound(!1)}},{key:"cardModeChanged",value:function(t){"self-check"===t&&this.beforeTimerStarted()}},{key:"toggleSoundEnabled",value:function(){this.soundEnabled=!this.soundEnabled}},{key:"showHint",value:function(){if(void 0!==this.wordToLearn)if(this.showCharacterPlaceholders){for(var t in this.wordCharacters)if(!this.wordCharacters[t].shown){this.wordCharacters[t].show(!0);break}this.wordToLearn.revealed=this.wordToLearn.isWordRevealed()}else this.showCharacterPlaceholders=!0}},{key:"getSoundOfWord",value:function(){if(this.soundOfWord=new B["Howl"]({src:[r("efaf")],loop:!1}),void 0===this.word)return this.soundOfWord;var t=this.word.pollyUrl;if(!t)return this.soundOfWord;this.soundOfWord=new B["Howl"]({src:[t],preload:!0,loop:!1,buffer:!0,html5:!0})}},{key:"getSoundOfTranslation",value:function(){if(this.soundOfTranslation=new B["Howl"]({src:[r("efaf")],loop:!1}),void 0===this.word||void 0===this.word.translations||null===this.word.translations)return this.soundOfTranslation;var t=this.word.translations[0].pollyUrl;if(!t)return this.soundOfTranslation;this.soundOfTranslation=new B["Howl"]({src:[t],preload:!0,loop:!1,buffer:!0,html5:!0})}},{key:"playSoundOfWord",value:function(){var t=this;return new Promise(function(e,r){var n=t.soundOfWord;t.soundEnabled?n&&(n.once("end",function(){e()}),n.play()):e()})}},{key:"playSoundOfTranslation",value:function(){var t=this;return new Promise(function(e,r){var n=t.soundOfTranslation;t.soundEnabled?n&&(n.once("end",function(){e()}),n.play()):e()})}},{key:"toggleFullscreen",value:function(){_.dispatch("setFullscreenMode",!_.state.useFullscreen)}},{key:"showWordTranslation",value:function(){var t=this;this.showTranslation||"learn"===this.cardMode&&!this.translateTimerEnabled?_.dispatch("setWordNumber",_.state.wordNumber+1):(this.showTranslation=!0,this.translateTimerSecondsPassed=this.translateTimerInterval,this.wordToLearn&&(this.wordToLearn.learnt=!0),this.playSound(!0).then(function(){"learn"===t.cardMode&&(t.changeWordTimer.start({precision:"seconds",startValues:{seconds:0},target:{seconds:t.wordChangeInterval}}),t.translateTimerEnabled||t.changeWordTimer.pause())}))}},{key:"setWordChangeInterval",value:function(t){_.dispatch("setWordChangeInterval",parseInt(t.target.value,10))}},{key:"changeTranslateTimerInterval",value:function(){return!(++this.translateTimerInterval>5)||(this.translateTimerInterval=1,!1)}},{key:"beforeTimerStarted",value:function(){this.getSoundOfWord(),this.getSoundOfTranslation(),this.soundEnabled&&this.playSound("learn"!==this.cardMode)}},{key:"playSound",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&"fr-ru"===this.translationDirection||!t&&"ru-fr"===this.translationDirection&&"learn"===this.cardMode?this.playSoundOfTranslation():this.playSoundOfWord()}},{key:"changeWord",value:function(){this.translateTimerEnabled&&_.dispatch("setWordNumber",_.state.wordNumber+1)}},{key:"toggleTimer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("learn"===this.cardMode){if(this.translateTimerEnabled=t||!this.translateTimerEnabled,!this.translateTimerEnabled)return this.timer.isRunning()&&this.timer.pause(),void(this.changeWordTimer.isRunning()&&this.changeWordTimer.pause());this.changeWordTimer.isPaused()?this.changeWordTimer.start():this.timer.isPaused()?this.timer.start():this.timer.start({precision:"seconds",startValues:{seconds:this.translateTimerSecondsPassed},target:{seconds:this.translateTimerInterval}})}}},{key:"eventShowWordTranslation",value:function(t){t&&(this.showWordTranslation(),_.dispatch("showWordTranslation",!1))}},{key:"beforeDestroy",value:function(){this.timer.stop(),this.changeWordTimer.stop()}},{key:"mounted",value:function(){var t=this,e=_.state.currentLesson;this.timer=new G.a,this.timer.addEventListener("secondsUpdated",function(e){t.translateTimerSecondsPassed++}),this.timer.addEventListener("started",function(e){t.translateTimerEnabled=!0,0===t.translateTimerSecondsPassed&&t.beforeTimerStarted()}),this.timer.addEventListener("targetAchieved",function(e){t.translateTimerEnabled&&t.showWordTranslation()}),this.changeWordTimer=new G.a,this.changeWordTimer.addEventListener("targetAchieved",function(r){e===_.state.currentLesson&&t.changeWord()}),this.lastFadeoutAnimationStarted=Date.now(),q()(".word-card").off("mousemove"),q()(".word-card").on("mousemove",function(){if(!(Date.now()-t.lastFadeoutAnimationStarted<1e3)){t.lastFadeoutAnimationStarted=Date.now();var e=q()(".word-card:hover .invis");e.removeClass("run-fadeout-animation"),e[0].offsetWidth,e.addClass("run-fadeout-animation")}}),this.wordChanged()}},{key:"wordId",get:function(){return _.state.currentLesson+"-"+this.wordNumber}},{key:"word",get:function(){if(this.wordToLearn)return this.wordToLearn.word}},{key:"cardMode",get:function(){return _.state.cardMode}},{key:"wordSexClass",get:function(){return this.word?{"sex-male":"m"===this.word.gender,"sex-female":"f"===this.word.gender,"sex-none":null===this.word.gender}:{}}},{key:"wordNumber",get:function(){return _.state.wordNumber}},{key:"wordsCount",get:function(){return _.state.wordsCount}},{key:"wordLabel",get:function(){return void 0===this.word?"":"ru-fr"===this.translationDirection&&"learn"===this.cardMode&&void 0!==this.word.translations&&null!==this.word.translations?this.word.translations[0].translation:this.word.word}},{key:"wordTranslation",get:function(){return void 0===this.word||void 0===this.word.translations||null===this.word.translations?"":"ru-fr"===this.translationDirection&&"learn"===this.cardMode?this.word.word:this.word.translations[0].translation}},{key:"wordCharacters",get:function(){return void 0===this.wordToLearn?[]:this.wordToLearn.wordCharacters}},{key:"wordChangeInterval",get:function(){return _.state.wordChangeInterval}},{key:"isShowWordTranslation",get:function(){return _.state.showWordTranslation}}]),e}(l["c"]);Object(v["a"])([Object(l["b"])()],z.prototype,"wordToLearn",void 0),Object(v["a"])([Object(l["b"])()],z.prototype,"learntWordsCount",void 0),Object(v["a"])([Object(l["d"])("word")],z.prototype,"wordChanged",null),Object(v["a"])([Object(l["d"])("wordToLearn.revealed")],z.prototype,"wordToLearnChanged",null),Object(v["a"])([Object(l["d"])("cardMode")],z.prototype,"cardModeChanged",null),Object(v["a"])([Object(l["d"])("isShowWordTranslation")],z.prototype,"eventShowWordTranslation",null),z=Object(v["a"])([Object(l["a"])({})],z);var K=z,X=K,Y=Object(N["a"])(X,$,V,!1,null,null,null),Z=Y.exports,tt=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.words=[],t}return Object(d["a"])(e,t),Object(p["a"])(e,[{key:"setWords",value:function(t){this.words=t}},{key:"loadWords",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.get("/dictionary/repeat-words/"+e);case 2:return r=t.sent,t.abrupt("return",r.data.words);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),e}(m["d"]);Object(v["a"])([m["c"]],tt.prototype,"setWords",null),Object(v["a"])([Object(m["a"])({commit:"setWords"})],tt.prototype,"loadWords",null),tt=Object(v["a"])([Object(m["b"])({namespaced:!0,name:"WordsModule",store:_,dynamic:!0})],tt);var et=Object(m["e"])(tt),rt=(r("a481"),r("28a5"),function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(o["a"])(this,t),this.character=e,this.shown=r,this.shownAsHint=n}return Object(p["a"])(t,[{key:"show",value:function(t){this.shown=!0,this.shownAsHint=t}}]),t}()),nt=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(o["a"])(this,t),this.banned=!1,this.word=e,this.learnt=n,this.shown=!1,this.remember=null,this.revealed=!1,this.wordCharacters=[],this.word.word.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){r.wordCharacters.push(new rt(t))}),this.translationCharacters=[],this.word.translations&&this.word.translations[0].translation.replace(/\(.*\)/gm,"").trim().split("").forEach(function(t){r.translationCharacters.push(new rt(t))})}return Object(p["a"])(t,[{key:"translationCharactersShownNumber",value:function(){return this.translationCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"wordCharactersShownNumber",value:function(){return this.wordCharacters.reduce(function(t,e){return t+(e.shown?1:0)},0)}},{key:"isWordRevealed",value:function(){return this.wordCharacters.length===this.wordCharactersShownNumber()||this.translationCharacters.length===this.translationCharactersShownNumber()}},{key:"revealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!0}),this.translationCharacters.forEach(function(t){t.shown=!0}),this.revealed=!0}},{key:"unrevealWord",value:function(){this.wordCharacters.forEach(function(t){t.shown=!1}),this.translationCharacters.forEach(function(t){t.shown=!1}),this.revealed=!1}},{key:"banWord",value:function(){return this.revealed=!0,this.shown=!0,this.remember=!0,this.learnt=!0,this.banned=!0,this.updateWordQuery(this.word.pk,!0,0)}},{key:"updateWordState",value:function(){return this.updateWordQuery(this.word.pk,null===this.remember||this.remember,this.hintsShown())}},{key:"hintsShown",value:function(){var t=this.wordCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0),e=this.translationCharacters.reduce(function(t,e){return t+(e.shownAsHint?1:0)},0);return t+e}},{key:"updateWordQuery",value:function(t,e,r){return y.post("/dictionary/update-words/",{words:[{pk:t,grade:e,mistakes:r}]})}}]),t}(),st=r("03cd"),at=r.n(st),ot=r("531a"),it=r.n(ot);l["c"].use(at.a);var ct=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.wordsToLearn=[],t.lessonComplete=!1,t.lessonIsLoading=!1,t}return Object(d["a"])(e,t),Object(p["a"])(e,[{key:"onLessonNumberChanged",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.lessonIsLoading=!0,t.next=3,this.$nextTick();case 3:return this.wordsToLearn=[],this.lessonComplete=!1,t.next=7,_.dispatch("setCardMode","learn");case 7:return t.next=9,et.loadWords(this.lessonNumber);case 9:return et.words.forEach(function(t){return e.wordsToLearn.push(new nt(t))}),t.next=12,_.dispatch("setWordsCount",this.wordsToLearn.length);case 12:this.setWordNumber(0),this.lessonIsLoading=!1;case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"banWord",value:function(){var t=this;this.currentWordToLearn.banWord(),this.wordsToLearn=this.wordsToLearn.filter(function(e){return e!==t.currentWordToLearn}),_.dispatch("setWordsCount",this.wordsToLearn.length),_.state.wordNumber>=this.wordsToLearn.length&&this.setWordNumber(0)}},{key:"setWordNumber",value:function(t){_.dispatch("setWordNumber",t)}},{key:"setCardMode",value:function(t){this.learntWordsCount===this.wordsCount&&(_.dispatch("setCardMode",t),_.dispatch("setWordNumber",0))}},{key:"setWordMemoryState",value:function(t){if(this.currentWordToLearn)if(this.rememberedWordsCount!==this.wordsCount){this.currentWordToLearn.remember=t,this.currentWordToLearn.updateWordState(),t||this.currentWordToLearn.unrevealWord();for(var e=!1,r=this.currentWordNumber+1;r<this.wordsCount;r++)if(!0!==this.wordsToLearn[r].remember){this.setWordNumber(r),e=!0;break}if(!e){for(var n=0;n<this.wordsCount;n++)if(!0!==this.wordsToLearn[n].remember){this.setWordNumber(n),e=!0;break}e||(this.lessonComplete=!0)}}else this.lessonComplete=!0}},{key:"useFullscreenToggle",value:function(){this.$refs.fullscreen.toggle()}},{key:"showWordTranslation",value:function(){_.dispatch("showWordTranslation",!0)}},{key:"learntWordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.filter(function(t){var e=t.learnt;return!0===e}).length:0}},{key:"rememberedWordsCount",get:function(){return this.wordsToLearn.filter(function(t){var e=t.remember;return!0===e}).length}},{key:"lessonNumber",get:function(){return _.state.currentLesson}},{key:"currentWordToLearn",get:function(){return this.wordsToLearn[this.currentWordNumber]}},{key:"wordsCount",get:function(){return this.wordsToLearn&&this.wordsToLearn.length?this.wordsToLearn.length:0}},{key:"lessonProgress",get:function(){return"learn"===this.cardMode?100/(this.wordsCount-1)*this.currentWordNumber:100/(this.wordsCount-1)*this.rememberedWordsCount}},{key:"currentWordNumber",get:function(){return _.state.wordNumber}},{key:"useFullscreen",get:function(){return _.state.useFullscreen}},{key:"cardMode",get:function(){return _.state.cardMode}}]),e}(l["c"]);Object(v["a"])([Object(l["d"])("lessonNumber")],ct.prototype,"onLessonNumberChanged",null),Object(v["a"])([Object(l["d"])("useFullscreen")],ct.prototype,"useFullscreenToggle",null),ct=Object(v["a"])([Object(l["a"])({components:{WordCard:Z,RadialProgressBar:it.a}})],ct);var dt=ct,lt=dt,ut=Object(N["a"])(lt,H,U,!1,null,null,null),ht=ut.exports;n["default"].use(F["a"]);var ft=new F["a"]({mode:"history",base:"/static/dictionary/",routes:[{path:"*",name:"learn",component:ht}]}),pt=r("5f5b");n["default"].use(pt["a"]),n["default"].config.productionTip=!1,new n["default"]({router:ft,store:_,render:function(t){return t(A)}}).$mount("#app")},d25c:function(t,e,r){t.exports=r.p+"img/next_step_white.2843dc7a.svg"},d9c4:function(t,e,r){t.exports=r.p+"img/next_step.962d8a45.svg"},e332:function(t,e,r){},e587:function(t,e,r){t.exports=r.p+"img/remember.32f75583.svg"},efaf:function(t,e,r){t.exports=r.p+"media/silence.2b5bb705.mp3"},f3d2:function(t,e,r){t.exports=r.p+"img/coffee.0da6ac32.svg"},f4a8:function(t,e,r){t.exports=r.p+"img/key.b0a8bc9f.svg"},f635:function(t,e,r){t.exports=r.p+"img/sound_off.941872bb.svg"}});