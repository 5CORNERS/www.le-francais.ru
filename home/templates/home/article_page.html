{% extends "base.html" %}
{% load i18n %}
{% load comments %}
{% load comments_xtd %}
{% load static site_tags %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_js %}
    <script type="text/javascript"
            src="{% static 'components/bootstrap-treeview/dist/bootstrap-treeview.min.js' %}"></script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip({html: true})
        })
    </script>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'components/bootstrap-treeview/dist/bootstrap-treeview.min.css' %}">
{% endblock %}

{% block meta %}
    <meta name="nav-root-id" data-value="{{ self.get_nav_root.id }}">
    <meta name="page-id" data-value="{{ self.id }}">
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="sidebar-wrapper col-sm-3 _no-padding">
                <div id="sidebar"></div>
            </div>
            <button class="sidebar-collapse-button" type="button" data-toggle="toggle"
                    data-target=".sidebar-wrapper" aria-controls="sidebar" aria-expanded="false"
                    aria-label="Toggle sidebar">
                <div class="arrow-icon"></div>
            </button>
            <div class="col-12 col-sm-9 col-lg-6 col-xlg-6 main">
                {% breadcrumb calling_page=self %}
                <h1>{{ page.title }}</h1>
                {{ page.body | safe }}
                <div class="comments">
                    {% get_comment_count for page as comment_count %}
                    {% if comment_count %}
                        <hr/>
                        <ul class="comments_tree">
                            {% render_xtdcomment_tree for page allow_flagging allow_feedback show_feedback %}
                        </ul>
                    {% endif %}
                    {% if page.allow_comments %}
                        <div class="comment">
                            <div class="well">
                                {% render_comment_form for page %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
