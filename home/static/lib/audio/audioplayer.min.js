$(document).ready(function(){$("audio").audioPlayer()}),function(L,t,a,x){var T="ontouchstart"in t,M=T?"touchstart":"mousedown",V=T?"touchmove":"mousemove",j=T?"touchcancel":"mouseup",A=function(t){var e=Math.floor(t/3600),a=Math.floor(t%3600/60),o=Math.ceil(t%3600%60);return(0==e?"":e.toString().length<2?"0"+e:e)+(0==e?"":":")+(a.toString().length<2?"0"+a:a)+":"+(o.toString().length<2?"0"+o:o)},B=function(t){var e=a.createElement("audio");return!(!e.canPlayType||!e.canPlayType("audio/"+t.split(".").pop().toLowerCase()+";").replace(/no/,""))};L.fn.audioPlayer=function(E){E=L.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"},E);var S={},t={playPause:"playpause",playing:"playing",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",mute:"mute",mini:"mini",download:"download",downloadButton:"download-button"};for(var e in t)S[e]=E.classPrefix+"-"+t[e];return this.each(function(){if("audio"!=L(this).prop("tagName").toLowerCase())return!1;var t=L(this),e=t.attr("src"),a=""===(a=t.get(0).getAttribute("autoplay"))||"autoplay"===a,o=""===(o=t.get(0).getAttribute("loop"))||"loop"===o,n=!1;void 0===e?t.find("source").each(function(){if(void 0!==(e=L(this).attr("src"))&&B(e))return!(n=!0)}):B(e)&&(n=!0);var i=L('<div class="'+E.classPrefix+'">'+(n?L("<div>").append(t.eq(0).clone()).html():'<embed src="'+e+'" width="0" height="0" volume="100" autostart="'+a.toString()+'" loop="'+o.toString()+'" />')+'<div class="'+S.playPause+'" title="'+E.strPlay+'"><a href="#">'+E.strPlay+"</a></div></div>"),l=(l=n?i.find("audio"):i.find("embed")).get(0),r=L(l).attr("number");if(typeof r!=typeof x&&!1!==r)var d=i.clone();if(n){i.find("audio").css({width:0,height:0,visibility:"hidden"}),i.append('<div class="'+S.time+" "+S.timeCurrent+'"></div><div class="'+S.bar+'"><div class="'+S.barLoaded+'"></div><div class="'+S.barPlayed+'"></div></div><div class="'+S.time+" "+S.timeDuration+'"></div><div class="'+S.volume+'"><div class="'+S.volumeButton+'" title="'+E.strVolume+'"><a href="#">'+E.strVolume+'</a></div><div class="'+S.volumeAdjust+'"><div><div></div></div></div></div>');var u=L(l).attr("data-downloadable");if(typeof u!=typeof x&&!1!==u){var s=L(l).find("source").attr("src");i.append('<div class="'+S.download+'"><a download="true" href="'+s+'" class="'+S.downloadButton+' glyphicon glyphicon-download"></a></div>'),L(l).attr("id","lesson-audio"),L(l).attr("number",r)}var m=i.find("."+S.bar),v=i.find("."+S.barPlayed),f=(i.find("."+S.barLoaded),i.find("."+S.timeCurrent)),c=i.find("."+S.timeDuration),p=i.find("."+S.volumeButton),h=i.find("."+S.volumeAdjust+" > div"),y=0,g=function(t){theRealEvent=T?t.originalEvent.touches[0]:t,l.currentTime=Math.round(l.duration*(theRealEvent.pageX-m.offset().left)/m.width())},P=function(t){theRealEvent=T?t.originalEvent.touches[0]:t,l.volume=Math.abs((theRealEvent.pageY-(h.offset().top+h.height()))/h.height())},b=l.volume,C=l.volume=.111;Math.round(1e3*l.volume)/1e3==C?l.volume=b:i.addClass(S.noVolume),c.html("&hellip;"),f.text(A(0)),l.addEventListener("loadeddata",function(){c.text(A(l.duration)),h.find("div").height(100*l.volume+"%"),y=l.volume}),l.addEventListener("timeupdate",function(){f.text(A(l.currentTime)),v.width(l.currentTime/l.duration*100+"%");var t=L(l).attr("number");typeof t!=typeof x&&!1!==t&&(localStorage["lecon-"+t]=l.currentTime)}),l.addEventListener("volumechange",function(){h.find("div").height(100*l.volume+"%"),0<l.volume&&i.hasClass(S.mute)&&i.removeClass(S.mute),l.volume<=0&&!i.hasClass(S.mute)&&i.addClass(S.mute)}),l.addEventListener("ended",function(){i.removeClass(S.playing);var t=L(l).attr("number");typeof t!=typeof x&&!1!==t&&(localStorage.removeItem("lecon-"+t),d.removeClass(S.playing))}),m.on(M,function(t){g(t),m.on(V,function(t){g(t)})}).on(j,function(){m.off(V)}),p.on("click",function(){return i.hasClass(S.mute)?(i.removeClass(S.mute),l.volume=y):(i.addClass(S.mute),y=l.volume,l.volume=0),!1}),h.on(M,function(t){P(t),h.on(V,function(t){P(t)})}).on(j,function(){h.off(V)})}else i.addClass(S.mini);function w(t){return i.hasClass(S.playing)?(L(this).attr("title",E.strPlay).find("a").html(E.strPlay),typeof d!=typeof x&&(t?i.find("."+S.playPause).attr("title",E.strPlay).find("a").html(E.strPlay):d.find("."+S.playPause).attr("title",E.strPlay).find("a").html(E.strPlay),d.removeClass(S.playing)),i.removeClass(S.playing),n?l.pause():l.Stop()):(L(this).attr("title",E.strPause).find("a").html(E.strPause),typeof d!=typeof x&&(t?i.find("."+S.playPause).attr("title",E.strPause).find("a").html(E.strPause):d.find("."+S.playPause).attr("title",E.strPlay).find("a").html(E.strPause),d.addClass(S.playing)),i.addClass(S.playing),n?l.play():l.Play()),!1}typeof r!=typeof x&&!1!==r&&(typeof localStorage["lecon-"+r]!=typeof x&&"undefined"!==localStorage["lecon-"+r]&&(l.currentTime=+localStorage["lecon-"+r]),d.addClass(S.mini),d.attr("number",d.find("audio").attr("number")),d.find("audio").remove(),L(".navbar-header").prepend(d),d.find("."+S.playPause).on("click",function(t){return t.preventDefault(),w(!0)})),a&&i.addClass(S.playing),i.find("."+S.playPause).on("click",function(){return w(!1)}),t.replaceWith(i)}),this}}(jQuery,window,document);