"use strict";var FontInspector=(function FontInspectorClosure(){var h;var e=false;var f="data-font-name";function g(){var m=document.querySelectorAll("div["+f+"]");for(var k=0,l=m.length;k<l;++k){var n=m[k];n.className=""}}function i(){var m=document.querySelectorAll("div["+f+"]");for(var k=0,l=m.length;k<l;++k){var n=m[k];n.className="debuggerHideText"}}function d(o,k){var n=document.querySelectorAll("div["+f+"="+o+"]");for(var l=0,m=n.length;l<m;++l){var p=n[l];p.className=k?"debuggerShowText":"debuggerHideText"}}function b(o){if(!o.target.dataset.fontName||o.target.tagName.toUpperCase()!=="DIV"){return}var n=o.target.dataset.fontName;var m=document.getElementsByTagName("input");for(var l=0;l<m.length;++l){var k=m[l];if(k.dataset.fontName!==n){continue}k.checked=!k.checked;d(n,k.checked);k.scrollIntoView()}}return{id:"FontInspector",name:"Font Inspector",panel:null,manager:null,init:function j(m){var k=this.panel;k.setAttribute("style","padding: 5px;");var l=document.createElement("button");l.addEventListener("click",i);l.textContent="Refresh";k.appendChild(l);h=document.createElement("div");k.appendChild(h)},cleanup:function c(){h.textContent=""},enabled:false,get e(){return e},set e(k){e=k;if(e){document.body.addEventListener("click",b,true);i()}else{document.body.removeEventListener("click",b,true);g()}},fontAdded:function a(t,m){function r(A,z){var u=document.createElement("table");for(var w=0;w<z.length;w++){var y=document.createElement("tr");var x=document.createElement("td");x.textContent=z[w];y.appendChild(x);var v=document.createElement("td");v.textContent=A[z[w]].toString();y.appendChild(v);u.appendChild(y)}return u}var p=r(t,["name","type"]);var l=t.loadedName;var o=document.createElement("div");var n=document.createElement("span");n.textContent=l;var k=document.createElement("a");if(m){m=/url\(['"]?([^\)"']+)/.exec(m);k.href=m[1]}else{if(t.data){m=URL.createObjectURL(new Blob([t.data],{type:t.mimeType}));k.href=m}}k.textContent="Download";var q=document.createElement("a");q.href="";q.textContent="Log";q.addEventListener("click",function(u){u.preventDefault();console.log(t)});var s=document.createElement("input");s.setAttribute("type","checkbox");s.dataset.fontName=l;s.addEventListener("click",(function(u,v){return(function(){d(v,u.checked)})})(s,l));o.appendChild(s);o.appendChild(n);o.appendChild(document.createTextNode(" "));o.appendChild(k);o.appendChild(document.createTextNode(" "));o.appendChild(q);o.appendChild(p);h.appendChild(o);setTimeout(function(){if(this.active){i()}}.bind(this),2000)}}})();var opMap;var StepperManager=(function StepperManagerClosure(){var f=[];var j=null;var h=null;var a=null;var e=Object.create(null);return{id:"Stepper",name:"Stepper",panel:null,manager:null,init:function i(m){var k=this;this.panel.setAttribute("style","padding: 5px;");h=document.createElement("div");a=document.createElement("select");a.addEventListener("change",function(n){k.selectStepper(this.value)});h.appendChild(a);j=document.createElement("div");this.panel.appendChild(h);this.panel.appendChild(j);if(sessionStorage.getItem("pdfjsBreakPoints")){e=JSON.parse(sessionStorage.getItem("pdfjsBreakPoints"))}opMap=Object.create(null);for(var l in m.OPS){opMap[m.OPS[l]]=l}},cleanup:function b(){a.textContent="";j.textContent="";f=[]},enabled:false,active:false,create:function d(m){var o=document.createElement("div");o.id="stepper"+m;o.setAttribute("hidden",true);o.className="stepper";j.appendChild(o);var l=document.createElement("option");l.textContent="Page "+(m+1);l.value=m;a.appendChild(l);var n=e[m]||[];var k=new Stepper(o,m,n);f.push(k);if(f.length===1){this.selectStepper(m,false)}return k},selectStepper:function c(l,p){var n;l=l|0;if(p){this.manager.selectPanel(this)}for(n=0;n<f.length;++n){var k=f[n];if(k.pageIndex===l){k.panel.removeAttribute("hidden")}else{k.panel.setAttribute("hidden",true)}}var m=a.options;for(n=0;n<m.length;++n){var o=m[n];o.selected=(o.value|0)===l}},saveBreakPoints:function g(k,l){e[k]=l;sessionStorage.setItem("pdfjsBreakPoints",JSON.stringify(e))}}})();var Stepper=(function StepperClosure(){function i(c,j){var k=document.createElement(c);if(j){k.textContent=j}return k}function a(l){if(typeof l==="string"){var k=75;return l.length<=k?l:l.substr(0,k)+"..."}if(typeof l!=="object"||l===null){return l}if("length" in l){var p=[],n,o;var j=10;for(n=0,o=Math.min(j,l.length);n<o;n++){p.push(a(l[n]))}if(n<l.length){p.push("...")}return p}var c={};for(var m in l){c[m]=a(l[m])}return c}function f(j,c,k){this.panel=j;this.breakPoint=0;this.nextBreakPoint=null;this.pageIndex=c;this.breakPoints=k;this.currentIdx=-1;this.operatorListIdx=0}f.prototype={init:function g(m){var c=this.panel;var l=i("div","c=continue, s=step");var k=i("table");l.appendChild(k);k.cellSpacing=0;var j=i("tr");k.appendChild(j);j.appendChild(i("th","Break"));j.appendChild(i("th","Idx"));j.appendChild(i("th","fn"));j.appendChild(i("th","args"));c.appendChild(l);this.table=k;this.updateOperatorList(m)},updateOperatorList:function b(y){var v=this;function o(){var j=+this.dataset.idx;if(this.checked){v.breakPoints.push(j)}else{v.breakPoints.splice(v.breakPoints.indexOf(j),1)}StepperManager.saveBreakPoints(v.pageIndex,v.breakPoints)}var n=15000;if(this.operatorListIdx>n){return}var s=document.createDocumentFragment();var m=Math.min(n,y.fnArray.length);for(var B=this.operatorListIdx;B<m;B++){var r=i("tr");r.className="line";r.dataset.idx=B;s.appendChild(r);var p=this.breakPoints.indexOf(B)!==-1;var c=y.argsArray[B]||[];var z=i("td");var l=i("input");l.type="checkbox";l.className="points";l.checked=p;l.dataset.idx=B;l.onclick=o;z.appendChild(l);r.appendChild(z);r.appendChild(i("td",B.toString()));var q=opMap[y.fnArray[B]];var C=c;if(q==="showText"){var k=c[0];var u=[];var x=[];for(var A=0;A<k.length;A++){var t=k[A];if(typeof t==="object"&&t!==null){x.push(t.fontChar)}else{if(x.length>0){u.push(x.join(""));x=[]}u.push(t)}}if(x.length>0){u.push(x.join(""))}C=[u]}r.appendChild(i("td",q));r.appendChild(i("td",JSON.stringify(a(C))))}if(m<y.fnArray.length){r=i("tr");var w=i("td","...");w.colspan=4;s.appendChild(w)}this.operatorListIdx=y.fnArray.length;this.table.appendChild(s)},getNextBreakPoint:function h(){this.breakPoints.sort(function(k,j){return k-j});for(var c=0;c<this.breakPoints.length;c++){if(this.breakPoints[c]>this.currentIdx){return this.breakPoints[c]}}return null},breakIt:function d(c,m){StepperManager.selectStepper(this.pageIndex,true);var j=this;var l=document;j.currentIdx=c;var k=function(o){switch(o.keyCode){case 83:l.removeEventListener("keydown",k);j.nextBreakPoint=j.currentIdx+1;j.goTo(-1);m();break;case 67:l.removeEventListener("keydown",k);var n=j.getNextBreakPoint();j.nextBreakPoint=n;j.goTo(-1);m();break}};l.addEventListener("keydown",k);j.goTo(c)},goTo:function e(j){var k=this.panel.getElementsByClassName("line");for(var c=0,m=k.length;c<m;++c){var l=k[c];if((l.dataset.idx|0)===j){l.style.backgroundColor="rgb(251,250,207)";l.scrollIntoView()}else{l.style.backgroundColor=null}}}};return f})();var Stats=(function Stats(){var c=[];function a(e){while(e.hasChildNodes()){e.removeChild(e.lastChild)}}function b(e){for(var f=0,g=c.length;f<g;++f){if(c[f].pageNumber===e){return f}}return false}return{id:"Stats",name:"Stats",panel:null,manager:null,init:function d(e){this.panel.setAttribute("style","padding: 5px;");e.PDFJS.enableStats=true},enabled:false,active:false,add:function(m,g){if(!g){return}var j=b(m);if(j!==false){var k=c[j];this.panel.removeChild(k.div);c.splice(j,1)}var f=document.createElement("div");f.className="stats";var l=document.createElement("div");l.className="title";l.textContent="Page: "+m;var e=document.createElement("div");e.textContent=g.toString();f.appendChild(l);f.appendChild(e);c.push({pageNumber:m,div:f});c.sort(function(o,i){return o.pageNumber-i.pageNumber});a(this.panel);for(var h=0,n=c.length;h<n;++h){this.panel.appendChild(c[h].div)}},cleanup:function(){c=[];a(this.panel)}}})();window.PDFBug=(function PDFBugClosure(){var e=300;var b=[];var d=null;return{tools:[FontInspector,StepperManager,Stats],enable:function(k){var j=false,l=this.tools;if(k.length===1&&k[0]==="all"){j=true}for(var h=0;h<l.length;++h){var g=l[h];if(j||k.indexOf(g.id)!==-1){g.enabled=true}}if(!j){l.sort(function(m,i){var o=k.indexOf(m.id);o=o<0?l.length:o;var n=k.indexOf(i.id);n=n<0?l.length:n;return o-n})}},init:function c(q,h){var o=document.createElement("div");o.id="PDFBug";var p=document.createElement("div");p.setAttribute("class","controls");o.appendChild(p);var n=document.createElement("div");n.setAttribute("class","panels");o.appendChild(n);h.appendChild(o);h.style.right=e+"px";var l=this.tools;var r=this;for(var k=0;k<l.length;++k){var m=l[k];var g=document.createElement("div");var j=document.createElement("button");j.textContent=m.name;j.addEventListener("click",(function(i){return function(s){s.preventDefault();r.selectPanel(i)}})(k));p.appendChild(j);n.appendChild(g);m.panel=g;m.manager=this;if(m.enabled){m.init(q)}else{g.textContent=m.name+' is disabled. To enable add  "'+m.id+'" to the pdfBug parameter and refresh (separate multiple by commas).'}b.push(j)}this.selectPanel(0)},cleanup:function a(){for(var g=0,h=this.tools.length;g<h;g++){if(this.tools[g].enabled){this.tools[g].cleanup()}}},selectPanel:function f(h){if(typeof h!=="number"){h=this.tools.indexOf(h)}if(h===d){return}d=h;var i=this.tools;for(var g=0;g<i.length;++g){if(g===h){b[g].setAttribute("class","active");i[g].active=true;i[g].panel.removeAttribute("hidden")}else{b[g].setAttribute("class","");i[g].active=false;i[g].panel.setAttribute("hidden","true")}}}}})();