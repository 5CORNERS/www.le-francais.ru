{"version":3,"file":"../bootstrap-select.min.js","sources":["bootstrap-select.js"],"sourcesContent":["/*!\r\n * Bootstrap-select v1.13.18 (https://developer.snapappointments.com/bootstrap-select)\r\n *\r\n * Copyright 2012-2020 SnapAppointments, LLC\r\n * Licensed under MIT (https://github.com/snapappointments/bootstrap-select/blob/master/LICENSE)\r\n */\r\n\r\n(function (root, factory) {\r\n  if (root === undefined && window !== undefined) root = window;\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module unless amdModuleId is set\r\n    define([\"jquery\"], function (a0) {\r\n      return (factory(a0));\r\n    });\r\n  } else if (typeof module === 'object' && module.exports) {\r\n    // Node. Does not work with strict CommonJS, but\r\n    // only CommonJS-like environments that support module.exports,\r\n    // like Node.\r\n    module.exports = factory(require(\"jquery\"));\r\n  } else {\r\n    factory(root[\"jQuery\"]);\r\n  }\r\n}(this, function (jQuery) {\r\n\r\n(function ($) {\r\n  'use strict';\r\n\r\n  var DISALLOWED_ATTRIBUTES = ['sanitize', 'whiteList', 'sanitizeFn'];\r\n\r\n  var uriAttrs = [\r\n    'background',\r\n    'cite',\r\n    'href',\r\n    'itemtype',\r\n    'longdesc',\r\n    'poster',\r\n    'src',\r\n    'xlink:href'\r\n  ];\r\n\r\n  var ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i;\r\n\r\n  var DefaultWhitelist = {\r\n    // Global attributes allowed on any supplied element below.\r\n    '*': ['class', 'dir', 'id', 'lang', 'role', 'tabindex', 'style', ARIA_ATTRIBUTE_PATTERN],\r\n    a: ['target', 'href', 'title', 'rel'],\r\n    area: [],\r\n    b: [],\r\n    br: [],\r\n    col: [],\r\n    code: [],\r\n    div: [],\r\n    em: [],\r\n    hr: [],\r\n    h1: [],\r\n    h2: [],\r\n    h3: [],\r\n    h4: [],\r\n    h5: [],\r\n    h6: [],\r\n    i: [],\r\n    img: ['src', 'alt', 'title', 'width', 'height'],\r\n    li: [],\r\n    ol: [],\r\n    p: [],\r\n    pre: [],\r\n    s: [],\r\n    small: [],\r\n    span: [],\r\n    sub: [],\r\n    sup: [],\r\n    strong: [],\r\n    u: [],\r\n    ul: []\r\n  }\r\n\r\n  /**\r\n   * A pattern that recognizes a commonly useful subset of URLs that are safe.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\r\n  var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;\r\n\r\n  /**\r\n   * A pattern that matches safe data URLs. Only matches image, video and audio types.\r\n   *\r\n   * Shoutout to Angular 7 https://github.com/angular/angular/blob/7.2.4/packages/core/src/sanitization/url_sanitizer.ts\r\n   */\r\n  var DATA_URL_PATTERN = /^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;\r\n\r\n  function allowedAttribute (attr, allowedAttributeList) {\r\n    var attrName = attr.nodeName.toLowerCase()\r\n\r\n    if ($.inArray(attrName, allowedAttributeList) !== -1) {\r\n      if ($.inArray(attrName, uriAttrs) !== -1) {\r\n        return Boolean(attr.nodeValue.match(SAFE_URL_PATTERN) || attr.nodeValue.match(DATA_URL_PATTERN))\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    var regExp = $(allowedAttributeList).filter(function (index, value) {\r\n      return value instanceof RegExp\r\n    })\r\n\r\n    // Check if a regular expression validates the attribute.\r\n    for (var i = 0, l = regExp.length; i < l; i++) {\r\n      if (attrName.match(regExp[i])) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  function sanitizeHtml (unsafeElements, whiteList, sanitizeFn) {\r\n    if (sanitizeFn && typeof sanitizeFn === 'function') {\r\n      return sanitizeFn(unsafeElements);\r\n    }\r\n\r\n    var whitelistKeys = Object.keys(whiteList);\r\n\r\n    for (var i = 0, len = unsafeElements.length; i < len; i++) {\r\n      var elements = unsafeElements[i].querySelectorAll('*');\r\n\r\n      for (var j = 0, len2 = elements.length; j < len2; j++) {\r\n        var el = elements[j];\r\n        var elName = el.nodeName.toLowerCase();\r\n\r\n        if (whitelistKeys.indexOf(elName) === -1) {\r\n          el.parentNode.removeChild(el);\r\n\r\n          continue;\r\n        }\r\n\r\n        var attributeList = [].slice.call(el.attributes);\r\n        var whitelistedAttributes = [].concat(whiteList['*'] || [], whiteList[elName] || []);\r\n\r\n        for (var k = 0, len3 = attributeList.length; k < len3; k++) {\r\n          var attr = attributeList[k];\r\n\r\n          if (!allowedAttribute(attr, whitelistedAttributes)) {\r\n            el.removeAttribute(attr.nodeName);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Polyfill for browsers with no classList support\r\n  // Remove in v2\r\n  if (!('classList' in document.createElement('_'))) {\r\n    (function (view) {\r\n      if (!('Element' in view)) return;\r\n\r\n      var classListProp = 'classList',\r\n          protoProp = 'prototype',\r\n          elemCtrProto = view.Element[protoProp],\r\n          objCtr = Object,\r\n          classListGetter = function () {\r\n            var $elem = $(this);\r\n\r\n            return {\r\n              add: function (classes) {\r\n                classes = Array.prototype.slice.call(arguments).join(' ');\r\n                return $elem.addClass(classes);\r\n              },\r\n              remove: function (classes) {\r\n                classes = Array.prototype.slice.call(arguments).join(' ');\r\n                return $elem.removeClass(classes);\r\n              },\r\n              toggle: function (classes, force) {\r\n                return $elem.toggleClass(classes, force);\r\n              },\r\n              contains: function (classes) {\r\n                return $elem.hasClass(classes);\r\n              }\r\n            }\r\n          };\r\n\r\n      if (objCtr.defineProperty) {\r\n        var classListPropDesc = {\r\n          get: classListGetter,\r\n          enumerable: true,\r\n          configurable: true\r\n        };\r\n        try {\r\n          objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n        } catch (ex) { // IE 8 doesn't support enumerable:true\r\n          // adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\r\n          // modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\r\n          if (ex.number === undefined || ex.number === -0x7FF5EC54) {\r\n            classListPropDesc.enumerable = false;\r\n            objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n          }\r\n        }\r\n      } else if (objCtr[protoProp].__defineGetter__) {\r\n        elemCtrProto.__defineGetter__(classListProp, classListGetter);\r\n      }\r\n    }(window));\r\n  }\r\n\r\n  var testElement = document.createElement('_');\r\n\r\n  testElement.classList.add('c1', 'c2');\r\n\r\n  if (!testElement.classList.contains('c2')) {\r\n    var _add = DOMTokenList.prototype.add,\r\n        _remove = DOMTokenList.prototype.remove;\r\n\r\n    DOMTokenList.prototype.add = function () {\r\n      Array.prototype.forEach.call(arguments, _add.bind(this));\r\n    }\r\n\r\n    DOMTokenList.prototype.remove = function () {\r\n      Array.prototype.forEach.call(arguments, _remove.bind(this));\r\n    }\r\n  }\r\n\r\n  testElement.classList.toggle('c3', false);\r\n\r\n  // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\r\n  // support the second argument.\r\n  if (testElement.classList.contains('c3')) {\r\n    var _toggle = DOMTokenList.prototype.toggle;\r\n\r\n    DOMTokenList.prototype.toggle = function (token, force) {\r\n      if (1 in arguments && !this.contains(token) === !force) {\r\n        return force;\r\n      } else {\r\n        return _toggle.call(this, token);\r\n      }\r\n    };\r\n  }\r\n\r\n  testElement = null;\r\n\r\n  // shallow array comparison\r\n  function isEqual (array1, array2) {\r\n    return array1.length === array2.length && array1.every(function (element, index) {\r\n      return element === array2[index];\r\n    });\r\n  };\r\n\r\n  // <editor-fold desc=\"Shims\">\r\n  if (!String.prototype.startsWith) {\r\n    (function () {\r\n      'use strict'; // needed to support `apply`/`call` with `undefined`/`null`\r\n      var defineProperty = (function () {\r\n        // IE 8 only supports `Object.defineProperty` on DOM elements\r\n        try {\r\n          var object = {};\r\n          var $defineProperty = Object.defineProperty;\r\n          var result = $defineProperty(object, object, object) && $defineProperty;\r\n        } catch (error) {\r\n        }\r\n        return result;\r\n      }());\r\n      var toString = {}.toString;\r\n      var startsWith = function (search) {\r\n        if (this == null) {\r\n          throw new TypeError();\r\n        }\r\n        var string = String(this);\r\n        if (search && toString.call(search) == '[object RegExp]') {\r\n          throw new TypeError();\r\n        }\r\n        var stringLength = string.length;\r\n        var searchString = String(search);\r\n        var searchLength = searchString.length;\r\n        var position = arguments.length > 1 ? arguments[1] : undefined;\r\n        // `ToInteger`\r\n        var pos = position ? Number(position) : 0;\r\n        if (pos != pos) { // better `isNaN`\r\n          pos = 0;\r\n        }\r\n        var start = Math.min(Math.max(pos, 0), stringLength);\r\n        // Avoid the `indexOf` call if no match is possible\r\n        if (searchLength + start > stringLength) {\r\n          return false;\r\n        }\r\n        var index = -1;\r\n        while (++index < searchLength) {\r\n          if (string.charCodeAt(start + index) != searchString.charCodeAt(index)) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      };\r\n      if (defineProperty) {\r\n        defineProperty(String.prototype, 'startsWith', {\r\n          'value': startsWith,\r\n          'configurable': true,\r\n          'writable': true\r\n        });\r\n      } else {\r\n        String.prototype.startsWith = startsWith;\r\n      }\r\n    }());\r\n  }\r\n\r\n  if (!Object.keys) {\r\n    Object.keys = function (\r\n      o, // object\r\n      k, // key\r\n      r  // result array\r\n    ) {\r\n      // initialize object and result\r\n      r = [];\r\n      // iterate over object keys\r\n      for (k in o) {\r\n        // fill result array with non-prototypical keys\r\n        r.hasOwnProperty.call(o, k) && r.push(k);\r\n      }\r\n      // return result\r\n      return r;\r\n    };\r\n  }\r\n\r\n  if (HTMLSelectElement && !HTMLSelectElement.prototype.hasOwnProperty('selectedOptions')) {\r\n    Object.defineProperty(HTMLSelectElement.prototype, 'selectedOptions', {\r\n      get: function () {\r\n        return this.querySelectorAll(':checked');\r\n      }\r\n    });\r\n  }\r\n\r\n  function getSelectedOptions (select, ignoreDisabled) {\r\n    var selectedOptions = select.selectedOptions,\r\n        options = [],\r\n        opt;\r\n\r\n    if (ignoreDisabled) {\r\n      for (var i = 0, len = selectedOptions.length; i < len; i++) {\r\n        opt = selectedOptions[i];\r\n\r\n        if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\r\n          options.push(opt);\r\n        }\r\n      }\r\n\r\n      return options;\r\n    }\r\n\r\n    return selectedOptions;\r\n  }\r\n\r\n  // much faster than $.val()\r\n  function getSelectValues (select, selectedOptions) {\r\n    var value = [],\r\n        options = selectedOptions || select.selectedOptions,\r\n        opt;\r\n\r\n    for (var i = 0, len = options.length; i < len; i++) {\r\n      opt = options[i];\r\n\r\n      if (!(opt.disabled || opt.parentNode.tagName === 'OPTGROUP' && opt.parentNode.disabled)) {\r\n        value.push(opt.value);\r\n      }\r\n    }\r\n\r\n    if (!select.multiple) {\r\n      return !value.length ? null : value[0];\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n  // set data-selected on select element if the value has been programmatically selected\r\n  // prior to initialization of bootstrap-select\r\n  // * consider removing or replacing an alternative method *\r\n  var valHooks = {\r\n    useDefault: false,\r\n    _set: $.valHooks.select.set\r\n  };\r\n\r\n  $.valHooks.select.set = function (elem, value) {\r\n    if (value && !valHooks.useDefault) $(elem).data('selected', true);\r\n\r\n    return valHooks._set.apply(this, arguments);\r\n  };\r\n\r\n  var changedArguments = null;\r\n\r\n  var EventIsSupported = (function () {\r\n    try {\r\n      new Event('change');\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  })();\r\n\r\n  $.fn.triggerNative = function (eventName) {\r\n    var el = this[0],\r\n        event;\r\n\r\n    if (el.dispatchEvent) { // for modern browsers & IE9+\r\n      if (EventIsSupported) {\r\n        // For modern browsers\r\n        event = new Event(eventName, {\r\n          bubbles: true\r\n        });\r\n      } else {\r\n        // For IE since it doesn't support Event constructor\r\n        event = document.createEvent('Event');\r\n        event.initEvent(eventName, true, false);\r\n      }\r\n\r\n      el.dispatchEvent(event);\r\n    } else if (el.fireEvent) { // for IE8\r\n      event = document.createEventObject();\r\n      event.eventType = eventName;\r\n      el.fireEvent('on' + eventName, event);\r\n    } else {\r\n      // fall back to jQuery.trigger\r\n      this.trigger(eventName);\r\n    }\r\n  };\r\n  // </editor-fold>\r\n\r\n  function stringSearch (li, searchString, method, normalize) {\r\n    var stringTypes = [\r\n          'display',\r\n          'subtext',\r\n          'tokens'\r\n        ],\r\n        searchSuccess = false;\r\n\r\n    for (var i = 0; i < stringTypes.length; i++) {\r\n      var stringType = stringTypes[i],\r\n          string = li[stringType];\r\n\r\n      if (string) {\r\n        string = string.toString();\r\n\r\n        // Strip HTML tags. This isn't perfect, but it's much faster than any other method\r\n        if (stringType === 'display') {\r\n          string = string.replace(/<[^>]+>/g, '');\r\n        }\r\n\r\n        if (normalize) string = normalizeToBase(string);\r\n        string = string.toUpperCase();\r\n\r\n        if (method === 'contains') {\r\n          searchSuccess = string.indexOf(searchString) >= 0;\r\n        } else {\r\n          searchSuccess = string.startsWith(searchString);\r\n        }\r\n\r\n        if (searchSuccess) break;\r\n      }\r\n    }\r\n\r\n    return searchSuccess;\r\n  }\r\n\r\n  function toInteger (value) {\r\n    return parseInt(value, 10) || 0;\r\n  }\r\n\r\n  // Borrowed from Lodash (_.deburr)\r\n  /** Used to map Latin Unicode letters to basic Latin letters. */\r\n  var deburredLetters = {\r\n    // Latin-1 Supplement block.\r\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\r\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\r\n    '\\xc7': 'C',  '\\xe7': 'c',\r\n    '\\xd0': 'D',  '\\xf0': 'd',\r\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\r\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\r\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\r\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\r\n    '\\xd1': 'N',  '\\xf1': 'n',\r\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\r\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\r\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\r\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\r\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\r\n    '\\xc6': 'Ae', '\\xe6': 'ae',\r\n    '\\xde': 'Th', '\\xfe': 'th',\r\n    '\\xdf': 'ss',\r\n    // Latin Extended-A block.\r\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\r\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\r\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\r\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\r\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\r\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\r\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\r\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\r\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\r\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\r\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\r\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\r\n    '\\u0134': 'J',  '\\u0135': 'j',\r\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\r\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\r\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\r\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\r\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\r\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\r\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\r\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\r\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\r\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\r\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\r\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\r\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\r\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\r\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\r\n    '\\u0174': 'W',  '\\u0175': 'w',\r\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\r\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\r\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\r\n    '\\u0132': 'IJ', '\\u0133': 'ij',\r\n    '\\u0152': 'Oe', '\\u0153': 'oe',\r\n    '\\u0149': \"'n\", '\\u017f': 's'\r\n  };\r\n\r\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\r\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\r\n\r\n  /** Used to compose unicode character classes. */\r\n  var rsComboMarksRange = '\\\\u0300-\\\\u036f',\r\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\r\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\r\n      rsComboMarksExtendedRange = '\\\\u1ab0-\\\\u1aff',\r\n      rsComboMarksSupplementRange = '\\\\u1dc0-\\\\u1dff',\r\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange + rsComboMarksExtendedRange + rsComboMarksSupplementRange;\r\n\r\n  /** Used to compose unicode capture groups. */\r\n  var rsCombo = '[' + rsComboRange + ']';\r\n\r\n  /**\r\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\r\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\r\n   */\r\n  var reComboMark = RegExp(rsCombo, 'g');\r\n\r\n  function deburrLetter (key) {\r\n    return deburredLetters[key];\r\n  };\r\n\r\n  function normalizeToBase (string) {\r\n    string = string.toString();\r\n    return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\r\n  }\r\n\r\n  // List of HTML entities for escaping.\r\n  var escapeMap = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#x27;',\r\n    '`': '&#x60;'\r\n  };\r\n\r\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\r\n  var createEscaper = function (map) {\r\n    var escaper = function (match) {\r\n      return map[match];\r\n    };\r\n    // Regexes for identifying a key that needs to be escaped.\r\n    var source = '(?:' + Object.keys(map).join('|') + ')';\r\n    var testRegexp = RegExp(source);\r\n    var replaceRegexp = RegExp(source, 'g');\r\n    return function (string) {\r\n      string = string == null ? '' : '' + string;\r\n      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;\r\n    };\r\n  };\r\n\r\n  var htmlEscape = createEscaper(escapeMap);\r\n\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * Constants\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  var keyCodeMap = {\r\n    32: ' ',\r\n    48: '0',\r\n    49: '1',\r\n    50: '2',\r\n    51: '3',\r\n    52: '4',\r\n    53: '5',\r\n    54: '6',\r\n    55: '7',\r\n    56: '8',\r\n    57: '9',\r\n    59: ';',\r\n    65: 'A',\r\n    66: 'B',\r\n    67: 'C',\r\n    68: 'D',\r\n    69: 'E',\r\n    70: 'F',\r\n    71: 'G',\r\n    72: 'H',\r\n    73: 'I',\r\n    74: 'J',\r\n    75: 'K',\r\n    76: 'L',\r\n    77: 'M',\r\n    78: 'N',\r\n    79: 'O',\r\n    80: 'P',\r\n    81: 'Q',\r\n    82: 'R',\r\n    83: 'S',\r\n    84: 'T',\r\n    85: 'U',\r\n    86: 'V',\r\n    87: 'W',\r\n    88: 'X',\r\n    89: 'Y',\r\n    90: 'Z',\r\n    96: '0',\r\n    97: '1',\r\n    98: '2',\r\n    99: '3',\r\n    100: '4',\r\n    101: '5',\r\n    102: '6',\r\n    103: '7',\r\n    104: '8',\r\n    105: '9'\r\n  };\r\n\r\n  var keyCodes = {\r\n    ESCAPE: 27, // KeyboardEvent.which value for Escape (Esc) key\r\n    ENTER: 13, // KeyboardEvent.which value for Enter key\r\n    SPACE: 32, // KeyboardEvent.which value for space key\r\n    TAB: 9, // KeyboardEvent.which value for tab key\r\n    ARROW_UP: 38, // KeyboardEvent.which value for up arrow key\r\n    ARROW_DOWN: 40 // KeyboardEvent.which value for down arrow key\r\n  }\r\n\r\n  var version = {\r\n    success: false,\r\n    major: '3'\r\n  };\r\n\r\n  try {\r\n    version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\r\n    version.major = version.full[0];\r\n    version.success = true;\r\n  } catch (err) {\r\n    // do nothing\r\n  }\r\n\r\n  var selectId = 0;\r\n\r\n  var EVENT_KEY = '.bs.select';\r\n\r\n  var classNames = {\r\n    DISABLED: 'disabled',\r\n    DIVIDER: 'divider',\r\n    SHOW: 'open',\r\n    DROPUP: 'dropup',\r\n    MENU: 'dropdown-menu',\r\n    MENURIGHT: 'dropdown-menu-right',\r\n    MENULEFT: 'dropdown-menu-left',\r\n    // to-do: replace with more advanced template/customization options\r\n    BUTTONCLASS: 'btn-default',\r\n    POPOVERHEADER: 'popover-title',\r\n    ICONBASE: 'glyphicon',\r\n    TICKICON: 'glyphicon-ok'\r\n  }\r\n\r\n  var Selector = {\r\n    MENU: '.' + classNames.MENU\r\n  }\r\n\r\n  var elementTemplates = {\r\n    div: document.createElement('div'),\r\n    span: document.createElement('span'),\r\n    i: document.createElement('i'),\r\n    subtext: document.createElement('small'),\r\n    a: document.createElement('a'),\r\n    li: document.createElement('li'),\r\n    whitespace: document.createTextNode('\\u00A0'),\r\n    fragment: document.createDocumentFragment()\r\n  }\r\n\r\n  elementTemplates.noResults = elementTemplates.li.cloneNode(false);\r\n  elementTemplates.noResults.className = 'no-results';\r\n\r\n  elementTemplates.a.setAttribute('role', 'option');\r\n  elementTemplates.a.className = 'dropdown-item';\r\n\r\n  elementTemplates.subtext.className = 'text-muted';\r\n\r\n  elementTemplates.text = elementTemplates.span.cloneNode(false);\r\n  elementTemplates.text.className = 'text';\r\n\r\n  elementTemplates.checkMark = elementTemplates.span.cloneNode(false);\r\n\r\n  var REGEXP_ARROW = new RegExp(keyCodes.ARROW_UP + '|' + keyCodes.ARROW_DOWN);\r\n  var REGEXP_TAB_OR_ESCAPE = new RegExp('^' + keyCodes.TAB + '$|' + keyCodes.ESCAPE);\r\n\r\n  var generateOption = {\r\n    li: function (content, classes, optgroup) {\r\n      var li = elementTemplates.li.cloneNode(false);\r\n\r\n      if (content) {\r\n        if (content.nodeType === 1 || content.nodeType === 11) {\r\n          li.appendChild(content);\r\n        } else {\r\n          li.innerHTML = content;\r\n        }\r\n      }\r\n\r\n      if (typeof classes !== 'undefined' && classes !== '') li.className = classes;\r\n      if (typeof optgroup !== 'undefined' && optgroup !== null) li.classList.add('optgroup-' + optgroup);\r\n\r\n      return li;\r\n    },\r\n\r\n    a: function (text, classes, inline) {\r\n      var a = elementTemplates.a.cloneNode(true);\r\n\r\n      if (text) {\r\n        if (text.nodeType === 11) {\r\n          a.appendChild(text);\r\n        } else {\r\n          a.insertAdjacentHTML('beforeend', text);\r\n        }\r\n      }\r\n\r\n      if (typeof classes !== 'undefined' && classes !== '') a.classList.add.apply(a.classList, classes.split(/\\s+/));\r\n      if (inline) a.setAttribute('style', inline);\r\n\r\n      return a;\r\n    },\r\n\r\n    text: function (options, useFragment) {\r\n      var textElement = elementTemplates.text.cloneNode(false),\r\n          subtextElement,\r\n          iconElement;\r\n\r\n      if (options.content) {\r\n        textElement.innerHTML = options.content;\r\n      } else {\r\n        textElement.textContent = options.text;\r\n\r\n        if (options.icon) {\r\n          var whitespace = elementTemplates.whitespace.cloneNode(false);\r\n\r\n          // need to use <i> for icons in the button to prevent a breaking change\r\n          // note: switch to span in next major release\r\n          iconElement = (useFragment === true ? elementTemplates.i : elementTemplates.span).cloneNode(false);\r\n          iconElement.className = this.options.iconBase + ' ' + options.icon;\r\n\r\n          elementTemplates.fragment.appendChild(iconElement);\r\n          elementTemplates.fragment.appendChild(whitespace);\r\n        }\r\n\r\n        if (options.subtext) {\r\n          subtextElement = elementTemplates.subtext.cloneNode(false);\r\n          subtextElement.textContent = options.subtext;\r\n          textElement.appendChild(subtextElement);\r\n        }\r\n      }\r\n\r\n      if (useFragment === true) {\r\n        while (textElement.childNodes.length > 0) {\r\n          elementTemplates.fragment.appendChild(textElement.childNodes[0]);\r\n        }\r\n      } else {\r\n        elementTemplates.fragment.appendChild(textElement);\r\n      }\r\n\r\n      return elementTemplates.fragment;\r\n    },\r\n\r\n    label: function (options) {\r\n      var textElement = elementTemplates.text.cloneNode(false),\r\n          subtextElement,\r\n          iconElement;\r\n\r\n      textElement.innerHTML = options.display;\r\n\r\n      if (options.icon) {\r\n        var whitespace = elementTemplates.whitespace.cloneNode(false);\r\n\r\n        iconElement = elementTemplates.span.cloneNode(false);\r\n        iconElement.className = this.options.iconBase + ' ' + options.icon;\r\n\r\n        elementTemplates.fragment.appendChild(iconElement);\r\n        elementTemplates.fragment.appendChild(whitespace);\r\n      }\r\n\r\n      if (options.subtext) {\r\n        subtextElement = elementTemplates.subtext.cloneNode(false);\r\n        subtextElement.textContent = options.subtext;\r\n        textElement.appendChild(subtextElement);\r\n      }\r\n\r\n      elementTemplates.fragment.appendChild(textElement);\r\n\r\n      return elementTemplates.fragment;\r\n    }\r\n  }\r\n\r\n  function showNoResults (searchMatch, searchValue) {\r\n    if (!searchMatch.length) {\r\n      elementTemplates.noResults.innerHTML = this.options.noneResultsText.replace('{0}', '\"' + htmlEscape(searchValue) + '\"');\r\n      this.$menuInner[0].firstChild.appendChild(elementTemplates.noResults);\r\n    }\r\n  }\r\n\r\n  var Selectpicker = function (element, options) {\r\n    var that = this;\r\n\r\n    // bootstrap-select has been initialized - revert valHooks.select.set back to its original function\r\n    if (!valHooks.useDefault) {\r\n      $.valHooks.select.set = valHooks._set;\r\n      valHooks.useDefault = true;\r\n    }\r\n\r\n    this.$element = $(element);\r\n    this.$newElement = null;\r\n    this.$button = null;\r\n    this.$menu = null;\r\n    this.options = options;\r\n    this.selectpicker = {\r\n      main: {},\r\n      search: {},\r\n      current: {}, // current changes if a search is in progress\r\n      view: {},\r\n      isSearching: false,\r\n      keydown: {\r\n        keyHistory: '',\r\n        resetKeyHistory: {\r\n          start: function () {\r\n            return setTimeout(function () {\r\n              that.selectpicker.keydown.keyHistory = '';\r\n            }, 800);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    this.sizeInfo = {};\r\n\r\n    // If we have no title yet, try to pull it from the html title attribute (jQuery doesnt' pick it up as it's not a\r\n    // data-attribute)\r\n    if (this.options.title === null) {\r\n      this.options.title = this.$element.attr('title');\r\n    }\r\n\r\n    // Format window padding\r\n    var winPad = this.options.windowPadding;\r\n    if (typeof winPad === 'number') {\r\n      this.options.windowPadding = [winPad, winPad, winPad, winPad];\r\n    }\r\n\r\n    // Expose public methods\r\n    this.val = Selectpicker.prototype.val;\r\n    this.render = Selectpicker.prototype.render;\r\n    this.refresh = Selectpicker.prototype.refresh;\r\n    this.setStyle = Selectpicker.prototype.setStyle;\r\n    this.selectAll = Selectpicker.prototype.selectAll;\r\n    this.deselectAll = Selectpicker.prototype.deselectAll;\r\n    this.destroy = Selectpicker.prototype.destroy;\r\n    this.remove = Selectpicker.prototype.remove;\r\n    this.show = Selectpicker.prototype.show;\r\n    this.hide = Selectpicker.prototype.hide;\r\n\r\n    this.init();\r\n  };\r\n\r\n  Selectpicker.VERSION = '1.13.18';\r\n\r\n  // part of this is duplicated in i18n/defaults-en_US.js. Make sure to update both.\r\n  Selectpicker.DEFAULTS = {\r\n    noneSelectedText: 'Nothing selected',\r\n    noneResultsText: 'No results matched {0}',\r\n    countSelectedText: function (numSelected, numTotal) {\r\n      return (numSelected == 1) ? '{0} item selected' : '{0} items selected';\r\n    },\r\n    maxOptionsText: function (numAll, numGroup) {\r\n      return [\r\n        (numAll == 1) ? 'Limit reached ({n} item max)' : 'Limit reached ({n} items max)',\r\n        (numGroup == 1) ? 'Group limit reached ({n} item max)' : 'Group limit reached ({n} items max)'\r\n      ];\r\n    },\r\n    selectAllText: 'Select All',\r\n    deselectAllText: 'Deselect All',\r\n    doneButton: false,\r\n    doneButtonText: 'Close',\r\n    multipleSeparator: ', ',\r\n    styleBase: 'btn',\r\n    style: classNames.BUTTONCLASS,\r\n    size: 'auto',\r\n    title: null,\r\n    selectedTextFormat: 'values',\r\n    width: false,\r\n    container: false,\r\n    hideDisabled: false,\r\n    showSubtext: false,\r\n    showIcon: true,\r\n    showContent: true,\r\n    dropupAuto: true,\r\n    header: false,\r\n    liveSearch: false,\r\n    liveSearchPlaceholder: null,\r\n    liveSearchNormalize: false,\r\n    liveSearchStyle: 'contains',\r\n    actionsBox: false,\r\n    iconBase: classNames.ICONBASE,\r\n    tickIcon: classNames.TICKICON,\r\n    showTick: false,\r\n    template: {\r\n      caret: '<span class=\"caret\"></span>'\r\n    },\r\n    maxOptions: false,\r\n    mobile: false,\r\n    selectOnTab: false,\r\n    dropdownAlignRight: false,\r\n    windowPadding: 0,\r\n    virtualScroll: 600,\r\n    display: false,\r\n    sanitize: true,\r\n    sanitizeFn: null,\r\n    whiteList: DefaultWhitelist\r\n  };\r\n\r\n  Selectpicker.prototype = {\r\n\r\n    constructor: Selectpicker,\r\n\r\n    init: function () {\r\n      var that = this,\r\n          id = this.$element.attr('id'),\r\n          element = this.$element[0],\r\n          form = element.form;\r\n\r\n      selectId++;\r\n      this.selectId = 'bs-select-' + selectId;\r\n\r\n      element.classList.add('bs-select-hidden');\r\n\r\n      this.multiple = this.$element.prop('multiple');\r\n      this.autofocus = this.$element.prop('autofocus');\r\n\r\n      if (element.classList.contains('show-tick')) {\r\n        this.options.showTick = true;\r\n      }\r\n\r\n      this.$newElement = this.createDropdown();\r\n      this.buildData();\r\n      this.$element\r\n        .after(this.$newElement)\r\n        .prependTo(this.$newElement);\r\n\r\n      // ensure select is associated with form element if it got unlinked after moving it inside newElement\r\n      if (form && element.form === null) {\r\n        if (!form.id) form.id = 'form-' + this.selectId;\r\n        element.setAttribute('form', form.id);\r\n      }\r\n\r\n      this.$button = this.$newElement.children('button');\r\n      this.$menu = this.$newElement.children(Selector.MENU);\r\n      this.$menuInner = this.$menu.children('.inner');\r\n      this.$searchbox = this.$menu.find('input');\r\n\r\n      element.classList.remove('bs-select-hidden');\r\n\r\n      if (this.options.dropdownAlignRight === true) this.$menu[0].classList.add(classNames.MENURIGHT);\r\n\r\n      if (typeof id !== 'undefined') {\r\n        this.$button.attr('data-id', id);\r\n      }\r\n\r\n      this.checkDisabled();\r\n      this.clickListener();\r\n\r\n      if (this.options.liveSearch) {\r\n        this.liveSearchListener();\r\n        this.focusedParent = this.$searchbox[0];\r\n      } else {\r\n        this.focusedParent = this.$menuInner[0];\r\n      }\r\n\r\n      this.setStyle();\r\n      this.render();\r\n      this.setWidth();\r\n      if (this.options.container) {\r\n        this.selectPosition();\r\n      } else {\r\n        this.$element.on('hide' + EVENT_KEY, function () {\r\n          if (that.isVirtual()) {\r\n            // empty menu on close\r\n            var menuInner = that.$menuInner[0],\r\n                emptyMenu = menuInner.firstChild.cloneNode(false);\r\n\r\n            // replace the existing UL with an empty one - this is faster than $.empty() or innerHTML = ''\r\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\r\n            menuInner.scrollTop = 0;\r\n          }\r\n        });\r\n      }\r\n      this.$menu.data('this', this);\r\n      this.$newElement.data('this', this);\r\n      if (this.options.mobile) this.mobile();\r\n\r\n      this.$newElement.on({\r\n        'hide.bs.dropdown': function (e) {\r\n          that.$element.trigger('hide' + EVENT_KEY, e);\r\n        },\r\n        'hidden.bs.dropdown': function (e) {\r\n          that.$element.trigger('hidden' + EVENT_KEY, e);\r\n        },\r\n        'show.bs.dropdown': function (e) {\r\n          that.$element.trigger('show' + EVENT_KEY, e);\r\n        },\r\n        'shown.bs.dropdown': function (e) {\r\n          that.$element.trigger('shown' + EVENT_KEY, e);\r\n        }\r\n      });\r\n\r\n      if (element.hasAttribute('required')) {\r\n        this.$element.on('invalid' + EVENT_KEY, function () {\r\n          that.$button[0].classList.add('bs-invalid');\r\n\r\n          that.$element\r\n            .on('shown' + EVENT_KEY + '.invalid', function () {\r\n              that.$element\r\n                .val(that.$element.val()) // set the value to hide the validation message in Chrome when menu is opened\r\n                .off('shown' + EVENT_KEY + '.invalid');\r\n            })\r\n            .on('rendered' + EVENT_KEY, function () {\r\n              // if select is no longer invalid, remove the bs-invalid class\r\n              if (this.validity.valid) that.$button[0].classList.remove('bs-invalid');\r\n              that.$element.off('rendered' + EVENT_KEY);\r\n            });\r\n\r\n          that.$button.on('blur' + EVENT_KEY, function () {\r\n            that.$element.trigger('focus').trigger('blur');\r\n            that.$button.off('blur' + EVENT_KEY);\r\n          });\r\n        });\r\n      }\r\n\r\n      setTimeout(function () {\r\n        that.buildList();\r\n        that.$element.trigger('loaded' + EVENT_KEY);\r\n      });\r\n    },\r\n\r\n    createDropdown: function () {\r\n      // Options\r\n      // If we are multiple or showTick option is set, then add the show-tick class\r\n      var showTick = (this.multiple || this.options.showTick) ? ' show-tick' : '',\r\n          multiselectable = this.multiple ? ' aria-multiselectable=\"true\"' : '',\r\n          inputGroup = '',\r\n          autofocus = this.autofocus ? ' autofocus' : '';\r\n\r\n      if (version.major < 4 && this.$element.parent().hasClass('input-group')) {\r\n        inputGroup = ' input-group-btn';\r\n      }\r\n\r\n      // Elements\r\n      var drop,\r\n          header = '',\r\n          searchbox = '',\r\n          actionsbox = '',\r\n          donebutton = '';\r\n\r\n      if (this.options.header) {\r\n        header =\r\n          '<div class=\"' + classNames.POPOVERHEADER + '\">' +\r\n            '<button type=\"button\" class=\"close\" aria-hidden=\"true\">&times;</button>' +\r\n              this.options.header +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.options.liveSearch) {\r\n        searchbox =\r\n          '<div class=\"bs-searchbox\">' +\r\n            '<input type=\"search\" class=\"form-control\" autocomplete=\"off\"' +\r\n              (\r\n                this.options.liveSearchPlaceholder === null ? ''\r\n                :\r\n                ' placeholder=\"' + htmlEscape(this.options.liveSearchPlaceholder) + '\"'\r\n              ) +\r\n              ' role=\"combobox\" aria-label=\"Search\" aria-controls=\"' + this.selectId + '\" aria-autocomplete=\"list\">' +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.multiple && this.options.actionsBox) {\r\n        actionsbox =\r\n          '<div class=\"bs-actionsbox\">' +\r\n            '<div class=\"btn-group btn-group-sm btn-block\">' +\r\n              '<button type=\"button\" class=\"actions-btn bs-select-all btn ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.selectAllText +\r\n              '</button>' +\r\n              '<button type=\"button\" class=\"actions-btn bs-deselect-all btn ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.deselectAllText +\r\n              '</button>' +\r\n            '</div>' +\r\n          '</div>';\r\n      }\r\n\r\n      if (this.multiple && this.options.doneButton) {\r\n        donebutton =\r\n          '<div class=\"bs-donebutton\">' +\r\n            '<div class=\"btn-group btn-block\">' +\r\n              '<button type=\"button\" class=\"btn btn-sm ' + classNames.BUTTONCLASS + '\">' +\r\n                this.options.doneButtonText +\r\n              '</button>' +\r\n            '</div>' +\r\n          '</div>';\r\n      }\r\n\r\n      drop =\r\n        '<div class=\"dropdown bootstrap-select' + showTick + inputGroup + '\">' +\r\n          '<button type=\"button\" tabindex=\"-1\" class=\"' + this.options.styleBase + ' dropdown-toggle\" ' + (this.options.display === 'static' ? 'data-display=\"static\"' : '') + 'data-toggle=\"dropdown\"' + autofocus + ' role=\"combobox\" aria-owns=\"' + this.selectId + '\" aria-haspopup=\"listbox\" aria-expanded=\"false\">' +\r\n            '<div class=\"filter-option\">' +\r\n              '<div class=\"filter-option-inner\">' +\r\n                '<div class=\"filter-option-inner-inner\"></div>' +\r\n              '</div> ' +\r\n            '</div>' +\r\n            (\r\n              version.major === '4' ? ''\r\n              :\r\n              '<span class=\"bs-caret\">' +\r\n                this.options.template.caret +\r\n              '</span>'\r\n            ) +\r\n          '</button>' +\r\n          '<div class=\"' + classNames.MENU + ' ' + (version.major === '4' ? '' : classNames.SHOW) + '\">' +\r\n            header +\r\n            searchbox +\r\n            actionsbox +\r\n            '<div class=\"inner ' + classNames.SHOW + '\" role=\"listbox\" id=\"' + this.selectId + '\" tabindex=\"-1\" ' + multiselectable + '>' +\r\n                '<ul class=\"' + classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '') + '\" role=\"presentation\">' +\r\n                '</ul>' +\r\n            '</div>' +\r\n            donebutton +\r\n          '</div>' +\r\n        '</div>';\r\n\r\n      return $(drop);\r\n    },\r\n\r\n    setPositionData: function () {\r\n      this.selectpicker.view.canHighlight = [];\r\n      this.selectpicker.view.size = 0;\r\n      this.selectpicker.view.firstHighlightIndex = false;\r\n\r\n      for (var i = 0; i < this.selectpicker.current.data.length; i++) {\r\n        var li = this.selectpicker.current.data[i],\r\n            canHighlight = true;\r\n\r\n        if (li.type === 'divider') {\r\n          canHighlight = false;\r\n          li.height = this.sizeInfo.dividerHeight;\r\n        } else if (li.type === 'optgroup-label') {\r\n          canHighlight = false;\r\n          li.height = this.sizeInfo.dropdownHeaderHeight;\r\n        } else {\r\n          li.height = this.sizeInfo.liHeight;\r\n        }\r\n\r\n        if (li.disabled) canHighlight = false;\r\n\r\n        this.selectpicker.view.canHighlight.push(canHighlight);\r\n\r\n        if (canHighlight) {\r\n          this.selectpicker.view.size++;\r\n          li.posinset = this.selectpicker.view.size;\r\n          if (this.selectpicker.view.firstHighlightIndex === false) this.selectpicker.view.firstHighlightIndex = i;\r\n        }\r\n\r\n        li.position = (i === 0 ? 0 : this.selectpicker.current.data[i - 1].position) + li.height;\r\n      }\r\n    },\r\n\r\n    isVirtual: function () {\r\n      return (this.options.virtualScroll !== false) && (this.selectpicker.main.elements.length >= this.options.virtualScroll) || this.options.virtualScroll === true;\r\n    },\r\n\r\n    createView: function (isSearching, setSize, refresh) {\r\n      var that = this,\r\n          scrollTop = 0,\r\n          active = [],\r\n          selected,\r\n          prevActive;\r\n\r\n      this.selectpicker.isSearching = isSearching;\r\n      this.selectpicker.current = isSearching ? this.selectpicker.search : this.selectpicker.main;\r\n\r\n      this.setPositionData();\r\n\r\n      if (setSize) {\r\n        if (refresh) {\r\n          scrollTop = this.$menuInner[0].scrollTop;\r\n        } else if (!that.multiple) {\r\n          var element = that.$element[0],\r\n              selectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\r\n\r\n          if (typeof selectedIndex === 'number' && that.options.size !== false) {\r\n            var selectedData = that.selectpicker.main.data[selectedIndex],\r\n                position = selectedData && selectedData.position;\r\n\r\n            if (position) {\r\n              scrollTop = position - ((that.sizeInfo.menuInnerHeight + that.sizeInfo.liHeight) / 2);\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      scroll(scrollTop, true);\r\n\r\n      this.$menuInner.off('scroll.createView').on('scroll.createView', function (e, updateValue) {\r\n        if (!that.noScroll) scroll(this.scrollTop, updateValue);\r\n        that.noScroll = false;\r\n      });\r\n\r\n      function scroll (scrollTop, init) {\r\n        var size = that.selectpicker.current.elements.length,\r\n            chunks = [],\r\n            chunkSize,\r\n            chunkCount,\r\n            firstChunk,\r\n            lastChunk,\r\n            currentChunk,\r\n            prevPositions,\r\n            positionIsDifferent,\r\n            previousElements,\r\n            menuIsDifferent = true,\r\n            isVirtual = that.isVirtual();\r\n\r\n        that.selectpicker.view.scrollTop = scrollTop;\r\n\r\n        chunkSize = Math.ceil(that.sizeInfo.menuInnerHeight / that.sizeInfo.liHeight * 1.5); // number of options in a chunk\r\n        chunkCount = Math.round(size / chunkSize) || 1; // number of chunks\r\n\r\n        for (var i = 0; i < chunkCount; i++) {\r\n          var endOfChunk = (i + 1) * chunkSize;\r\n\r\n          if (i === chunkCount - 1) {\r\n            endOfChunk = size;\r\n          }\r\n\r\n          chunks[i] = [\r\n            (i) * chunkSize + (!i ? 0 : 1),\r\n            endOfChunk\r\n          ];\r\n\r\n          if (!size) break;\r\n\r\n          if (currentChunk === undefined && scrollTop - 1 <= that.selectpicker.current.data[endOfChunk - 1].position - that.sizeInfo.menuInnerHeight) {\r\n            currentChunk = i;\r\n          }\r\n        }\r\n\r\n        if (currentChunk === undefined) currentChunk = 0;\r\n\r\n        prevPositions = [that.selectpicker.view.position0, that.selectpicker.view.position1];\r\n\r\n        // always display previous, current, and next chunks\r\n        firstChunk = Math.max(0, currentChunk - 1);\r\n        lastChunk = Math.min(chunkCount - 1, currentChunk + 1);\r\n\r\n        that.selectpicker.view.position0 = isVirtual === false ? 0 : (Math.max(0, chunks[firstChunk][0]) || 0);\r\n        that.selectpicker.view.position1 = isVirtual === false ? size : (Math.min(size, chunks[lastChunk][1]) || 0);\r\n\r\n        positionIsDifferent = prevPositions[0] !== that.selectpicker.view.position0 || prevPositions[1] !== that.selectpicker.view.position1;\r\n\r\n        if (that.activeIndex !== undefined) {\r\n          prevActive = that.selectpicker.main.elements[that.prevActiveIndex];\r\n          active = that.selectpicker.main.elements[that.activeIndex];\r\n          selected = that.selectpicker.main.elements[that.selectedIndex];\r\n\r\n          if (init) {\r\n            if (that.activeIndex !== that.selectedIndex) {\r\n              that.defocusItem(active);\r\n            }\r\n            that.activeIndex = undefined;\r\n          }\r\n\r\n          if (that.activeIndex && that.activeIndex !== that.selectedIndex) {\r\n            that.defocusItem(selected);\r\n          }\r\n        }\r\n\r\n        if (that.prevActiveIndex !== undefined && that.prevActiveIndex !== that.activeIndex && that.prevActiveIndex !== that.selectedIndex) {\r\n          that.defocusItem(prevActive);\r\n        }\r\n\r\n        if (init || positionIsDifferent) {\r\n          previousElements = that.selectpicker.view.visibleElements ? that.selectpicker.view.visibleElements.slice() : [];\r\n\r\n          if (isVirtual === false) {\r\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements;\r\n          } else {\r\n            that.selectpicker.view.visibleElements = that.selectpicker.current.elements.slice(that.selectpicker.view.position0, that.selectpicker.view.position1);\r\n          }\r\n\r\n          that.setOptionStatus();\r\n\r\n          // if searching, check to make sure the list has actually been updated before updating DOM\r\n          // this prevents unnecessary repaints\r\n          if (isSearching || (isVirtual === false && init)) menuIsDifferent = !isEqual(previousElements, that.selectpicker.view.visibleElements);\r\n\r\n          // if virtual scroll is disabled and not searching,\r\n          // menu should never need to be updated more than once\r\n          if ((init || isVirtual === true) && menuIsDifferent) {\r\n            var menuInner = that.$menuInner[0],\r\n                menuFragment = document.createDocumentFragment(),\r\n                emptyMenu = menuInner.firstChild.cloneNode(false),\r\n                marginTop,\r\n                marginBottom,\r\n                elements = that.selectpicker.view.visibleElements,\r\n                toSanitize = [];\r\n\r\n            // replace the existing UL with an empty one - this is faster than $.empty()\r\n            menuInner.replaceChild(emptyMenu, menuInner.firstChild);\r\n\r\n            for (var i = 0, visibleElementsLen = elements.length; i < visibleElementsLen; i++) {\r\n              var element = elements[i],\r\n                  elText,\r\n                  elementData;\r\n\r\n              if (that.options.sanitize) {\r\n                elText = element.lastChild;\r\n\r\n                if (elText) {\r\n                  elementData = that.selectpicker.current.data[i + that.selectpicker.view.position0];\r\n\r\n                  if (elementData && elementData.content && !elementData.sanitized) {\r\n                    toSanitize.push(elText);\r\n                    elementData.sanitized = true;\r\n                  }\r\n                }\r\n              }\r\n\r\n              menuFragment.appendChild(element);\r\n            }\r\n\r\n            if (that.options.sanitize && toSanitize.length) {\r\n              sanitizeHtml(toSanitize, that.options.whiteList, that.options.sanitizeFn);\r\n            }\r\n\r\n            if (isVirtual === true) {\r\n              marginTop = (that.selectpicker.view.position0 === 0 ? 0 : that.selectpicker.current.data[that.selectpicker.view.position0 - 1].position);\r\n              marginBottom = (that.selectpicker.view.position1 > size - 1 ? 0 : that.selectpicker.current.data[size - 1].position - that.selectpicker.current.data[that.selectpicker.view.position1 - 1].position);\r\n\r\n              menuInner.firstChild.style.marginTop = marginTop + 'px';\r\n              menuInner.firstChild.style.marginBottom = marginBottom + 'px';\r\n            } else {\r\n              menuInner.firstChild.style.marginTop = 0;\r\n              menuInner.firstChild.style.marginBottom = 0;\r\n            }\r\n\r\n            menuInner.firstChild.appendChild(menuFragment);\r\n\r\n            // if an option is encountered that is wider than the current menu width, update the menu width accordingly\r\n            // switch to ResizeObserver with increased browser support\r\n            if (isVirtual === true && that.sizeInfo.hasScrollBar) {\r\n              var menuInnerInnerWidth = menuInner.firstChild.offsetWidth;\r\n\r\n              if (init && menuInnerInnerWidth < that.sizeInfo.menuInnerInnerWidth && that.sizeInfo.totalMenuWidth > that.sizeInfo.selectWidth) {\r\n                menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\r\n              } else if (menuInnerInnerWidth > that.sizeInfo.menuInnerInnerWidth) {\r\n                // set to 0 to get actual width of menu\r\n                that.$menu[0].style.minWidth = 0;\r\n\r\n                var actualMenuWidth = menuInner.firstChild.offsetWidth;\r\n\r\n                if (actualMenuWidth > that.sizeInfo.menuInnerInnerWidth) {\r\n                  that.sizeInfo.menuInnerInnerWidth = actualMenuWidth;\r\n                  menuInner.firstChild.style.minWidth = that.sizeInfo.menuInnerInnerWidth + 'px';\r\n                }\r\n\r\n                // reset to default CSS styling\r\n                that.$menu[0].style.minWidth = '';\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        that.prevActiveIndex = that.activeIndex;\r\n\r\n        if (!that.options.liveSearch) {\r\n          that.$menuInner.trigger('focus');\r\n        } else if (isSearching && init) {\r\n          var index = 0,\r\n              newActive;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index]) {\r\n            index = 1 + that.selectpicker.view.canHighlight.slice(1).indexOf(true);\r\n          }\r\n\r\n          newActive = that.selectpicker.view.visibleElements[index];\r\n\r\n          that.defocusItem(that.selectpicker.view.currentActive);\r\n\r\n          that.activeIndex = (that.selectpicker.current.data[index] || {}).index;\r\n\r\n          that.focusItem(newActive);\r\n        }\r\n      }\r\n\r\n      $(window)\r\n        .off('resize' + EVENT_KEY + '.' + this.selectId + '.createView')\r\n        .on('resize' + EVENT_KEY + '.' + this.selectId + '.createView', function () {\r\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n          if (isActive) scroll(that.$menuInner[0].scrollTop);\r\n        });\r\n    },\r\n\r\n    focusItem: function (li, liData, noStyle) {\r\n      if (li) {\r\n        liData = liData || this.selectpicker.main.data[this.activeIndex];\r\n        var a = li.firstChild;\r\n\r\n        if (a) {\r\n          a.setAttribute('aria-setsize', this.selectpicker.view.size);\r\n          a.setAttribute('aria-posinset', liData.posinset);\r\n\r\n          if (noStyle !== true) {\r\n            this.focusedParent.setAttribute('aria-activedescendant', a.id);\r\n            li.classList.add('active');\r\n            a.classList.add('active');\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    defocusItem: function (li) {\r\n      if (li) {\r\n        li.classList.remove('active');\r\n        if (li.firstChild) li.firstChild.classList.remove('active');\r\n      }\r\n    },\r\n\r\n    setPlaceholder: function () {\r\n      var that = this,\r\n          updateIndex = false;\r\n\r\n      if (this.options.title && !this.multiple) {\r\n        if (!this.selectpicker.view.titleOption) this.selectpicker.view.titleOption = document.createElement('option');\r\n\r\n        // this option doesn't create a new <li> element, but does add a new option at the start,\r\n        // so startIndex should increase to prevent having to check every option for the bs-title-option class\r\n        updateIndex = true;\r\n\r\n        var element = this.$element[0],\r\n            selectTitleOption = false,\r\n            titleNotAppended = !this.selectpicker.view.titleOption.parentNode,\r\n            selectedIndex = element.selectedIndex,\r\n            selectedOption = element.options[selectedIndex],\r\n            navigation = window.performance && window.performance.getEntriesByType('navigation'),\r\n            // Safari doesn't support getEntriesByType('navigation') - fall back to performance.navigation\r\n            isNotBackForward = (navigation && navigation.length) ? navigation[0].type !== 'back_forward' : window.performance.navigation.type !== 2;\r\n\r\n        if (titleNotAppended) {\r\n          // Use native JS to prepend option (faster)\r\n          this.selectpicker.view.titleOption.className = 'bs-title-option';\r\n          this.selectpicker.view.titleOption.value = '';\r\n\r\n          // Check if selected or data-selected attribute is already set on an option. If not, select the titleOption option.\r\n          // the selected item may have been changed by user or programmatically before the bootstrap select plugin runs,\r\n          // if so, the select will have the data-selected attribute\r\n          selectTitleOption = !selectedOption || (selectedIndex === 0 && selectedOption.defaultSelected === false && this.$element.data('selected') === undefined);\r\n        }\r\n\r\n        if (titleNotAppended || this.selectpicker.view.titleOption.index !== 0) {\r\n          element.insertBefore(this.selectpicker.view.titleOption, element.firstChild);\r\n        }\r\n\r\n        // Set selected *after* appending to select,\r\n        // otherwise the option doesn't get selected in IE\r\n        // set using selectedIndex, as setting the selected attr to true here doesn't work in IE11\r\n        if (selectTitleOption && isNotBackForward) {\r\n          element.selectedIndex = 0;\r\n        } else if (document.readyState !== 'complete') {\r\n          // if navigation type is back_forward, there's a chance the select will have its value set by BFCache\r\n          // wait for that value to be set, then run render again\r\n          window.addEventListener('pageshow', function () {\r\n            if (that.selectpicker.view.displayedValue !== element.value) that.render();\r\n          });\r\n        }\r\n      }\r\n\r\n      return updateIndex;\r\n    },\r\n\r\n    buildData: function () {\r\n      var optionSelector = ':not([hidden]):not([data-hidden=\"true\"])',\r\n          mainData = [],\r\n          optID = 0,\r\n          startIndex = this.setPlaceholder() ? 1 : 0; // append the titleOption if necessary and skip the first option in the loop\r\n\r\n      if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\r\n\r\n      var selectOptions = this.$element[0].querySelectorAll('select > *' + optionSelector);\r\n\r\n      function addDivider (config) {\r\n        var previousData = mainData[mainData.length - 1];\r\n\r\n        // ensure optgroup doesn't create back-to-back dividers\r\n        if (\r\n          previousData &&\r\n          previousData.type === 'divider' &&\r\n          (previousData.optID || config.optID)\r\n        ) {\r\n          return;\r\n        }\r\n\r\n        config = config || {};\r\n        config.type = 'divider';\r\n\r\n        mainData.push(config);\r\n      }\r\n\r\n      function addOption (option, config) {\r\n        config = config || {};\r\n\r\n        config.divider = option.getAttribute('data-divider') === 'true';\r\n\r\n        if (config.divider) {\r\n          addDivider({\r\n            optID: config.optID\r\n          });\r\n        } else {\r\n          var liIndex = mainData.length,\r\n              cssText = option.style.cssText,\r\n              inlineStyle = cssText ? htmlEscape(cssText) : '',\r\n              optionClass = (option.className || '') + (config.optgroupClass || '');\r\n\r\n          if (config.optID) optionClass = 'opt ' + optionClass;\r\n\r\n          config.optionClass = optionClass.trim();\r\n          config.inlineStyle = inlineStyle;\r\n          config.text = option.textContent;\r\n\r\n          config.content = option.getAttribute('data-content');\r\n          config.tokens = option.getAttribute('data-tokens');\r\n          config.subtext = option.getAttribute('data-subtext');\r\n          config.icon = option.getAttribute('data-icon');\r\n\r\n          option.liIndex = liIndex;\r\n\r\n          config.display = config.content || config.text;\r\n          config.type = 'option';\r\n          config.index = liIndex;\r\n          config.option = option;\r\n          config.selected = !!option.selected;\r\n          config.disabled = config.disabled || !!option.disabled;\r\n\r\n          mainData.push(config);\r\n        }\r\n      }\r\n\r\n      function addOptgroup (index, selectOptions) {\r\n        var optgroup = selectOptions[index],\r\n            // skip placeholder option\r\n            previous = index - 1 < startIndex ? false : selectOptions[index - 1],\r\n            next = selectOptions[index + 1],\r\n            options = optgroup.querySelectorAll('option' + optionSelector);\r\n\r\n        if (!options.length) return;\r\n\r\n        var config = {\r\n              display: htmlEscape(optgroup.label),\r\n              subtext: optgroup.getAttribute('data-subtext'),\r\n              icon: optgroup.getAttribute('data-icon'),\r\n              type: 'optgroup-label',\r\n              optgroupClass: ' ' + (optgroup.className || '')\r\n            },\r\n            headerIndex,\r\n            lastIndex;\r\n\r\n        optID++;\r\n\r\n        if (previous) {\r\n          addDivider({ optID: optID });\r\n        }\r\n\r\n        config.optID = optID;\r\n\r\n        mainData.push(config);\r\n\r\n        for (var j = 0, len = options.length; j < len; j++) {\r\n          var option = options[j];\r\n\r\n          if (j === 0) {\r\n            headerIndex = mainData.length - 1;\r\n            lastIndex = headerIndex + len;\r\n          }\r\n\r\n          addOption(option, {\r\n            headerIndex: headerIndex,\r\n            lastIndex: lastIndex,\r\n            optID: config.optID,\r\n            optgroupClass: config.optgroupClass,\r\n            disabled: optgroup.disabled\r\n          });\r\n        }\r\n\r\n        if (next) {\r\n          addDivider({ optID: optID });\r\n        }\r\n      }\r\n\r\n      for (var len = selectOptions.length, i = startIndex; i < len; i++) {\r\n        var item = selectOptions[i];\r\n\r\n        if (item.tagName !== 'OPTGROUP') {\r\n          addOption(item, {});\r\n        } else {\r\n          addOptgroup(i, selectOptions);\r\n        }\r\n      }\r\n\r\n      this.selectpicker.main.data = this.selectpicker.current.data = mainData;\r\n    },\r\n\r\n    buildList: function () {\r\n      var that = this,\r\n          selectData = this.selectpicker.main.data,\r\n          mainElements = [],\r\n          widestOptionLength = 0;\r\n\r\n      if ((that.options.showTick || that.multiple) && !elementTemplates.checkMark.parentNode) {\r\n        elementTemplates.checkMark.className = this.options.iconBase + ' ' + that.options.tickIcon + ' check-mark';\r\n        elementTemplates.a.appendChild(elementTemplates.checkMark);\r\n      }\r\n\r\n      function buildElement (item) {\r\n        var liElement,\r\n            combinedLength = 0;\r\n\r\n        switch (item.type) {\r\n          case 'divider':\r\n            liElement = generateOption.li(\r\n              false,\r\n              classNames.DIVIDER,\r\n              (item.optID ? item.optID + 'div' : undefined)\r\n            );\r\n\r\n            break;\r\n\r\n          case 'option':\r\n            liElement = generateOption.li(\r\n              generateOption.a(\r\n                generateOption.text.call(that, item),\r\n                item.optionClass,\r\n                item.inlineStyle\r\n              ),\r\n              '',\r\n              item.optID\r\n            );\r\n\r\n            if (liElement.firstChild) {\r\n              liElement.firstChild.id = that.selectId + '-' + item.index;\r\n            }\r\n\r\n            break;\r\n\r\n          case 'optgroup-label':\r\n            liElement = generateOption.li(\r\n              generateOption.label.call(that, item),\r\n              'dropdown-header' + item.optgroupClass,\r\n              item.optID\r\n            );\r\n\r\n            break;\r\n        }\r\n\r\n        item.element = liElement;\r\n        mainElements.push(liElement);\r\n\r\n        // count the number of characters in the option - not perfect, but should work in most cases\r\n        if (item.display) combinedLength += item.display.length;\r\n        if (item.subtext) combinedLength += item.subtext.length;\r\n        // if there is an icon, ensure this option's width is checked\r\n        if (item.icon) combinedLength += 1;\r\n\r\n        if (combinedLength > widestOptionLength) {\r\n          widestOptionLength = combinedLength;\r\n\r\n          // guess which option is the widest\r\n          // use this when calculating menu width\r\n          // not perfect, but it's fast, and the width will be updating accordingly when scrolling\r\n          that.selectpicker.view.widestOption = mainElements[mainElements.length - 1];\r\n        }\r\n      }\r\n\r\n      for (var len = selectData.length, i = 0; i < len; i++) {\r\n        var item = selectData[i];\r\n\r\n        buildElement(item);\r\n      }\r\n\r\n      this.selectpicker.main.elements = this.selectpicker.current.elements = mainElements;\r\n    },\r\n\r\n    findLis: function () {\r\n      return this.$menuInner.find('.inner > li');\r\n    },\r\n\r\n    render: function () {\r\n      var that = this,\r\n          element = this.$element[0],\r\n          // ensure titleOption is appended and selected (if necessary) before getting selectedOptions\r\n          placeholderSelected = this.setPlaceholder() && element.selectedIndex === 0,\r\n          selectedOptions = getSelectedOptions(element, this.options.hideDisabled),\r\n          selectedCount = selectedOptions.length,\r\n          button = this.$button[0],\r\n          buttonInner = button.querySelector('.filter-option-inner-inner'),\r\n          multipleSeparator = document.createTextNode(this.options.multipleSeparator),\r\n          titleFragment = elementTemplates.fragment.cloneNode(false),\r\n          showCount,\r\n          countMax,\r\n          hasContent = false;\r\n\r\n      button.classList.toggle('bs-placeholder', that.multiple ? !selectedCount : !getSelectValues(element, selectedOptions));\r\n\r\n      if (!that.multiple && selectedOptions.length === 1) {\r\n        that.selectpicker.view.displayedValue = getSelectValues(element, selectedOptions);\r\n      }\r\n\r\n      if (this.options.selectedTextFormat === 'static') {\r\n        titleFragment = generateOption.text.call(this, { text: this.options.title }, true);\r\n      } else {\r\n        showCount = this.multiple && this.options.selectedTextFormat.indexOf('count') !== -1 && selectedCount > 1;\r\n\r\n        // determine if the number of selected options will be shown (showCount === true)\r\n        if (showCount) {\r\n          countMax = this.options.selectedTextFormat.split('>');\r\n          showCount = (countMax.length > 1 && selectedCount > countMax[1]) || (countMax.length === 1 && selectedCount >= 2);\r\n        }\r\n\r\n        // only loop through all selected options if the count won't be shown\r\n        if (showCount === false) {\r\n          if (!placeholderSelected) {\r\n            for (var selectedIndex = 0; selectedIndex < selectedCount; selectedIndex++) {\r\n              if (selectedIndex < 50) {\r\n                var option = selectedOptions[selectedIndex],\r\n                    thisData = this.selectpicker.main.data[option.liIndex],\r\n                    titleOptions = {};\r\n\r\n                if (this.multiple && selectedIndex > 0) {\r\n                  titleFragment.appendChild(multipleSeparator.cloneNode(false));\r\n                }\r\n\r\n                if (option.title) {\r\n                  titleOptions.text = option.title;\r\n                } else if (thisData) {\r\n                  if (thisData.content && that.options.showContent) {\r\n                    titleOptions.content = thisData.content.toString();\r\n                    hasContent = true;\r\n                  } else {\r\n                    if (that.options.showIcon) {\r\n                      titleOptions.icon = thisData.icon;\r\n                    }\r\n                    if (that.options.showSubtext && !that.multiple && thisData.subtext) titleOptions.subtext = ' ' + thisData.subtext;\r\n                    titleOptions.text = option.textContent.trim();\r\n                  }\r\n                }\r\n\r\n                titleFragment.appendChild(generateOption.text.call(this, titleOptions, true));\r\n              } else {\r\n                break;\r\n              }\r\n            }\r\n\r\n            // add ellipsis\r\n            if (selectedCount > 49) {\r\n              titleFragment.appendChild(document.createTextNode('...'));\r\n            }\r\n          }\r\n        } else {\r\n          var optionSelector = ':not([hidden]):not([data-hidden=\"true\"]):not([data-divider=\"true\"])';\r\n          if (this.options.hideDisabled) optionSelector += ':not(:disabled)';\r\n\r\n          // If this is a multiselect, and selectedTextFormat is count, then show 1 of 2 selected, etc.\r\n          var totalCount = this.$element[0].querySelectorAll('select > option' + optionSelector + ', optgroup' + optionSelector + ' option' + optionSelector).length,\r\n              tr8nText = (typeof this.options.countSelectedText === 'function') ? this.options.countSelectedText(selectedCount, totalCount) : this.options.countSelectedText;\r\n\r\n          titleFragment = generateOption.text.call(this, {\r\n            text: tr8nText.replace('{0}', selectedCount.toString()).replace('{1}', totalCount.toString())\r\n          }, true);\r\n        }\r\n      }\r\n\r\n      if (this.options.title == undefined) {\r\n        // use .attr to ensure undefined is returned if title attribute is not set\r\n        this.options.title = this.$element.attr('title');\r\n      }\r\n\r\n      // If the select doesn't have a title, then use the default, or if nothing is set at all, use noneSelectedText\r\n      if (!titleFragment.childNodes.length) {\r\n        titleFragment = generateOption.text.call(this, {\r\n          text: typeof this.options.title !== 'undefined' ? this.options.title : this.options.noneSelectedText\r\n        }, true);\r\n      }\r\n\r\n      // strip all HTML tags and trim the result, then unescape any escaped tags\r\n      button.title = titleFragment.textContent.replace(/<[^>]*>?/g, '').trim();\r\n\r\n      if (this.options.sanitize && hasContent) {\r\n        sanitizeHtml([titleFragment], that.options.whiteList, that.options.sanitizeFn);\r\n      }\r\n\r\n      buttonInner.innerHTML = '';\r\n      buttonInner.appendChild(titleFragment);\r\n\r\n      if (version.major < 4 && this.$newElement[0].classList.contains('bs3-has-addon')) {\r\n        var filterExpand = button.querySelector('.filter-expand'),\r\n            clone = buttonInner.cloneNode(true);\r\n\r\n        clone.className = 'filter-expand';\r\n\r\n        if (filterExpand) {\r\n          button.replaceChild(clone, filterExpand);\r\n        } else {\r\n          button.appendChild(clone);\r\n        }\r\n      }\r\n\r\n      this.$element.trigger('rendered' + EVENT_KEY);\r\n    },\r\n\r\n    /**\r\n     * @param [style]\r\n     * @param [status]\r\n     */\r\n    setStyle: function (newStyle, status) {\r\n      var button = this.$button[0],\r\n          newElement = this.$newElement[0],\r\n          style = this.options.style.trim(),\r\n          buttonClass;\r\n\r\n      if (this.$element.attr('class')) {\r\n        this.$newElement.addClass(this.$element.attr('class').replace(/selectpicker|mobile-device|bs-select-hidden|validate\\[.*\\]/gi, ''));\r\n      }\r\n\r\n      if (version.major < 4) {\r\n        newElement.classList.add('bs3');\r\n\r\n        if (newElement.parentNode.classList && newElement.parentNode.classList.contains('input-group') &&\r\n            (newElement.previousElementSibling || newElement.nextElementSibling) &&\r\n            (newElement.previousElementSibling || newElement.nextElementSibling).classList.contains('input-group-addon')\r\n        ) {\r\n          newElement.classList.add('bs3-has-addon');\r\n        }\r\n      }\r\n\r\n      if (newStyle) {\r\n        buttonClass = newStyle.trim();\r\n      } else {\r\n        buttonClass = style;\r\n      }\r\n\r\n      if (status == 'add') {\r\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\r\n      } else if (status == 'remove') {\r\n        if (buttonClass) button.classList.remove.apply(button.classList, buttonClass.split(' '));\r\n      } else {\r\n        if (style) button.classList.remove.apply(button.classList, style.split(' '));\r\n        if (buttonClass) button.classList.add.apply(button.classList, buttonClass.split(' '));\r\n      }\r\n    },\r\n\r\n    liHeight: function (refresh) {\r\n      if (!refresh && (this.options.size === false || Object.keys(this.sizeInfo).length)) return;\r\n\r\n      var newElement = elementTemplates.div.cloneNode(false),\r\n          menu = elementTemplates.div.cloneNode(false),\r\n          menuInner = elementTemplates.div.cloneNode(false),\r\n          menuInnerInner = document.createElement('ul'),\r\n          divider = elementTemplates.li.cloneNode(false),\r\n          dropdownHeader = elementTemplates.li.cloneNode(false),\r\n          li,\r\n          a = elementTemplates.a.cloneNode(false),\r\n          text = elementTemplates.span.cloneNode(false),\r\n          header = this.options.header && this.$menu.find('.' + classNames.POPOVERHEADER).length > 0 ? this.$menu.find('.' + classNames.POPOVERHEADER)[0].cloneNode(true) : null,\r\n          search = this.options.liveSearch ? elementTemplates.div.cloneNode(false) : null,\r\n          actions = this.options.actionsBox && this.multiple && this.$menu.find('.bs-actionsbox').length > 0 ? this.$menu.find('.bs-actionsbox')[0].cloneNode(true) : null,\r\n          doneButton = this.options.doneButton && this.multiple && this.$menu.find('.bs-donebutton').length > 0 ? this.$menu.find('.bs-donebutton')[0].cloneNode(true) : null,\r\n          firstOption = this.$element.find('option')[0];\r\n\r\n      this.sizeInfo.selectWidth = this.$newElement[0].offsetWidth;\r\n\r\n      text.className = 'text';\r\n      a.className = 'dropdown-item ' + (firstOption ? firstOption.className : '');\r\n      newElement.className = this.$menu[0].parentNode.className + ' ' + classNames.SHOW;\r\n      newElement.style.width = 0; // ensure button width doesn't affect natural width of menu when calculating\r\n      if (this.options.width === 'auto') menu.style.minWidth = 0;\r\n      menu.className = classNames.MENU + ' ' + classNames.SHOW;\r\n      menuInner.className = 'inner ' + classNames.SHOW;\r\n      menuInnerInner.className = classNames.MENU + ' inner ' + (version.major === '4' ? classNames.SHOW : '');\r\n      divider.className = classNames.DIVIDER;\r\n      dropdownHeader.className = 'dropdown-header';\r\n\r\n      text.appendChild(document.createTextNode('\\u200b'));\r\n\r\n      if (this.selectpicker.current.data.length) {\r\n        for (var i = 0; i < this.selectpicker.current.data.length; i++) {\r\n          var data = this.selectpicker.current.data[i];\r\n          if (data.type === 'option') {\r\n            li = data.element;\r\n            break;\r\n          }\r\n        }\r\n      } else {\r\n        li = elementTemplates.li.cloneNode(false);\r\n        a.appendChild(text);\r\n        li.appendChild(a);\r\n      }\r\n\r\n      dropdownHeader.appendChild(text.cloneNode(true));\r\n\r\n      if (this.selectpicker.view.widestOption) {\r\n        menuInnerInner.appendChild(this.selectpicker.view.widestOption.cloneNode(true));\r\n      }\r\n\r\n      menuInnerInner.appendChild(li);\r\n      menuInnerInner.appendChild(divider);\r\n      menuInnerInner.appendChild(dropdownHeader);\r\n      if (header) menu.appendChild(header);\r\n      if (search) {\r\n        var input = document.createElement('input');\r\n        search.className = 'bs-searchbox';\r\n        input.className = 'form-control';\r\n        search.appendChild(input);\r\n        menu.appendChild(search);\r\n      }\r\n      if (actions) menu.appendChild(actions);\r\n      menuInner.appendChild(menuInnerInner);\r\n      menu.appendChild(menuInner);\r\n      if (doneButton) menu.appendChild(doneButton);\r\n      newElement.appendChild(menu);\r\n\r\n      document.body.appendChild(newElement);\r\n\r\n      var liHeight = li.offsetHeight,\r\n          dropdownHeaderHeight = dropdownHeader ? dropdownHeader.offsetHeight : 0,\r\n          headerHeight = header ? header.offsetHeight : 0,\r\n          searchHeight = search ? search.offsetHeight : 0,\r\n          actionsHeight = actions ? actions.offsetHeight : 0,\r\n          doneButtonHeight = doneButton ? doneButton.offsetHeight : 0,\r\n          dividerHeight = $(divider).outerHeight(true),\r\n          // fall back to jQuery if getComputedStyle is not supported\r\n          menuStyle = window.getComputedStyle ? window.getComputedStyle(menu) : false,\r\n          menuWidth = menu.offsetWidth,\r\n          $menu = menuStyle ? null : $(menu),\r\n          menuPadding = {\r\n            vert: toInteger(menuStyle ? menuStyle.paddingTop : $menu.css('paddingTop')) +\r\n                  toInteger(menuStyle ? menuStyle.paddingBottom : $menu.css('paddingBottom')) +\r\n                  toInteger(menuStyle ? menuStyle.borderTopWidth : $menu.css('borderTopWidth')) +\r\n                  toInteger(menuStyle ? menuStyle.borderBottomWidth : $menu.css('borderBottomWidth')),\r\n            horiz: toInteger(menuStyle ? menuStyle.paddingLeft : $menu.css('paddingLeft')) +\r\n                  toInteger(menuStyle ? menuStyle.paddingRight : $menu.css('paddingRight')) +\r\n                  toInteger(menuStyle ? menuStyle.borderLeftWidth : $menu.css('borderLeftWidth')) +\r\n                  toInteger(menuStyle ? menuStyle.borderRightWidth : $menu.css('borderRightWidth'))\r\n          },\r\n          menuExtras = {\r\n            vert: menuPadding.vert +\r\n                  toInteger(menuStyle ? menuStyle.marginTop : $menu.css('marginTop')) +\r\n                  toInteger(menuStyle ? menuStyle.marginBottom : $menu.css('marginBottom')) + 2,\r\n            horiz: menuPadding.horiz +\r\n                  toInteger(menuStyle ? menuStyle.marginLeft : $menu.css('marginLeft')) +\r\n                  toInteger(menuStyle ? menuStyle.marginRight : $menu.css('marginRight')) + 2\r\n          },\r\n          scrollBarWidth;\r\n\r\n      menuInner.style.overflowY = 'scroll';\r\n\r\n      scrollBarWidth = menu.offsetWidth - menuWidth;\r\n\r\n      document.body.removeChild(newElement);\r\n\r\n      this.sizeInfo.liHeight = liHeight;\r\n      this.sizeInfo.dropdownHeaderHeight = dropdownHeaderHeight;\r\n      this.sizeInfo.headerHeight = headerHeight;\r\n      this.sizeInfo.searchHeight = searchHeight;\r\n      this.sizeInfo.actionsHeight = actionsHeight;\r\n      this.sizeInfo.doneButtonHeight = doneButtonHeight;\r\n      this.sizeInfo.dividerHeight = dividerHeight;\r\n      this.sizeInfo.menuPadding = menuPadding;\r\n      this.sizeInfo.menuExtras = menuExtras;\r\n      this.sizeInfo.menuWidth = menuWidth;\r\n      this.sizeInfo.menuInnerInnerWidth = menuWidth - menuPadding.horiz;\r\n      this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth;\r\n      this.sizeInfo.scrollBarWidth = scrollBarWidth;\r\n      this.sizeInfo.selectHeight = this.$newElement[0].offsetHeight;\r\n\r\n      this.setPositionData();\r\n    },\r\n\r\n    getSelectPosition: function () {\r\n      var that = this,\r\n          $window = $(window),\r\n          pos = that.$newElement.offset(),\r\n          $container = $(that.options.container),\r\n          containerPos;\r\n\r\n      if (that.options.container && $container.length && !$container.is('body')) {\r\n        containerPos = $container.offset();\r\n        containerPos.top += parseInt($container.css('borderTopWidth'));\r\n        containerPos.left += parseInt($container.css('borderLeftWidth'));\r\n      } else {\r\n        containerPos = { top: 0, left: 0 };\r\n      }\r\n\r\n      var winPad = that.options.windowPadding;\r\n\r\n      this.sizeInfo.selectOffsetTop = pos.top - containerPos.top - $window.scrollTop();\r\n      this.sizeInfo.selectOffsetBot = $window.height() - this.sizeInfo.selectOffsetTop - this.sizeInfo.selectHeight - containerPos.top - winPad[2];\r\n      this.sizeInfo.selectOffsetLeft = pos.left - containerPos.left - $window.scrollLeft();\r\n      this.sizeInfo.selectOffsetRight = $window.width() - this.sizeInfo.selectOffsetLeft - this.sizeInfo.selectWidth - containerPos.left - winPad[1];\r\n      this.sizeInfo.selectOffsetTop -= winPad[0];\r\n      this.sizeInfo.selectOffsetLeft -= winPad[3];\r\n    },\r\n\r\n    setMenuSize: function (isAuto) {\r\n      this.getSelectPosition();\r\n\r\n      var selectWidth = this.sizeInfo.selectWidth,\r\n          liHeight = this.sizeInfo.liHeight,\r\n          headerHeight = this.sizeInfo.headerHeight,\r\n          searchHeight = this.sizeInfo.searchHeight,\r\n          actionsHeight = this.sizeInfo.actionsHeight,\r\n          doneButtonHeight = this.sizeInfo.doneButtonHeight,\r\n          divHeight = this.sizeInfo.dividerHeight,\r\n          menuPadding = this.sizeInfo.menuPadding,\r\n          menuInnerHeight,\r\n          menuHeight,\r\n          divLength = 0,\r\n          minHeight,\r\n          _minHeight,\r\n          maxHeight,\r\n          menuInnerMinHeight,\r\n          estimate,\r\n          isDropup;\r\n\r\n      if (this.options.dropupAuto) {\r\n        // Get the estimated height of the menu without scrollbars.\r\n        // This is useful for smaller menus, where there might be plenty of room\r\n        // below the button without setting dropup, but we can't know\r\n        // the exact height of the menu until createView is called later\r\n        estimate = liHeight * this.selectpicker.current.elements.length + menuPadding.vert;\r\n\r\n        isDropup = this.sizeInfo.selectOffsetTop - this.sizeInfo.selectOffsetBot > this.sizeInfo.menuExtras.vert && estimate + this.sizeInfo.menuExtras.vert + 50 > this.sizeInfo.selectOffsetBot;\r\n\r\n        // ensure dropup doesn't change while searching (so menu doesn't bounce back and forth)\r\n        if (this.selectpicker.isSearching === true) {\r\n          isDropup = this.selectpicker.dropup;\r\n        }\r\n\r\n        this.$newElement.toggleClass(classNames.DROPUP, isDropup);\r\n        this.selectpicker.dropup = isDropup;\r\n      }\r\n\r\n      if (this.options.size === 'auto') {\r\n        _minHeight = this.selectpicker.current.elements.length > 3 ? this.sizeInfo.liHeight * 3 + this.sizeInfo.menuExtras.vert - 2 : 0;\r\n        menuHeight = this.sizeInfo.selectOffsetBot - this.sizeInfo.menuExtras.vert;\r\n        minHeight = _minHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\r\n        menuInnerMinHeight = Math.max(_minHeight - menuPadding.vert, 0);\r\n\r\n        if (this.$newElement.hasClass(classNames.DROPUP)) {\r\n          menuHeight = this.sizeInfo.selectOffsetTop - this.sizeInfo.menuExtras.vert;\r\n        }\r\n\r\n        maxHeight = menuHeight;\r\n        menuInnerHeight = menuHeight - headerHeight - searchHeight - actionsHeight - doneButtonHeight - menuPadding.vert;\r\n      } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\r\n        for (var i = 0; i < this.options.size; i++) {\r\n          if (this.selectpicker.current.data[i].type === 'divider') divLength++;\r\n        }\r\n\r\n        menuHeight = liHeight * this.options.size + divLength * divHeight + menuPadding.vert;\r\n        menuInnerHeight = menuHeight - menuPadding.vert;\r\n        maxHeight = menuHeight + headerHeight + searchHeight + actionsHeight + doneButtonHeight;\r\n        minHeight = menuInnerMinHeight = '';\r\n      }\r\n\r\n      this.$menu.css({\r\n        'max-height': maxHeight + 'px',\r\n        'overflow': 'hidden',\r\n        'min-height': minHeight + 'px'\r\n      });\r\n\r\n      this.$menuInner.css({\r\n        'max-height': menuInnerHeight + 'px',\r\n        'overflow-y': 'auto',\r\n        'min-height': menuInnerMinHeight + 'px'\r\n      });\r\n\r\n      // ensure menuInnerHeight is always a positive number to prevent issues calculating chunkSize in createView\r\n      this.sizeInfo.menuInnerHeight = Math.max(menuInnerHeight, 1);\r\n\r\n      if (this.selectpicker.current.data.length && this.selectpicker.current.data[this.selectpicker.current.data.length - 1].position > this.sizeInfo.menuInnerHeight) {\r\n        this.sizeInfo.hasScrollBar = true;\r\n        this.sizeInfo.totalMenuWidth = this.sizeInfo.menuWidth + this.sizeInfo.scrollBarWidth;\r\n      }\r\n\r\n      if (this.options.dropdownAlignRight === 'auto') {\r\n        this.$menu.toggleClass(classNames.MENURIGHT, this.sizeInfo.selectOffsetLeft > this.sizeInfo.selectOffsetRight && this.sizeInfo.selectOffsetRight < (this.sizeInfo.totalMenuWidth - selectWidth));\r\n      }\r\n\r\n      if (this.dropdown && this.dropdown._popper) this.dropdown._popper.update();\r\n    },\r\n\r\n    setSize: function (refresh) {\r\n      this.liHeight(refresh);\r\n\r\n      if (this.options.header) this.$menu.css('padding-top', 0);\r\n\r\n      if (this.options.size !== false) {\r\n        var that = this,\r\n            $window = $(window);\r\n\r\n        this.setMenuSize();\r\n\r\n        if (this.options.liveSearch) {\r\n          this.$searchbox\r\n            .off('input.setMenuSize propertychange.setMenuSize')\r\n            .on('input.setMenuSize propertychange.setMenuSize', function () {\r\n              return that.setMenuSize();\r\n            });\r\n        }\r\n\r\n        if (this.options.size === 'auto') {\r\n          $window\r\n            .off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize')\r\n            .on('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize', function () {\r\n              return that.setMenuSize();\r\n            });\r\n        } else if (this.options.size && this.options.size != 'auto' && this.selectpicker.current.elements.length > this.options.size) {\r\n          $window.off('resize' + EVENT_KEY + '.' + this.selectId + '.setMenuSize' + ' scroll' + EVENT_KEY + '.' + this.selectId + '.setMenuSize');\r\n        }\r\n      }\r\n\r\n      this.createView(false, true, refresh);\r\n    },\r\n\r\n    setWidth: function () {\r\n      var that = this;\r\n\r\n      if (this.options.width === 'auto') {\r\n        requestAnimationFrame(function () {\r\n          that.$menu.css('min-width', '0');\r\n\r\n          that.$element.on('loaded' + EVENT_KEY, function () {\r\n            that.liHeight();\r\n            that.setMenuSize();\r\n\r\n            // Get correct width if element is hidden\r\n            var $selectClone = that.$newElement.clone().appendTo('body'),\r\n                btnWidth = $selectClone.css('width', 'auto').children('button').outerWidth();\r\n\r\n            $selectClone.remove();\r\n\r\n            // Set width to whatever's larger, button title or longest option\r\n            that.sizeInfo.selectWidth = Math.max(that.sizeInfo.totalMenuWidth, btnWidth);\r\n            that.$newElement.css('width', that.sizeInfo.selectWidth + 'px');\r\n          });\r\n        });\r\n      } else if (this.options.width === 'fit') {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '').addClass('fit-width');\r\n      } else if (this.options.width) {\r\n        // Remove inline min-width so width can be changed from 'auto'\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', this.options.width);\r\n      } else {\r\n        // Remove inline min-width/width so width can be changed\r\n        this.$menu.css('min-width', '');\r\n        this.$newElement.css('width', '');\r\n      }\r\n      // Remove fit-width class if width is changed programmatically\r\n      if (this.$newElement.hasClass('fit-width') && this.options.width !== 'fit') {\r\n        this.$newElement[0].classList.remove('fit-width');\r\n      }\r\n    },\r\n\r\n    selectPosition: function () {\r\n      this.$bsContainer = $('<div class=\"bs-container\" />');\r\n\r\n      var that = this,\r\n          $container = $(this.options.container),\r\n          pos,\r\n          containerPos,\r\n          actualHeight,\r\n          getPlacement = function ($element) {\r\n            var containerPosition = {},\r\n                // fall back to dropdown's default display setting if display is not manually set\r\n                display = that.options.display || (\r\n                  // Bootstrap 3 doesn't have $.fn.dropdown.Constructor.Default\r\n                  $.fn.dropdown.Constructor.Default ? $.fn.dropdown.Constructor.Default.display\r\n                  : false\r\n                );\r\n\r\n            that.$bsContainer.addClass($element.attr('class').replace(/form-control|fit-width/gi, '')).toggleClass(classNames.DROPUP, $element.hasClass(classNames.DROPUP));\r\n            pos = $element.offset();\r\n\r\n            if (!$container.is('body')) {\r\n              containerPos = $container.offset();\r\n              containerPos.top += parseInt($container.css('borderTopWidth')) - $container.scrollTop();\r\n              containerPos.left += parseInt($container.css('borderLeftWidth')) - $container.scrollLeft();\r\n            } else {\r\n              containerPos = { top: 0, left: 0 };\r\n            }\r\n\r\n            actualHeight = $element.hasClass(classNames.DROPUP) ? 0 : $element[0].offsetHeight;\r\n\r\n            // Bootstrap 4+ uses Popper for menu positioning\r\n            if (version.major < 4 || display === 'static') {\r\n              containerPosition.top = pos.top - containerPos.top + actualHeight;\r\n              containerPosition.left = pos.left - containerPos.left;\r\n            }\r\n\r\n            containerPosition.width = $element[0].offsetWidth;\r\n\r\n            that.$bsContainer.css(containerPosition);\r\n          };\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (that.isDisabled()) {\r\n          return;\r\n        }\r\n\r\n        getPlacement(that.$newElement);\r\n\r\n        that.$bsContainer\r\n          .appendTo(that.options.container)\r\n          .toggleClass(classNames.SHOW, !that.$button.hasClass(classNames.SHOW))\r\n          .append(that.$menu);\r\n      });\r\n\r\n      $(window)\r\n        .off('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId)\r\n        .on('resize' + EVENT_KEY + '.' + this.selectId + ' scroll' + EVENT_KEY + '.' + this.selectId, function () {\r\n          var isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n          if (isActive) getPlacement(that.$newElement);\r\n        });\r\n\r\n      this.$element.on('hide' + EVENT_KEY, function () {\r\n        that.$menu.data('height', that.$menu.height());\r\n        that.$bsContainer.detach();\r\n      });\r\n    },\r\n\r\n    setOptionStatus: function (selectedOnly) {\r\n      var that = this;\r\n\r\n      that.noScroll = false;\r\n\r\n      if (that.selectpicker.view.visibleElements && that.selectpicker.view.visibleElements.length) {\r\n        for (var i = 0; i < that.selectpicker.view.visibleElements.length; i++) {\r\n          var liData = that.selectpicker.current.data[i + that.selectpicker.view.position0],\r\n              option = liData.option;\r\n\r\n          if (option) {\r\n            if (selectedOnly !== true) {\r\n              that.setDisabled(\r\n                liData.index,\r\n                liData.disabled\r\n              );\r\n            }\r\n\r\n            that.setSelected(\r\n              liData.index,\r\n              option.selected\r\n            );\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being changed\r\n     * @param {boolean} selected - true if the option is being selected, false if being deselected\r\n     */\r\n    setSelected: function (index, selected) {\r\n      var li = this.selectpicker.main.elements[index],\r\n          liData = this.selectpicker.main.data[index],\r\n          activeIndexIsSet = this.activeIndex !== undefined,\r\n          thisIsActive = this.activeIndex === index,\r\n          prevActive,\r\n          a,\r\n          // if current option is already active\r\n          // OR\r\n          // if the current option is being selected, it's NOT multiple, and\r\n          // activeIndex is undefined:\r\n          //  - when the menu is first being opened, OR\r\n          //  - after a search has been performed, OR\r\n          //  - when retainActive is false when selecting a new option (i.e. index of the newly selected option is not the same as the current activeIndex)\r\n          keepActive = thisIsActive || (selected && !this.multiple && !activeIndexIsSet);\r\n\r\n      liData.selected = selected;\r\n\r\n      a = li.firstChild;\r\n\r\n      if (selected) {\r\n        this.selectedIndex = index;\r\n      }\r\n\r\n      li.classList.toggle('selected', selected);\r\n\r\n      if (keepActive) {\r\n        this.focusItem(li, liData);\r\n        this.selectpicker.view.currentActive = li;\r\n        this.activeIndex = index;\r\n      } else {\r\n        this.defocusItem(li);\r\n      }\r\n\r\n      if (a) {\r\n        a.classList.toggle('selected', selected);\r\n\r\n        if (selected) {\r\n          a.setAttribute('aria-selected', true);\r\n        } else {\r\n          if (this.multiple) {\r\n            a.setAttribute('aria-selected', false);\r\n          } else {\r\n            a.removeAttribute('aria-selected');\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!keepActive && !activeIndexIsSet && selected && this.prevActiveIndex !== undefined) {\r\n        prevActive = this.selectpicker.main.elements[this.prevActiveIndex];\r\n\r\n        this.defocusItem(prevActive);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * @param {number} index - the index of the option that is being disabled\r\n     * @param {boolean} disabled - true if the option is being disabled, false if being enabled\r\n     */\r\n    setDisabled: function (index, disabled) {\r\n      var li = this.selectpicker.main.elements[index],\r\n          a;\r\n\r\n      this.selectpicker.main.data[index].disabled = disabled;\r\n\r\n      a = li.firstChild;\r\n\r\n      li.classList.toggle(classNames.DISABLED, disabled);\r\n\r\n      if (a) {\r\n        if (version.major === '4') a.classList.toggle(classNames.DISABLED, disabled);\r\n\r\n        if (disabled) {\r\n          a.setAttribute('aria-disabled', disabled);\r\n          a.setAttribute('tabindex', -1);\r\n        } else {\r\n          a.removeAttribute('aria-disabled');\r\n          a.setAttribute('tabindex', 0);\r\n        }\r\n      }\r\n    },\r\n\r\n    isDisabled: function () {\r\n      return this.$element[0].disabled;\r\n    },\r\n\r\n    checkDisabled: function () {\r\n      if (this.isDisabled()) {\r\n        this.$newElement[0].classList.add(classNames.DISABLED);\r\n        this.$button.addClass(classNames.DISABLED).attr('aria-disabled', true);\r\n      } else {\r\n        if (this.$button[0].classList.contains(classNames.DISABLED)) {\r\n          this.$newElement[0].classList.remove(classNames.DISABLED);\r\n          this.$button.removeClass(classNames.DISABLED).attr('aria-disabled', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    clickListener: function () {\r\n      var that = this,\r\n          $document = $(document);\r\n\r\n      $document.data('spaceSelect', false);\r\n\r\n      this.$button.on('keyup', function (e) {\r\n        if (/(32)/.test(e.keyCode.toString(10)) && $document.data('spaceSelect')) {\r\n          e.preventDefault();\r\n          $document.data('spaceSelect', false);\r\n        }\r\n      });\r\n\r\n      this.$newElement.on('show.bs.dropdown', function () {\r\n        if (version.major > 3 && !that.dropdown) {\r\n          that.dropdown = that.$button.data('bs.dropdown');\r\n          that.dropdown._menu = that.$menu[0];\r\n        }\r\n      });\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (!that.$newElement.hasClass(classNames.SHOW)) {\r\n          that.setSize();\r\n        }\r\n      });\r\n\r\n      function setFocus () {\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$menuInner.trigger('focus');\r\n        }\r\n      }\r\n\r\n      function checkPopperExists () {\r\n        if (that.dropdown && that.dropdown._popper && that.dropdown._popper.state.isCreated) {\r\n          setFocus();\r\n        } else {\r\n          requestAnimationFrame(checkPopperExists);\r\n        }\r\n      }\r\n\r\n      this.$element.on('shown' + EVENT_KEY, function () {\r\n        if (that.$menuInner[0].scrollTop !== that.selectpicker.view.scrollTop) {\r\n          that.$menuInner[0].scrollTop = that.selectpicker.view.scrollTop;\r\n        }\r\n\r\n        if (version.major > 3) {\r\n          requestAnimationFrame(checkPopperExists);\r\n        } else {\r\n          setFocus();\r\n        }\r\n      });\r\n\r\n      // ensure posinset and setsize are correct before selecting an option via a click\r\n      this.$menuInner.on('mouseenter', 'li a', function (e) {\r\n        var hoverLi = this.parentElement,\r\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\r\n            index = Array.prototype.indexOf.call(hoverLi.parentElement.children, hoverLi),\r\n            hoverData = that.selectpicker.current.data[index + position0];\r\n\r\n        that.focusItem(hoverLi, hoverData, true);\r\n      });\r\n\r\n      this.$menuInner.on('click', 'li a', function (e, retainActive) {\r\n        var $this = $(this),\r\n            element = that.$element[0],\r\n            position0 = that.isVirtual() ? that.selectpicker.view.position0 : 0,\r\n            clickedData = that.selectpicker.current.data[$this.parent().index() + position0],\r\n            clickedIndex = clickedData.index,\r\n            prevValue = getSelectValues(element),\r\n            prevIndex = element.selectedIndex,\r\n            prevOption = element.options[prevIndex],\r\n            triggerChange = true;\r\n\r\n        // Don't close on multi choice menu\r\n        if (that.multiple && that.options.maxOptions !== 1) {\r\n          e.stopPropagation();\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        // Don't run if the select is disabled\r\n        if (!that.isDisabled() && !$this.parent().hasClass(classNames.DISABLED)) {\r\n          var option = clickedData.option,\r\n              $option = $(option),\r\n              state = option.selected,\r\n              $optgroup = $option.parent('optgroup'),\r\n              $optgroupOptions = $optgroup.find('option'),\r\n              maxOptions = that.options.maxOptions,\r\n              maxOptionsGrp = $optgroup.data('maxOptions') || false;\r\n\r\n          if (clickedIndex === that.activeIndex) retainActive = true;\r\n\r\n          if (!retainActive) {\r\n            that.prevActiveIndex = that.activeIndex;\r\n            that.activeIndex = undefined;\r\n          }\r\n\r\n          if (!that.multiple) { // Deselect all others if not multi select box\r\n            if (prevOption) prevOption.selected = false;\r\n            option.selected = true;\r\n            that.setSelected(clickedIndex, true);\r\n          } else { // Toggle the one we have chosen if we are multi select.\r\n            option.selected = !state;\r\n\r\n            that.setSelected(clickedIndex, !state);\r\n            that.focusedParent.focus();\r\n\r\n            if (maxOptions !== false || maxOptionsGrp !== false) {\r\n              var maxReached = maxOptions < getSelectedOptions(element).length,\r\n                  maxReachedGrp = maxOptionsGrp < $optgroup.find('option:selected').length;\r\n\r\n              if ((maxOptions && maxReached) || (maxOptionsGrp && maxReachedGrp)) {\r\n                if (maxOptions && maxOptions == 1) {\r\n                  element.selectedIndex = -1;\r\n                  option.selected = true;\r\n                  that.setOptionStatus(true);\r\n                } else if (maxOptionsGrp && maxOptionsGrp == 1) {\r\n                  for (var i = 0; i < $optgroupOptions.length; i++) {\r\n                    var _option = $optgroupOptions[i];\r\n                    _option.selected = false;\r\n                    that.setSelected(_option.liIndex, false);\r\n                  }\r\n\r\n                  option.selected = true;\r\n                  that.setSelected(clickedIndex, true);\r\n                } else {\r\n                  var maxOptionsText = typeof that.options.maxOptionsText === 'string' ? [that.options.maxOptionsText, that.options.maxOptionsText] : that.options.maxOptionsText,\r\n                      maxOptionsArr = typeof maxOptionsText === 'function' ? maxOptionsText(maxOptions, maxOptionsGrp) : maxOptionsText,\r\n                      maxTxt = maxOptionsArr[0].replace('{n}', maxOptions),\r\n                      maxTxtGrp = maxOptionsArr[1].replace('{n}', maxOptionsGrp),\r\n                      $notify = $('<div class=\"notify\"></div>');\r\n                  // If {var} is set in array, replace it\r\n                  /** @deprecated */\r\n                  if (maxOptionsArr[2]) {\r\n                    maxTxt = maxTxt.replace('{var}', maxOptionsArr[2][maxOptions > 1 ? 0 : 1]);\r\n                    maxTxtGrp = maxTxtGrp.replace('{var}', maxOptionsArr[2][maxOptionsGrp > 1 ? 0 : 1]);\r\n                  }\r\n\r\n                  option.selected = false;\r\n\r\n                  that.$menu.append($notify);\r\n\r\n                  if (maxOptions && maxReached) {\r\n                    $notify.append($('<div>' + maxTxt + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReached' + EVENT_KEY);\r\n                  }\r\n\r\n                  if (maxOptionsGrp && maxReachedGrp) {\r\n                    $notify.append($('<div>' + maxTxtGrp + '</div>'));\r\n                    triggerChange = false;\r\n                    that.$element.trigger('maxReachedGrp' + EVENT_KEY);\r\n                  }\r\n\r\n                  setTimeout(function () {\r\n                    that.setSelected(clickedIndex, false);\r\n                  }, 10);\r\n\r\n                  $notify[0].classList.add('fadeOut');\r\n\r\n                  setTimeout(function () {\r\n                    $notify.remove();\r\n                  }, 1050);\r\n                }\r\n              }\r\n            }\r\n          }\r\n\r\n          if (!that.multiple || (that.multiple && that.options.maxOptions === 1)) {\r\n            that.$button.trigger('focus');\r\n          } else if (that.options.liveSearch) {\r\n            that.$searchbox.trigger('focus');\r\n          }\r\n\r\n          // Trigger select 'change'\r\n          if (triggerChange) {\r\n            if (that.multiple || prevIndex !== element.selectedIndex) {\r\n              // $option.prop('selected') is current option state (selected/unselected). prevValue is the value of the select prior to being changed.\r\n              changedArguments = [option.index, $option.prop('selected'), prevValue];\r\n              that.$element\r\n                .triggerNative('change');\r\n            }\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', 'li.' + classNames.DISABLED + ' a, .' + classNames.POPOVERHEADER + ', .' + classNames.POPOVERHEADER + ' :not(.close)', function (e) {\r\n        if (e.currentTarget == this) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n          if (that.options.liveSearch && !$(e.target).hasClass('close')) {\r\n            that.$searchbox.trigger('focus');\r\n          } else {\r\n            that.$button.trigger('focus');\r\n          }\r\n        }\r\n      });\r\n\r\n      this.$menuInner.on('click', '.divider, .dropdown-header', function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$button.trigger('focus');\r\n        }\r\n      });\r\n\r\n      this.$menu.on('click', '.' + classNames.POPOVERHEADER + ' .close', function () {\r\n        that.$button.trigger('click');\r\n      });\r\n\r\n      this.$searchbox.on('click', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$menu.on('click', '.actions-btn', function (e) {\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          that.$button.trigger('focus');\r\n        }\r\n\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if ($(this).hasClass('bs-select-all')) {\r\n          that.selectAll();\r\n        } else {\r\n          that.deselectAll();\r\n        }\r\n      });\r\n\r\n      this.$button\r\n        .on('focus' + EVENT_KEY, function (e) {\r\n          var tabindex = that.$element[0].getAttribute('tabindex');\r\n\r\n          // only change when button is actually focused\r\n          if (tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\r\n            // apply select element's tabindex to ensure correct order is followed when tabbing to the next element\r\n            this.setAttribute('tabindex', tabindex);\r\n            // set element's tabindex to -1 to allow for reverse tabbing\r\n            that.$element[0].setAttribute('tabindex', -1);\r\n            that.selectpicker.view.tabindex = tabindex;\r\n          }\r\n        })\r\n        .on('blur' + EVENT_KEY, function (e) {\r\n          // revert everything to original tabindex\r\n          if (that.selectpicker.view.tabindex !== undefined && e.originalEvent && e.originalEvent.isTrusted) {\r\n            that.$element[0].setAttribute('tabindex', that.selectpicker.view.tabindex);\r\n            this.setAttribute('tabindex', -1);\r\n            that.selectpicker.view.tabindex = undefined;\r\n          }\r\n        });\r\n\r\n      this.$element\r\n        .on('change' + EVENT_KEY, function () {\r\n          that.render();\r\n          that.$element.trigger('changed' + EVENT_KEY, changedArguments);\r\n          changedArguments = null;\r\n        })\r\n        .on('focus' + EVENT_KEY, function () {\r\n          if (!that.options.mobile) that.$button[0].focus();\r\n        });\r\n    },\r\n\r\n    liveSearchListener: function () {\r\n      var that = this;\r\n\r\n      this.$button.on('click.bs.dropdown.data-api', function () {\r\n        if (!!that.$searchbox.val()) {\r\n          that.$searchbox.val('');\r\n          that.selectpicker.search.previousValue = undefined;\r\n        }\r\n      });\r\n\r\n      this.$searchbox.on('click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api', function (e) {\r\n        e.stopPropagation();\r\n      });\r\n\r\n      this.$searchbox.on('input propertychange', function () {\r\n        var searchValue = that.$searchbox[0].value;\r\n\r\n        that.selectpicker.search.elements = [];\r\n        that.selectpicker.search.data = [];\r\n\r\n        if (searchValue) {\r\n          var i,\r\n              searchMatch = [],\r\n              q = searchValue.toUpperCase(),\r\n              cache = {},\r\n              cacheArr = [],\r\n              searchStyle = that._searchStyle(),\r\n              normalizeSearch = that.options.liveSearchNormalize;\r\n\r\n          if (normalizeSearch) q = normalizeToBase(q);\r\n\r\n          for (var i = 0; i < that.selectpicker.main.data.length; i++) {\r\n            var li = that.selectpicker.main.data[i];\r\n\r\n            if (!cache[i]) {\r\n              cache[i] = stringSearch(li, q, searchStyle, normalizeSearch);\r\n            }\r\n\r\n            if (cache[i] && li.headerIndex !== undefined && cacheArr.indexOf(li.headerIndex) === -1) {\r\n              if (li.headerIndex > 0) {\r\n                cache[li.headerIndex - 1] = true;\r\n                cacheArr.push(li.headerIndex - 1);\r\n              }\r\n\r\n              cache[li.headerIndex] = true;\r\n              cacheArr.push(li.headerIndex);\r\n\r\n              cache[li.lastIndex + 1] = true;\r\n            }\r\n\r\n            if (cache[i] && li.type !== 'optgroup-label') cacheArr.push(i);\r\n          }\r\n\r\n          for (var i = 0, cacheLen = cacheArr.length; i < cacheLen; i++) {\r\n            var index = cacheArr[i],\r\n                prevIndex = cacheArr[i - 1],\r\n                li = that.selectpicker.main.data[index],\r\n                liPrev = that.selectpicker.main.data[prevIndex];\r\n\r\n            if (li.type !== 'divider' || (li.type === 'divider' && liPrev && liPrev.type !== 'divider' && cacheLen - 1 !== i)) {\r\n              that.selectpicker.search.data.push(li);\r\n              searchMatch.push(that.selectpicker.main.elements[index]);\r\n            }\r\n          }\r\n\r\n          that.activeIndex = undefined;\r\n          that.noScroll = true;\r\n          that.$menuInner.scrollTop(0);\r\n          that.selectpicker.search.elements = searchMatch;\r\n          that.createView(true);\r\n          showNoResults.call(that, searchMatch, searchValue);\r\n        } else if (that.selectpicker.search.previousValue) { // for IE11 (#2402)\r\n          that.$menuInner.scrollTop(0);\r\n          that.createView(false);\r\n        }\r\n\r\n        that.selectpicker.search.previousValue =  searchValue;\r\n      });\r\n    },\r\n\r\n    _searchStyle: function () {\r\n      return this.options.liveSearchStyle || 'contains';\r\n    },\r\n\r\n    val: function (value) {\r\n      var element = this.$element[0];\r\n\r\n      if (typeof value !== 'undefined') {\r\n        var prevValue = getSelectValues(element);\r\n\r\n        changedArguments = [null, null, prevValue];\r\n\r\n        this.$element\r\n          .val(value)\r\n          .trigger('changed' + EVENT_KEY, changedArguments);\r\n\r\n        if (this.$newElement.hasClass(classNames.SHOW)) {\r\n          if (this.multiple) {\r\n            this.setOptionStatus(true);\r\n          } else {\r\n            var liSelectedIndex = (element.options[element.selectedIndex] || {}).liIndex;\r\n\r\n            if (typeof liSelectedIndex === 'number') {\r\n              this.setSelected(this.selectedIndex, false);\r\n              this.setSelected(liSelectedIndex, true);\r\n            }\r\n          }\r\n        }\r\n\r\n        this.render();\r\n\r\n        changedArguments = null;\r\n\r\n        return this.$element;\r\n      } else {\r\n        return this.$element.val();\r\n      }\r\n    },\r\n\r\n    changeAll: function (status) {\r\n      if (!this.multiple) return;\r\n      if (typeof status === 'undefined') status = true;\r\n\r\n      var element = this.$element[0],\r\n          previousSelected = 0,\r\n          currentSelected = 0,\r\n          prevValue = getSelectValues(element);\r\n\r\n      element.classList.add('bs-select-hidden');\r\n\r\n      for (var i = 0, data = this.selectpicker.current.data, len = data.length; i < len; i++) {\r\n        var liData = data[i],\r\n            option = liData.option;\r\n\r\n        if (option && !liData.disabled && liData.type !== 'divider') {\r\n          if (liData.selected) previousSelected++;\r\n          option.selected = status;\r\n          if (status === true) currentSelected++;\r\n        }\r\n      }\r\n\r\n      element.classList.remove('bs-select-hidden');\r\n\r\n      if (previousSelected === currentSelected) return;\r\n\r\n      this.setOptionStatus();\r\n\r\n      changedArguments = [null, null, prevValue];\r\n\r\n      this.$element\r\n        .triggerNative('change');\r\n    },\r\n\r\n    selectAll: function () {\r\n      return this.changeAll(true);\r\n    },\r\n\r\n    deselectAll: function () {\r\n      return this.changeAll(false);\r\n    },\r\n\r\n    toggle: function (e) {\r\n      e = e || window.event;\r\n\r\n      if (e) e.stopPropagation();\r\n\r\n      this.$button.trigger('click.bs.dropdown.data-api');\r\n    },\r\n\r\n    keydown: function (e) {\r\n      var $this = $(this),\r\n          isToggle = $this.hasClass('dropdown-toggle'),\r\n          $parent = isToggle ? $this.closest('.dropdown') : $this.closest(Selector.MENU),\r\n          that = $parent.data('this'),\r\n          $items = that.findLis(),\r\n          index,\r\n          isActive,\r\n          liActive,\r\n          activeLi,\r\n          offset,\r\n          updateScroll = false,\r\n          downOnTab = e.which === keyCodes.TAB && !isToggle && !that.options.selectOnTab,\r\n          isArrowKey = REGEXP_ARROW.test(e.which) || downOnTab,\r\n          scrollTop = that.$menuInner[0].scrollTop,\r\n          isVirtual = that.isVirtual(),\r\n          position0 = isVirtual === true ? that.selectpicker.view.position0 : 0;\r\n\r\n      // do nothing if a function key is pressed\r\n      if (e.which >= 112 && e.which <= 123) return;\r\n\r\n      isActive = that.$newElement.hasClass(classNames.SHOW);\r\n\r\n      if (\r\n        !isActive &&\r\n        (\r\n          isArrowKey ||\r\n          (e.which >= 48 && e.which <= 57) ||\r\n          (e.which >= 96 && e.which <= 105) ||\r\n          (e.which >= 65 && e.which <= 90)\r\n        )\r\n      ) {\r\n        that.$button.trigger('click.bs.dropdown.data-api');\r\n\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (e.which === keyCodes.ESCAPE && isActive) {\r\n        e.preventDefault();\r\n        that.$button.trigger('click.bs.dropdown.data-api').trigger('focus');\r\n      }\r\n\r\n      if (isArrowKey) { // if up or down\r\n        if (!$items.length) return;\r\n\r\n        liActive = that.selectpicker.main.elements[that.activeIndex];\r\n        index = liActive ? Array.prototype.indexOf.call(liActive.parentElement.children, liActive) : -1;\r\n\r\n        if (index !== -1) {\r\n          that.defocusItem(liActive);\r\n        }\r\n\r\n        if (e.which === keyCodes.ARROW_UP) { // up\r\n          if (index !== -1) index--;\r\n          if (index + position0 < 0) index += $items.length;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\r\n            index = that.selectpicker.view.canHighlight.slice(0, index + position0).lastIndexOf(true) - position0;\r\n            if (index === -1) index = $items.length - 1;\r\n          }\r\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\r\n          index++;\r\n          if (index + position0 >= that.selectpicker.view.canHighlight.length) index = that.selectpicker.view.firstHighlightIndex;\r\n\r\n          if (!that.selectpicker.view.canHighlight[index + position0]) {\r\n            index = index + 1 + that.selectpicker.view.canHighlight.slice(index + position0 + 1).indexOf(true);\r\n          }\r\n        }\r\n\r\n        e.preventDefault();\r\n\r\n        var liActiveIndex = position0 + index;\r\n\r\n        if (e.which === keyCodes.ARROW_UP) { // up\r\n          // scroll to bottom and highlight last option\r\n          if (position0 === 0 && index === $items.length - 1) {\r\n            that.$menuInner[0].scrollTop = that.$menuInner[0].scrollHeight;\r\n\r\n            liActiveIndex = that.selectpicker.current.elements.length - 1;\r\n          } else {\r\n            activeLi = that.selectpicker.current.data[liActiveIndex];\r\n            offset = activeLi.position - activeLi.height;\r\n\r\n            updateScroll = offset < scrollTop;\r\n          }\r\n        } else if (e.which === keyCodes.ARROW_DOWN || downOnTab) { // down\r\n          // scroll to top and highlight first option\r\n          if (index === that.selectpicker.view.firstHighlightIndex) {\r\n            that.$menuInner[0].scrollTop = 0;\r\n\r\n            liActiveIndex = that.selectpicker.view.firstHighlightIndex;\r\n          } else {\r\n            activeLi = that.selectpicker.current.data[liActiveIndex];\r\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\r\n\r\n            updateScroll = offset > scrollTop;\r\n          }\r\n        }\r\n\r\n        liActive = that.selectpicker.current.elements[liActiveIndex];\r\n\r\n        that.activeIndex = that.selectpicker.current.data[liActiveIndex].index;\r\n\r\n        that.focusItem(liActive);\r\n\r\n        that.selectpicker.view.currentActive = liActive;\r\n\r\n        if (updateScroll) that.$menuInner[0].scrollTop = offset;\r\n\r\n        if (that.options.liveSearch) {\r\n          that.$searchbox.trigger('focus');\r\n        } else {\r\n          $this.trigger('focus');\r\n        }\r\n      } else if (\r\n        (!$this.is('input') && !REGEXP_TAB_OR_ESCAPE.test(e.which)) ||\r\n        (e.which === keyCodes.SPACE && that.selectpicker.keydown.keyHistory)\r\n      ) {\r\n        var searchMatch,\r\n            matches = [],\r\n            keyHistory;\r\n\r\n        e.preventDefault();\r\n\r\n        that.selectpicker.keydown.keyHistory += keyCodeMap[e.which];\r\n\r\n        if (that.selectpicker.keydown.resetKeyHistory.cancel) clearTimeout(that.selectpicker.keydown.resetKeyHistory.cancel);\r\n        that.selectpicker.keydown.resetKeyHistory.cancel = that.selectpicker.keydown.resetKeyHistory.start();\r\n\r\n        keyHistory = that.selectpicker.keydown.keyHistory;\r\n\r\n        // if all letters are the same, set keyHistory to just the first character when searching\r\n        if (/^(.)\\1+$/.test(keyHistory)) {\r\n          keyHistory = keyHistory.charAt(0);\r\n        }\r\n\r\n        // find matches\r\n        for (var i = 0; i < that.selectpicker.current.data.length; i++) {\r\n          var li = that.selectpicker.current.data[i],\r\n              hasMatch;\r\n\r\n          hasMatch = stringSearch(li, keyHistory, 'startsWith', true);\r\n\r\n          if (hasMatch && that.selectpicker.view.canHighlight[i]) {\r\n            matches.push(li.index);\r\n          }\r\n        }\r\n\r\n        if (matches.length) {\r\n          var matchIndex = 0;\r\n\r\n          $items.removeClass('active').find('a').removeClass('active');\r\n\r\n          // either only one key has been pressed or they are all the same key\r\n          if (keyHistory.length === 1) {\r\n            matchIndex = matches.indexOf(that.activeIndex);\r\n\r\n            if (matchIndex === -1 || matchIndex === matches.length - 1) {\r\n              matchIndex = 0;\r\n            } else {\r\n              matchIndex++;\r\n            }\r\n          }\r\n\r\n          searchMatch = matches[matchIndex];\r\n\r\n          activeLi = that.selectpicker.main.data[searchMatch];\r\n\r\n          if (scrollTop - activeLi.position > 0) {\r\n            offset = activeLi.position - activeLi.height;\r\n            updateScroll = true;\r\n          } else {\r\n            offset = activeLi.position - that.sizeInfo.menuInnerHeight;\r\n            // if the option is already visible at the current scroll position, just keep it the same\r\n            updateScroll = activeLi.position > scrollTop + that.sizeInfo.menuInnerHeight;\r\n          }\r\n\r\n          liActive = that.selectpicker.main.elements[searchMatch];\r\n\r\n          that.activeIndex = matches[matchIndex];\r\n\r\n          that.focusItem(liActive);\r\n\r\n          if (liActive) liActive.firstChild.focus();\r\n\r\n          if (updateScroll) that.$menuInner[0].scrollTop = offset;\r\n\r\n          $this.trigger('focus');\r\n        }\r\n      }\r\n\r\n      // Select focused option if \"Enter\", \"Spacebar\" or \"Tab\" (when selectOnTab is true) are pressed inside the menu.\r\n      if (\r\n        isActive &&\r\n        (\r\n          (e.which === keyCodes.SPACE && !that.selectpicker.keydown.keyHistory) ||\r\n          e.which === keyCodes.ENTER ||\r\n          (e.which === keyCodes.TAB && that.options.selectOnTab)\r\n        )\r\n      ) {\r\n        if (e.which !== keyCodes.SPACE) e.preventDefault();\r\n\r\n        if (!that.options.liveSearch || e.which !== keyCodes.SPACE) {\r\n          that.$menuInner.find('.active a').trigger('click', true); // retain active class\r\n          $this.trigger('focus');\r\n\r\n          if (!that.options.liveSearch) {\r\n            // Prevent screen from scrolling if the user hits the spacebar\r\n            e.preventDefault();\r\n            // Fixes spacebar selection of dropdown items in FF & IE\r\n            $(document).data('spaceSelect', true);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    mobile: function () {\r\n      // ensure mobile is set to true if mobile function is called after init\r\n      this.options.mobile = true;\r\n      this.$element[0].classList.add('mobile-device');\r\n    },\r\n\r\n    refresh: function () {\r\n      // update options if data attributes have been changed\r\n      var config = $.extend({}, this.options, this.$element.data());\r\n      this.options = config;\r\n\r\n      this.checkDisabled();\r\n      this.buildData();\r\n      this.setStyle();\r\n      this.render();\r\n      this.buildList();\r\n      this.setWidth();\r\n\r\n      this.setSize(true);\r\n\r\n      this.$element.trigger('refreshed' + EVENT_KEY);\r\n    },\r\n\r\n    hide: function () {\r\n      this.$newElement.hide();\r\n    },\r\n\r\n    show: function () {\r\n      this.$newElement.show();\r\n    },\r\n\r\n    remove: function () {\r\n      this.$newElement.remove();\r\n      this.$element.remove();\r\n    },\r\n\r\n    destroy: function () {\r\n      this.$newElement.before(this.$element).remove();\r\n\r\n      if (this.$bsContainer) {\r\n        this.$bsContainer.remove();\r\n      } else {\r\n        this.$menu.remove();\r\n      }\r\n\r\n      if (this.selectpicker.view.titleOption && this.selectpicker.view.titleOption.parentNode) {\r\n        this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption);\r\n      }\r\n\r\n      this.$element\r\n        .off(EVENT_KEY)\r\n        .removeData('selectpicker')\r\n        .removeClass('bs-select-hidden selectpicker');\r\n\r\n      $(window).off(EVENT_KEY + '.' + this.selectId);\r\n    }\r\n  };\r\n\r\n  // SELECTPICKER PLUGIN DEFINITION\r\n  // ==============================\r\n  function Plugin (option) {\r\n    // get the args of the outer function..\r\n    var args = arguments;\r\n    // The arguments of the function are explicitly re-defined from the argument list, because the shift causes them\r\n    // to get lost/corrupted in android 2.3 and IE9 #715 #775\r\n    var _option = option;\r\n\r\n    [].shift.apply(args);\r\n\r\n    // if the version was not set successfully\r\n    if (!version.success) {\r\n      // try to retreive it again\r\n      try {\r\n        version.full = ($.fn.dropdown.Constructor.VERSION || '').split(' ')[0].split('.');\r\n      } catch (err) {\r\n        // fall back to use BootstrapVersion if set\r\n        if (Selectpicker.BootstrapVersion) {\r\n          version.full = Selectpicker.BootstrapVersion.split(' ')[0].split('.');\r\n        } else {\r\n          version.full = [version.major, '0', '0'];\r\n\r\n          console.warn(\r\n            'There was an issue retrieving Bootstrap\\'s version. ' +\r\n            'Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. ' +\r\n            'If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.',\r\n            err\r\n          );\r\n        }\r\n      }\r\n\r\n      version.major = version.full[0];\r\n      version.success = true;\r\n    }\r\n\r\n    if (version.major === '4') {\r\n      // some defaults need to be changed if using Bootstrap 4\r\n      // check to see if they have already been manually changed before forcing them to update\r\n      var toUpdate = [];\r\n\r\n      if (Selectpicker.DEFAULTS.style === classNames.BUTTONCLASS) toUpdate.push({ name: 'style', className: 'BUTTONCLASS' });\r\n      if (Selectpicker.DEFAULTS.iconBase === classNames.ICONBASE) toUpdate.push({ name: 'iconBase', className: 'ICONBASE' });\r\n      if (Selectpicker.DEFAULTS.tickIcon === classNames.TICKICON) toUpdate.push({ name: 'tickIcon', className: 'TICKICON' });\r\n\r\n      classNames.DIVIDER = 'dropdown-divider';\r\n      classNames.SHOW = 'show';\r\n      classNames.BUTTONCLASS = 'btn-light';\r\n      classNames.POPOVERHEADER = 'popover-header';\r\n      classNames.ICONBASE = '';\r\n      classNames.TICKICON = 'bs-ok-default';\r\n\r\n      for (var i = 0; i < toUpdate.length; i++) {\r\n        var option = toUpdate[i];\r\n        Selectpicker.DEFAULTS[option.name] = classNames[option.className];\r\n      }\r\n    }\r\n\r\n    var value;\r\n    var chain = this.each(function () {\r\n      var $this = $(this);\r\n      if ($this.is('select')) {\r\n        var data = $this.data('selectpicker'),\r\n            options = typeof _option == 'object' && _option;\r\n\r\n        if (!data) {\r\n          var dataAttributes = $this.data();\r\n\r\n          for (var dataAttr in dataAttributes) {\r\n            if (Object.prototype.hasOwnProperty.call(dataAttributes, dataAttr) && $.inArray(dataAttr, DISALLOWED_ATTRIBUTES) !== -1) {\r\n              delete dataAttributes[dataAttr];\r\n            }\r\n          }\r\n\r\n          var config = $.extend({}, Selectpicker.DEFAULTS, $.fn.selectpicker.defaults || {}, dataAttributes, options);\r\n          config.template = $.extend({}, Selectpicker.DEFAULTS.template, ($.fn.selectpicker.defaults ? $.fn.selectpicker.defaults.template : {}), dataAttributes.template, options.template);\r\n          $this.data('selectpicker', (data = new Selectpicker(this, config)));\r\n        } else if (options) {\r\n          for (var i in options) {\r\n            if (Object.prototype.hasOwnProperty.call(options, i)) {\r\n              data.options[i] = options[i];\r\n            }\r\n          }\r\n        }\r\n\r\n        if (typeof _option == 'string') {\r\n          if (data[_option] instanceof Function) {\r\n            value = data[_option].apply(data, args);\r\n          } else {\r\n            value = data.options[_option];\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    if (typeof value !== 'undefined') {\r\n      // noinspection JSUnusedAssignment\r\n      return value;\r\n    } else {\r\n      return chain;\r\n    }\r\n  }\r\n\r\n  var old = $.fn.selectpicker;\r\n  $.fn.selectpicker = Plugin;\r\n  $.fn.selectpicker.Constructor = Selectpicker;\r\n\r\n  // SELECTPICKER NO CONFLICT\r\n  // ========================\r\n  $.fn.selectpicker.noConflict = function () {\r\n    $.fn.selectpicker = old;\r\n    return this;\r\n  };\r\n\r\n  // get Bootstrap's keydown event handler for either Bootstrap 4 or Bootstrap 3\r\n  function keydownHandler () {\r\n    if ($.fn.dropdown) {\r\n      // wait to define until function is called in case Bootstrap isn't loaded yet\r\n      var bootstrapKeydown = $.fn.dropdown.Constructor._dataApiKeydownHandler || $.fn.dropdown.Constructor.prototype.keydown;\r\n      return bootstrapKeydown.apply(this, arguments);\r\n    }\r\n  }\r\n\r\n  $(document)\r\n    .off('keydown.bs.dropdown.data-api')\r\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > [data-toggle=\"dropdown\"]', keydownHandler)\r\n    .on('keydown.bs.dropdown.data-api', ':not(.bootstrap-select) > .dropdown-menu', keydownHandler)\r\n    .on('keydown' + EVENT_KEY, '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', Selectpicker.prototype.keydown)\r\n    .on('focusin.modal', '.bootstrap-select [data-toggle=\"dropdown\"], .bootstrap-select [role=\"listbox\"], .bootstrap-select .bs-searchbox input', function (e) {\r\n      e.stopPropagation();\r\n    });\r\n\r\n  // SELECTPICKER DATA-API\r\n  // =====================\r\n  $(window).on('load' + EVENT_KEY + '.data-api', function () {\r\n    $('.selectpicker').each(function () {\r\n      var $selectpicker = $(this);\r\n      Plugin.call($selectpicker, $selectpicker.data());\r\n    })\r\n  });\r\n})(jQuery);\r\n\r\n\r\n}));\n//# sourceMappingURL=bootstrap-select.js.map"],"names":["root","factory","undefined","window","define","amd","module","exports","require","this","jQuery","$","DISALLOWED_ATTRIBUTES","uriAttrs","DefaultWhitelist","*","a","area","b","br","col","code","div","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","s","small","span","sub","sup","strong","u","ul","SAFE_URL_PATTERN","DATA_URL_PATTERN","sanitizeHtml","unsafeElements","whiteList","sanitizeFn","whitelistKeys","Object","keys","len","length","elements","querySelectorAll","j","len2","el","elName","nodeName","toLowerCase","indexOf","parentNode","removeChild","attributeList","slice","call","attributes","whitelistedAttributes","concat","k","len3","attr","allowedAttribute","allowedAttributeList","attrName","inArray","Boolean","nodeValue","match","regExp","filter","index","value","RegExp","l","removeAttribute","document","createElement","view","classListProp","protoProp","elemCtrProto","Element","objCtr","classListGetter","$elem","add","classes","Array","prototype","arguments","join","addClass","remove","removeClass","toggle","force","toggleClass","contains","hasClass","defineProperty","classListPropDesc","get","enumerable","configurable","ex","number","__defineGetter__","_add","_remove","_toggle","toString","testElement","startsWith","search","TypeError","string","String","stringLength","searchString","searchLength","position","pos","Number","start","Math","min","max","charCodeAt","getSelectedOptions","select","ignoreDisabled","opt","selectedOptions","options","disabled","tagName","push","getSelectValues","multiple","classList","DOMTokenList","forEach","bind","token","object","$defineProperty","result","error","writable","o","r","hasOwnProperty","HTMLSelectElement","valHooks","useDefault","_set","set","changedArguments","elem","data","apply","EventIsSupported","Event","e","stringSearch","method","normalize","stringTypes","searchSuccess","stringType","replace","normalizeToBase","toUpperCase","toInteger","parseInt","fn","triggerNative","eventName","event","dispatchEvent","bubbles","createEvent","initEvent","fireEvent","createEventObject","eventType","trigger","deburredLetters","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","reLatin","reComboMark","deburrLetter","key","map","&","<",">","\"","'","`","source","testRegexp","replaceRegexp","htmlEscape","test","escaper","keyCodeMap","32","48","49","50","51","52","53","54","55","56","57","59","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","96","97","98","99","100","101","102","103","104","105","keyCodes","version","success","major","full","dropdown","Constructor","VERSION","split","err","selectId","EVENT_KEY","classNames","DISABLED","DIVIDER","SHOW","DROPUP","MENU","MENURIGHT","MENULEFT","BUTTONCLASS","POPOVERHEADER","ICONBASE","TICKICON","Selector","elementTemplates","subtext","whitespace","createTextNode","fragment","createDocumentFragment","REGEXP_ARROW","noResults","cloneNode","className","setAttribute","text","checkMark","REGEXP_TAB_OR_ESCAPE","generateOption","content","optgroup","nodeType","appendChild","innerHTML","inline","insertAdjacentHTML","useFragment","iconElement","textElement","textContent","icon","iconBase","subtextElement","childNodes","label","display","Selectpicker","element","that","$element","$newElement","$button","$menu","selectpicker","main","current","isSearching","keydown","keyHistory","resetKeyHistory","setTimeout","sizeInfo","title","winPad","windowPadding","val","render","refresh","setStyle","selectAll","deselectAll","destroy","show","hide","init","Plugin","option","args","_option","shift","BootstrapVersion","console","warn","toUpdate","DEFAULTS","style","name","tickIcon","chain","each","$this","is","dataAttr","dataAttributes","config","extend","defaults","template","Function","noneSelectedText","noneResultsText","countSelectedText","numSelected","numTotal","maxOptionsText","numAll","numGroup","selectAllText","deselectAllText","doneButton","doneButtonText","multipleSeparator","styleBase","size","selectedTextFormat","width","container","hideDisabled","showSubtext","showIcon","showContent","dropupAuto","header","liveSearch","liveSearchPlaceholder","liveSearchNormalize","liveSearchStyle","actionsBox","showTick","caret","maxOptions","mobile","selectOnTab","dropdownAlignRight","virtualScroll","sanitize","constructor","id","form","prop","autofocus","createDropdown","buildData","after","prependTo","children","$menuInner","$searchbox","find","checkDisabled","clickListener","liveSearchListener","focusedParent","setWidth","selectPosition","on","menuInner","emptyMenu","isVirtual","firstChild","replaceChild","scrollTop","hide.bs.dropdown","hidden.bs.dropdown","show.bs.dropdown","shown.bs.dropdown","hasAttribute","off","validity","valid","buildList","multiselectable","inputGroup","parent","searchbox","actionsbox","donebutton","drop","setPositionData","canHighlight","firstHighlightIndex","type","height","dividerHeight","dropdownHeaderHeight","liHeight","posinset","createView","setSize","selected","prevActive","active","scroll","currentChunk","chunks","menuIsDifferent","array2","chunkSize","ceil","menuInnerHeight","chunkCount","round","endOfChunk","prevPositions","position0","position1","firstChunk","lastChunk","positionIsDifferent","activeIndex","prevActiveIndex","selectedIndex","defocusItem","previousElements","visibleElements","setOptionStatus","array1","every","menuFragment","toSanitize","actualMenuWidth","visibleElementsLen","elText","elementData","lastChild","sanitized","marginTop","marginBottom","hasScrollBar","menuInnerInnerWidth","offsetWidth","totalMenuWidth","selectWidth","minWidth","newActive","currentActive","focusItem","liIndex","selectedData","updateValue","noScroll","liData","noStyle","setPlaceholder","selectTitleOption","titleNotAppended","selectedOption","isNotBackForward","updateIndex","titleOption","navigation","performance","getEntriesByType","defaultSelected","insertBefore","readyState","addEventListener","displayedValue","optionSelector","mainData","optID","startIndex","selectOptions","addDivider","previousData","addOption","inlineStyle","optionClass","divider","getAttribute","cssText","optgroupClass","trim","tokens","item","lastIndex","headerIndex","previous","addOptgroup","next","selectData","mainElements","widestOptionLength","liElement","combinedLength","widestOption","findLis","placeholderSelected","selectedCount","button","buttonInner","querySelector","titleFragment","hasContent","countMax","thisData","titleOptions","totalCount","tr8nText","filterExpand","clone","newStyle","status","newElement","previousElementSibling","nextElementSibling","buttonClass","menu","menuInnerInner","dropdownHeader","actions","firstOption","input","body","offsetHeight","headerHeight","searchHeight","actionsHeight","doneButtonHeight","outerHeight","menuStyle","getComputedStyle","menuWidth","menuPadding","vert","paddingTop","css","paddingBottom","borderTopWidth","borderBottomWidth","horiz","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","menuExtras","marginLeft","marginRight","overflowY","scrollBarWidth","selectHeight","getSelectPosition","containerPos","$window","offset","$container","top","left","selectOffsetTop","selectOffsetBot","selectOffsetLeft","scrollLeft","selectOffsetRight","setMenuSize","isAuto","menuHeight","minHeight","maxHeight","menuInnerMinHeight","isDropup","divHeight","divLength","estimate","dropup","_minHeight","max-height","overflow","min-height","overflow-y","_popper","update","requestAnimationFrame","$selectClone","appendTo","btnWidth","outerWidth","$bsContainer","getPlacement","containerPosition","Default","actualHeight","isDisabled","append","detach","selectedOnly","setDisabled","setSelected","activeIndexIsSet","keepActive","$document","setFocus","checkPopperExists","state","isCreated","keyCode","preventDefault","_menu","hoverLi","parentElement","hoverData","retainActive","clickedData","clickedIndex","prevValue","prevIndex","prevOption","triggerChange","stopPropagation","$option","$optgroup","$optgroupOptions","maxOptionsGrp","focus","maxReached","maxReachedGrp","maxOptionsArr","maxTxt","maxTxtGrp","$notify","currentTarget","target","tabindex","originalEvent","isTrusted","previousValue","searchValue","searchMatch","q","cache","cacheArr","searchStyle","_searchStyle","normalizeSearch","cacheLen","liPrev","showNoResults","liSelectedIndex","changeAll","previousSelected","currentSelected","isActive","liActive","activeLi","isToggle","closest","$items","updateScroll","downOnTab","which","isArrowKey","lastIndexOf","liActiveIndex","scrollHeight","matches","cancel","clearTimeout","charAt","matchIndex","before","removeData","old","keydownHandler","_dataApiKeydownHandler","noConflict","$selectpicker"],"mappings":"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"}