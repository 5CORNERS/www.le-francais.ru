let polly={};let audio=undefined;const NORMAL_CLASS="fa-volume-down";const LOADING_CLASS="fa-spinner fa-pulse";const SPEAKING_CLASS="fa-volume-up";const ERROR_CLASS="fa-exclamation-circle red";const classes=[NORMAL_CLASS,LOADING_CLASS,SPEAKING_CLASS,ERROR_CLASS];function changeClassTo(a,b){for(let i in classes){$(a).removeClass(classes[i])}$(a).addClass(b)}function pollyListen(b,a){if(b.attributes["data-mood"].value==="indicative"&&b.attributes["data-tense"].value==="present"&&AUDIO_URL!=="None"){polly[a]=AUDIO_URL}if(polly[a]===undefined){changeClassTo(b,LOADING_CLASS);$.ajax({url:CONJ_POLLY_URL,type:"POST",async:true,datatype:"json",data:{csrfmiddlewaretoken:CSRF_TOKEN,key:a},success:function(c){polly[a]=c[a].url;pollyListen(b,a)},error:function(c){changeClassTo(b,ERROR_CLASS)}})}else{audio=new Audio([polly[a]]);audio.attributes["data-key"]=a;audio.addEventListener("play",function(){changeClassTo(b,SPEAKING_CLASS)});audio.addEventListener("pause",function(){changeClassTo(b,NORMAL_CLASS)});audio.play()}}$(document).ready(function(){$(".play-pause-icon").each(function(){$(this).addClass(NORMAL_CLASS);this.addEventListener("click",function(){if(audio!==undefined&&!audio.paused){audio.pause();audio.currentTime=0;changeClassTo(this,NORMAL_CLASS);if(audio.attributes["data-key"]===this.attributes["data-key"].value){return}}pollyListen(this,this.attributes["data-key"].value)})})});