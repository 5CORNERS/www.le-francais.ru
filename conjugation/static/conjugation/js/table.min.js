var polly={},audio=void 0,ua=window.navigator.userAgent,iOS=!!ua.match(/iPad/i)||!!ua.match(/iPhone/i),is_webkit=!!ua.match(/WebKit/i),iOSSafari=iOS&&is_webkit&&!ua.match(/CriOS/i),NORMAL_CLASS="fa-volume-down",LOADING_CLASS="fa-spinner fa-pulse",SPEAKING_CLASS="fa-volume-up",ERROR_CLASS="fa-exclamation-circle red",classes=[NORMAL_CLASS,LOADING_CLASS,SPEAKING_CLASS,ERROR_CLASS];function changeClassTo(b,a){for(var c in classes)$(b).removeClass(classes[c]);$(b).addClass(a)}
function pollyListen(b,a){"False"===IS_REFLEXIVE&&"indicative"===b.attributes["data-mood"].value&&"present"===b.attributes["data-tense"].value&&"None"!==AUDIO_URL&&(polly[a]=AUDIO_URL);void 0===polly[a]?(changeClassTo(b,LOADING_CLASS),$.ajax({url:CONJ_POLLY_URL,type:"POST",async:!iOSSafari,datatype:"json",data:{csrfmiddlewaretoken:CSRF_TOKEN,key:a},success:function(c){polly[a]=c[a].url;pollyListen(b,a)},error:function(a){changeClassTo(b,ERROR_CLASS)}})):(audio=new Audio([polly[a]]),audio.attributes["data-key"]=
a,audio.addEventListener("play",function(){changeClassTo(b,SPEAKING_CLASS)}),audio.addEventListener("pause",function(){changeClassTo(b,NORMAL_CLASS)}),audio.play())}
$(document).ready(function(){$(".play-pause-icon").each(function(){$(this).addClass(NORMAL_CLASS);this.addEventListener("click",function(){if(void 0!==audio&&!audio.paused&&(audio.pause(),audio.currentTime=0,changeClassTo(this,NORMAL_CLASS),audio.attributes["data-key"]===this.attributes["data-key"].value))return;pollyListen(this,this.attributes["data-key"].value)})});$(".nav-pills > li > a").each(function(){this.addEventListener("click",function(){".form0"!==this.attributes["data-target"].value?$(".play-pause-icon").hide():
$(".play-pause-icon").show()})})});
